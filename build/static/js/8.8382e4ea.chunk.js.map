{"version":3,"sources":["pages/Appearance/index.tsx","api/callComponent.tsx","components/Select.tsx","components/Label.tsx","hooks/useFetch.ts","components/TableElements/CollectionTable.tsx","components/TableElements/AddFilter.tsx","components/TooltipChild.tsx","components/TableElements/FilesCell/MediaField.tsx","components/TableElements/FilesCell/index.tsx","components/PageTitle.tsx","assets/subcollection.svg","components/Fields/Badges/Wrapper.tsx","components/Fields/Badges/String.tsx","components/Fields/Badges/Number.tsx","components/Fields/Badges/Map.tsx","components/Fields/Badges/Array.tsx","components/Fields/Badges/Boolean.tsx","components/Fields/Badges/Date.tsx","components/Fields/Badges/Media.tsx","components/Fields/Badges/RichText.tsx","components/Fields/Badges/Json.tsx","components/Fields/Badges/Enum.tsx","components/Fields/Badges/Password.tsx","components/Fields/Badges/Relation.tsx","components/Fields/Badges/Subcollection.tsx","components/Fields/Badges/Any.tsx","components/Textarea.tsx","components/Fields/Components/String.tsx","components/JsonEditor.tsx","assets/media.svg","components/Fields/Components/Any.tsx","components/Fields/Components/Number.tsx","components/Switch.tsx","components/Fields/Components/Boolean.tsx","components/Fields/Components/Date.tsx","pages/Media/SelectMedia.tsx","components/ReorderSelectedFiles.tsx","assets/color.svg","components/MultipleMediaInput.tsx","components/SingleMediaInput.tsx","components/Fields/Components/Media.tsx","components/RichTextEditor.tsx","components/Fields/Components/RichText.tsx","components/Fields/Components/Enum.tsx","components/Fields/Components/Password.tsx","components/RelationFieldValue.tsx","components/RelationField.tsx","components/Fields/Components/Relation.tsx","components/SubcollectionDocument.tsx","components/SubcollectionField.tsx","components/Fields/Components/Subcollection.tsx","components/Fields/Validations/Array.ts","components/Fields/Validations/Map.ts","components/Fields/Validations/Json.ts","components/Fields/Validations/Default.ts","components/Fields/Components/HashedPassword.tsx","components/Fields/Validations/HashedPassword.ts","components/Fields/Badges/Color.tsx","components/Popover.tsx","components/ColorPicker.tsx","components/Fields/index.ts","components/Fields/Components/Color.tsx","facades/FilesManager.ts","api/files.ts","components/Fields/InitialValues/index.ts","components/DocumentForm.tsx","pages/Media/index.tsx","components/IconButton.tsx","assets/one-to-one.svg","assets/one-to-many.svg","hooks/useDraggableInPortal.ts","components/DraggableList.tsx","components/Document.tsx"],"names":["Appearance","collectionId","docId","callComponent","Component","props","Promise","resolve","reject","wrapper","document","getElementById","appendChild","createElement","ReactDOM","render","store","client","queryClient","proceed","val","unmountComponentAtNode","parentNode","removeChild","WarningIcon","React","forwardRef","ref","className","size","Select","options","error","ground","mainClasses","classNames","spellCheck","map","x","i","value","label","title","placement","fontSize","Label","children","toLowerCase","useFetch","filters","orderBy","inView","getOptions","useNotify","useCallback","forEach","f","where","fieldId","operator","direction","length","populateRef","useInfiniteQuery","pageParam","CollectionsManager","getCollection","startAfter","keepPreviousData","getNextPageParam","lastPage","pages","lastDoc","undefined","data","fetchNextPage","hasNextPage","useEffect","docs","reduce","a","b","Table","collectionType","onPick","blackList","singleSelect","valueFormatters","_filters","_onEdit","onEdit","hideFilters","history","useHistory","useState","setFilters","fields","filter","field","displayOnTable","selected","setSelected","setOrderBy","endIsInView","setEndIsInView","id","onDeleteSelected","confirm","confirmation","deleteMultipleDocuments","includes","doc","push","onOrder","selectHandler","checked","prev","arr","index","findIndex","splice","formatValue","type","moment","format","toString","substring","AddFilter","onValue","hidden","uncapitalize","onClick","Button","disabled","Checkbox","classes","root","onChange","e","select","target","stopPropagation","j","mediaSingle","FilesCell","file","files","colSpan","AddFilterModal","open","setOpen","useFormik","onSubmit","vals","resetForm","initialValues","validate","errors","Object","keys","values","handleChange","submitCount","handleSubmit","isSubmitting","onMouseDown","style","maxWidth","name","onKeyDown","key","preventDefault","placeholder","TooltipChild","MediaField","src","Tooltip","arrow","alt","tooltip","backgroundImage","Files","useRef","Math","random","slice","PageTitle","rest","_path","Wrapper","String","Number","Map","Array","Boolean","Media","Enum","Password","Relation","_excluded","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgSubcollection","_ref","svgRef","titleId","width","height","viewBox","fill","xmlns","d","ForwardRef","Textarea","stringLong","Input","require","jsonlint","window","_path2","JsonEditor","initialValue","setInitialValue","count","setCount","JSON","stringify","mode","theme","lineNumbers","autoCloseBrackets","lint","gutters","editor","parse","er","Any","CustomSwitch","Switch","Date","SelectMedia","multiple","uploadRef","topRef","setLoading","isTopVisible","setIsTopVisible","refreshCounter","setCounter","useSelector","state","collectionTypes","find","ButtonBase","current","scrollIntoView","behavior","uploaded","uploadFile","click","CollectionTable","url","MediaDocumentFormatters","ReorderSelectedFiles","selectedFiles","setSelectedFiles","onClose","DraggableList","onDragEnd","result","destination","items","list","startIndex","endIndex","from","removed","reorder","containerClassName","item","Item","SvgMedia","MediaInput","activeIndex","setActiveIndex","openReordering","setOpenReordering","selectFiles","res","prevFiles","Modal","SingleMediaInput","selectedFile","setSelectedFile","MultipleMediaInput","RichText","mdParser","MarkdownIt","els","getElementsByClassName","classList","add","onCustomImageUpload","text","renderHTML","RichTextEditor","minHeight","enumOptions","opt","RelationFieldValue","valueLabel","setValueLabel","console","log","labelField","getDocument","RelationField","fieldType","relatedCollectionTypeDocId","relationOneToOne","IconButton","autoHide","docIds","SubcollectionDocument","editableDocument","level","padding","min","DocumentForm","getSubcollectionDocument","docIndex","Collection","SubcollectionField","collectionFields","Validate","Error","obj","plain","setPlain","createPassword","fetch","location","origin","method","body","then","json","onBlur","password","SvgColor","Color","PopoverWrapper","content","anchorOrigin","transformOrigin","closeOnContentClick","anchorEl","setAnchorEl","Popover","paper","vertical","horizontal","currentTarget","ColorPicker","color","event","rgb","r","g","HashedPasswordField","HashedPasswordComponent","HashedPasswordValidation","Badge","StringBadge","StringComponent","DefaultValidation","NumberBadge","NumberComponent","MapBadge","AnyComponent","MapValidation","ArrayBadge","ArrayValidation","BooleanBadge","BooleanComponent","DateBadge","DateComponent","MediaBadge","MediaComponent","RichTextBadge","RichTextComponent","JsonBadge","JsonValidation","EnumBadge","EnumComponent","PasswordBadge","PasswordComponent","RelationBadge","RelationComponent","SubcollectionBadge","SubcollectionComponent","ColorBadge","clr","background","AnyBadge","FilesManager","storage","getStorage","nameParts","split","fileName","shortuuid","generate","fileRef","uploadTask","uploadBytesResumable","on","snapshot","getDownloadURL","downloadUrl","path","deleteObject","upload","fileDetails","storagePath","getFileExtension","addDocument","string","array","media","date","enum","number","boolean","relation","collection","documentFields","any","singleName","allFieldTypes","FieldTypes","dispatch","useDispatch","initial","validateOnChange","enableReinitialize","payload","setFieldValue","hasChanged","isDefault","formatBytes","notify","variant","_circle","_circle2","SvgOneToOne","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","_circle3","SvgOneToMany","useDraggableInPortal","self","div","position","pointerEvents","top","elt","provided","args","element","draggableProps","createPortal","renderDraggable","uniqid","formatId","keyword","droppableId","droppableProps","innerRef","draggableId","dragHandleProps","Document","useQuery","single","updateDocument","goBack"],"mappings":"oHAAA,2BAiBeA,UAJ+B,WAC5C,OAAO,cAAC,IAAD,CAAUC,aAHG,+BAG0BC,MAAM,O,uJCG/C,SAASC,EAAT,GAAwF,IAAxDC,EAAuD,EAAvDA,UAAWC,EAA4C,EAA5CA,MAChD,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAAY,IAAD,EAChCC,EAAO,UAAGC,SAASC,eAAe,eAA3B,aAAG,EAAiCC,YAAYF,SAASG,cAAc,QAEhFJ,GACFK,IAASC,OACP,cAAC,IAAD,CAAUC,MAAOA,IAAjB,SACE,cAAC,IAAD,UACE,cAAC,sBAAD,CAAqBC,OAAQC,cAA7B,SACE,cAACd,EAAD,2BACMC,GADN,IAEEc,QAAS,SAACC,GAAa,IAAD,EACpBN,IAASO,uBAAuBZ,GAChC,UAAAA,EAAQa,kBAAR,SAAoBC,YAAYd,GAChCF,EAAQa,aAMlBX,Q,mKC/BFe,EAAcC,IAAMC,YAAW,SAAqBrB,EAAYsB,GACpE,OACE,+CAAStB,GAAT,IAAgBsB,IAAKA,EAArB,SACE,cAAC,IAAD,CAAsBC,UAAU,kBAAkBC,KAAM,WAuC/CC,IA3BuB,SAAC,GAA0D,IAAD,IAAvDF,iBAAuD,MAA3C,GAA2C,EAAvCG,EAAuC,EAAvCA,QAASC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,OAAW5B,EAAY,iBAC1F6B,EAAW,eAAWD,EAAX,0BAAmCA,EAAnC,gCAAiEA,EAAjE,iCAAgGA,EAAhG,kCAAgIA,EAAhI,mCAAiKA,EAAjK,cACf,OACE,sBAAKL,UAAS,UAAKA,EAAL,+BAAd,UACE,gDACEA,UAAWO,IAAW,gEAAD,aACnB,oBAAqBH,GACpBE,GAAeF,KAEd3B,GALN,IAME+B,YAAY,EANd,SAQGL,EAAQM,KAAI,SAACC,EAAGC,GAAJ,OACX,wBAAQ,sCAA8BD,EAAEE,OAA0BA,MAAOF,EAAEE,MAA3E,SACGF,EAAEG,OADiD,OAASF,SAKlEP,EACC,cAAC,IAAD,CAASU,MAAOV,EAAOW,UAAU,MAAjC,SACE,cAACnB,EAAD,CAAaI,UAAU,sCAEvB,U,iHC9BJJ,EAAcC,IAAMC,YAAW,SAAqBrB,EAAYsB,GACpE,OACE,+CAAStB,GAAT,IAAgBsB,IAAKA,EAArB,SACE,cAAC,IAAD,CAAcC,UAAU,uBAAuBgB,SAAS,kBAuB/CC,IAlBqB,SAAC,GAAiD,IAAD,IAA9CjB,iBAA8C,MAAlC,GAAkC,EAA9BkB,EAA8B,EAA9BA,SAAUd,EAAoB,EAApBA,MAAOC,EAAa,EAAbA,OACtE,OACE,sBACEL,UAAWO,IAAW,iCAAD,OACcP,GADd,UAEhBK,EAAOc,cAFS,cADvB,UAME,8BAAMD,IACLd,EACC,cAAC,IAAD,CAASU,MAAOV,EAAOW,UAAU,MAAjC,SACE,cAACnB,EAAD,CAAaI,UAAU,sCAEvB,U,sOCwCKoB,EA3DE,SAAC,GAAoE,IAAlE/C,EAAiE,EAAjEA,aAAiE,IAAnDgD,eAAmD,MAAzC,GAAyC,EAArCC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,OAGjDC,GAFSC,cAEIC,uBAAY,WAC7B,IAAIvB,EAAgC,CAAE9B,eAEtC8B,MAAgB,GAChBA,QAAkB,IAkBlB,OAhBAkB,EAAQM,SAAQ,SAACC,EAAGjB,GAClBR,EAAQ0B,QAAUlB,EAAI,EAAI,IAAM,IAAMiB,EAAEE,QAAU,IAAMF,EAAEG,SAAW,IAAMH,EAAEhB,MACzEU,GAAWA,EAAQQ,UAAYF,EAAEE,UACnC3B,EAAQmB,UAAYnB,EAAQmB,QAAU,IAAM,IAAMM,EAAEE,YAIpDR,IACFnB,EAAQmB,UAAYnB,EAAQmB,QAAU,IAAM,IAAzB,UAAkCA,EAAQQ,QAA1C,YAAqDR,EAAQU,YAE7EV,GAAYD,EAAQY,SACvB9B,EAAQmB,QAAU,iBAGpBnB,EAAQ+B,aAAc,EAEf/B,IACN,CAACmB,EAASD,EAAShD,KAEtB,EAAoD8D,2BAClD,CAAC9D,EAAciD,EAASD,IACxB,YAAoB,IAAjBe,EAAgB,EAAhBA,UACD,OAAOC,IAAmBC,cAAnB,2BAAsCd,KAAtC,IAAoDe,WAAYH,OAEzE,CACEI,kBAAkB,EAClBC,iBAAkB,SAACC,EAAUC,GAC3B,IAAIC,GAAkB,OAARF,QAAQ,IAARA,OAAA,EAAAA,EAAUT,SAA8B,KAApBS,EAAST,OAAgBS,EAAS,GAAK,KACzE,OAAOE,EAAUA,EAAQtB,EAAUA,EAAQQ,QAAU,kBAAee,KATlEC,EAAR,EAAQA,KAAaC,GAArB,EAAc3C,MAAd,EAAqB2C,eAAeC,EAApC,EAAoCA,YA4BpC,OANAC,qBAAU,WACJ1B,GAAUyB,GACZD,MAED,CAACxB,EAAQwB,EAAeC,IAEpB,CAAEE,MAAU,OAAJJ,QAAI,IAAJA,OAAA,EAAAA,EAAMH,MAAMQ,QAAO,SAACC,EAAGC,GAAJ,4BAAcD,GAAd,YAAoBC,MAAI,MAAO,K,6CCoNpDC,IA1PqB,SAAC,GAU9B,IATLC,EASI,EATJA,eACAC,EAQI,EARJA,OAQI,IAPJC,iBAOI,MAPQ,GAOR,MANJC,oBAMI,SALJC,EAKI,EALJA,gBACAtD,EAII,EAJJA,OAII,IAHJgB,QAASuC,OAGL,MAHgB,GAGhB,EAFIC,EAEJ,EAFJC,OAEI,IADJC,mBACI,SACEC,EAAUC,cAEhB,EAA8BpE,IAAMqE,SAAuB,IAA3D,mBAAO7C,EAAP,KAAgB8C,EAAhB,KACMC,EAASb,EAAea,OAAOC,QAAO,SAACC,GAAD,OAAWA,EAAMC,kBAC7D,EAAgC1E,IAAMqE,SAAmB,IAAzD,mBAAOM,EAAP,KAAiBC,EAAjB,KACA,EAA8B5E,IAAMqE,WAApC,mBAAO5C,EAAP,KAAgBoD,EAAhB,KACA,EAAsC7E,IAAMqE,UAAS,GAArD,mBAAOS,EAAP,KAAoBC,EAApB,KAEQ1B,EAAS9B,EAAS,CACxB/C,aAAckF,EAAesB,GAC7BxD,UACAC,UACAC,OAAQoD,IAJFzB,KAOF4B,GAAgB,uCAAG,sBAAA1B,EAAA,sEACb2B,YAAQ,CAAEC,aAAa,UAAD,OAAYR,EAASvC,OAArB,iBADT,kCAErBI,IAAmB4C,wBACjB1B,EAAesB,GACf3B,EAAKmB,QAAO,SAAC3D,GAAD,OAAO8D,EAASU,SAASxE,EAAEpC,WAGzCmG,EAAY,IAPS,2CAAH,qDAWhBX,GACJD,GACC,SAACsB,GACAnB,EAAQoB,KAAR,uBAA6B7B,EAAesB,GAA5C,iBAAuDM,EAAI7G,SAGzD+G,GAAU,SAACf,GAAD,OACP,OAAPhD,QAAO,IAAPA,OAAA,EAAAA,EAASQ,WAAYwC,EAAMO,GACvB,WACEH,EAAW,CAAE5C,QAASwC,EAAMO,GAAI7C,UAAW,SAEtB,SAAhB,OAAPV,QAAO,IAAPA,OAAA,EAAAA,EAASU,WACT,kBAAM0C,OAAW7B,IACjB,kBAAM6B,EAAW,CAAE5C,QAASwC,EAAMO,GAAI7C,UAAW,WAIjDsD,GAAgB,SAAChH,EAAeiH,GAGhCd,EAFAc,EACE7B,EACU,CAACpF,GAED,SAACkH,GAAD,4BAAcA,GAAd,CAAoBlH,KAKxB,SAACkH,GACX,IAAIC,EAAG,YAAOD,GACVE,EAAQD,EAAIE,WAAU,SAACjF,GAAD,OAAOA,IAAMpC,KAIvC,OAHa,MAAToH,GACFD,EAAIG,OAAOF,EAAO,GAEbD,KAILI,GAAc,SAACvB,EAAiB1D,GACpC,MAAsB,SAAf0D,EAAMwB,KACTC,IAAOnF,GAAOoF,OAAO,oBACrBrC,GAAmBW,EAAMO,MAAMlB,EAC/BA,EAAgBW,EAAMO,IAAIjE,GAC1BA,EAAMqF,WAAWC,UAAU,EAAG,KASpC,OANAjD,qBAAU,WACJW,EAAS3B,QACXkC,GAAW,SAACqB,GAAD,4BAAcA,GAAd,YAAuB5B,SAEnC,CAACA,IAGF,sBAAK5D,UAAU,8BAAf,UACE,sBAAKA,UAAU,4BAAf,UACG+D,EAAc,KACb,sBAAK/D,UAAU,iBAAf,UACE,cAACmG,EAAA,EAAD,CACE9F,OAAQA,EACRkD,eAAgBA,EAChB6C,QAAS,SAAC5G,GAAD,OAAqB2E,GAAW,SAACqB,GAAD,OAAWhG,GAAX,mBAAmBgG,UAE7DnE,EAAQZ,KAAI,SAACmB,EAAGjB,GAAJ,OACXiB,EAAEyE,OAAS,KACT,sBAEErG,UAAWO,IACT,mFADmB,UAEhB+F,YAAajG,GAFG,qBAEiBiG,YAAajG,GAF9B,gBAFvB,UAOGuB,EAAEE,QAPL,IAOeF,EAAEG,SAPjB,IAO4BH,EAAEhB,MAAO,IACnC,sBACE2F,QAAS,kBACPpC,GAAW,SAACqB,GACV,IAAIC,EAAG,YAAOD,GAEd,OADAC,EAAIG,OAAOjF,EAAG,GACP8E,MAGXzF,UAAU,2CARZ,sBARF,YACYW,UAyBlB6C,EAaA,cAACgD,EAAA,EAAD,CACED,QAAS,kBAAM/C,EAAON,EAAKmB,QAAO,SAAC3D,GAAD,OAAO8D,EAASU,SAASxE,EAAEpC,YAC7D0B,UAAS,+CACa,IAApBwE,EAASvC,OACL,kEACA,2CAHG,KAFX,oBAZA,cAACuE,EAAA,EAAD,CACED,QAASzB,GACT2B,SAA8B,IAApBjC,EAASvC,OACnBjC,UAAS,+CACa,IAApBwE,EAASvC,OACL,kEACA,yCAHG,KAHX,uBAwBJ,qBAAKjC,UAAWO,IAAW,wDAA3B,SACE,eAAC,IAAD,CAAWP,UAAW,kCAAtB,UACE,wBAAOA,UAAU,qBAAjB,UACE,gCACE,qBAAIA,UAAU,oBAAd,UACE,oBAAIA,UAAS,4BAAuBK,EAAvB,8BAAb,SACGqD,EAAe,KACd,cAACgD,EAAA,EAAD,CACEzG,KAAK,QACL0G,QAAS,CAAEpB,QAAS,mBAAoBqB,KAAM,OAC9CrB,QAASf,EAASvC,SAAWiB,EAAKjB,OAClC4E,SAAU,SAACC,GAAD,OA9GXC,EA8G4BD,EAAEE,OAAOzB,QA9GjBd,EAAYsC,EAAS7D,EAAKzC,KAAI,SAACC,GAAD,OAAOA,EAAEpC,SAAS,IAArE,IAACyI,OAkHJ3C,EAAO3D,KAAI,SAAC6D,EAAO3D,GAAR,OACV,oBACEX,UAAS,wCAAmCK,EAAnC,oBADX,SAIE,sBAAKL,UAAU,mCAAf,UACE,qBAAKA,UAAU,QACf,qBAAKA,UAAU,6BAA6BuG,QAASlB,GAAQf,GAA7D,SACGA,EAAMO,KAET,qBAAK7E,UAAU,MAAf,UACU,OAAPsB,QAAO,IAAPA,OAAA,EAAAA,EAASQ,WAAYwC,EAAMO,GAC1B,cAAC,IAAD,CACE7D,SAAS,QACThB,UAAS,UACgB,SAAhB,OAAPsB,QAAO,IAAPA,OAAA,EAAAA,EAASU,WAAsB,uBAAyB,MAG1D,WAjBV,aAEarB,YAsBnB,kCACGuC,EAAKzC,KAAI,SAAC0E,EAAKxE,GAAN,OACR8C,EAAUyB,SAASC,EAAI7G,OAAS,KAC9B,qBACEiI,QAAS,kBACP/C,EAAS8B,GAAcH,EAAI7G,OAAQkG,EAASU,SAASC,EAAI7G,QAAUwF,GAAOqB,IAG5EnF,UAAS,8BAAyBK,EAAzB,kCAAyDA,EAAzD,sBALX,UAOE,oBAAIL,UAAU,OAAOuG,QAAS,SAACO,GAAD,OAAOA,EAAEG,mBAAvC,SACE,cAACP,EAAA,EAAD,CACEzG,KAAK,QACL0G,QAAS,CAAEpB,QAAS,mBAAoBqB,KAAM,OAC9CrB,QAASf,EAASU,SAASC,EAAI7G,OAC/BuI,SAAU,SAACC,GAAD,OAAOxB,GAAcH,EAAI7G,MAAOwI,EAAEE,OAAOzB,cAGtDnB,EAAO3D,KAAI,SAAC6D,EAAO4C,GAAR,OACV,oBAA8BlH,UAAU,OAAxC,SACoB,MAAjBmF,EAAIb,EAAMO,IACM,UAAfP,EAAMwB,KACJxB,EAAM6C,YACJ,cAACC,EAAA,EAAD,CAAWC,KAAMlC,EAAIb,EAAMO,MAE3B,cAACuC,EAAA,EAAD,CAAWE,MAAOnC,EAAIb,EAAMO,MAG9B,qBAAK7E,UAAU,oBAAf,SACG6F,GAAYvB,EAAOa,EAAIb,EAAMO,OAGhC,MAbN,cAAgBlE,EAAhB,gBAAyBuG,SAhB7B,cAIcvG,OA+BlB,6BACE,oBAAI4G,QAASnD,EAAOnC,OAAS,EAA7B,SACE,cAAC,IAAD,CACE4E,SAAQ,uCAAE,WAAOtF,GAAP,SAAA6B,EAAA,sDACRwB,EAAerD,GADP,2CAAF,sDADV,SAKE,qBAAKvB,UAAU,uBAOzB,kC,0KChHKwH,IAnJuC,SAAC,GAAyC,IAAvCjE,EAAsC,EAAtCA,eAAgB6C,EAAsB,EAAtBA,QAcvE,GAd6F,EAAb/F,OAcxDR,IAAMqE,UAAS,IAAvC,mBAAOuD,EAAP,KAAaC,EAAb,KAEA,EAAkFC,YAAU,CAC1FC,SAAS,WAAD,4BAAE,WAAOC,EAAP,kBAAAzE,EAAA,sDAAe0E,EAAf,EAAeA,UACvB1B,EAAQyB,GACRH,GAAQ,GACRI,IAHQ,2CAAF,qDAAC,GAKTC,cAAe,CACbnH,MAAO,GACPmB,SAAU,GACVD,QAAS,IAEXkG,SAAU,SAACH,GACT,IAAII,EAAc,GAMlB,OALAC,OAAOC,KAAKN,GAAMlG,SAAQ,SAACjB,GACpBmH,EAAKnH,KACRuH,EAAOvH,GAAK,eAGTuH,KAlBHG,EAAR,EAAQA,OAAQH,EAAhB,EAAgBA,OAAQI,EAAxB,EAAwBA,aAAcC,EAAtC,EAAsCA,YAAaC,EAAnD,EAAmDA,aAAcC,EAAjE,EAAiEA,aAsBjE,OACE,qCACE,cAAC,IAAD,CACEjC,QAAS,kBAAMmB,GAAQ,IACvB1H,UAAU,kIAFZ,qBAMEyH,EACA,cAAC,IAAD,CAAOA,KAAMA,EAAb,SACE,qBACEzH,UAAU,4CACVyI,YAAa,kBAAMf,GAAQ,IAF7B,SAIE,sBACEe,YAAa,SAAC3B,GAAD,OAAOA,EAAEG,mBACtBjH,UAAU,4DACV0I,MAAO,CAAEC,SAAU,KAHrB,UAKE,cAAC,IAAD,CACE3I,UAAU,wCACVuG,QAAS,kBAAMmB,GAAQ,MAEzB,sBAAK1H,UAAU,4BAAf,UACE,sBAAKA,UAAU,4BAAf,UACE,cAAC,IAAD,CACEK,OAAO,SACPL,UAAU,OACVI,MAAOkI,EAAc,EAAIL,EAAOnG,QAAU,KAH5C,mBAOA,cAAC,IAAD,CACE9B,UAAU,SACVK,OAAO,SACPuI,KAAK,UACL/B,SAAUwB,EACVzH,MAAOwH,EAAOtG,QACd3B,QAAO,CACL,CAAES,MAAO,GAAIC,MAAO,WADf,mBAEF0C,EAAea,OAAO3D,KAAI,SAACC,GAAD,MAAQ,CAAEE,MAAOF,EAAEmE,GAAIhE,MAAOH,EAAEmE,cAInE,sBAAK7E,UAAU,4BAAf,UACE,cAAC,IAAD,CACEK,OAAO,SACPL,UAAU,OACVI,MAAOkI,EAAc,EAAIL,EAAOlG,SAAW,KAH7C,sBAOA,cAAC,IAAD,CACE/B,UAAU,SACVK,OAAO,SACPuI,KAAK,WACL/B,SAAUwB,EACVzH,MAAOwH,EAAOrG,SACd5B,QAAO,CACL,CAAES,MAAO,GAAIC,MAAO,WADf,mBA/FP,CAChB,IACA,KACA,KACA,IACA,KACA,KACA,iBACA,qBACA,KACA,UAuF+BJ,KAAI,SAACC,GAAD,MAAQ,CAAEE,MAAOF,EAAGG,MAAOH,aAIlD,sBAAKV,UAAU,4BAAf,UACE,cAAC,IAAD,CACEK,OAAO,SACPL,UAAU,kBACVI,MAAOkI,EAAc,EAAIL,EAAOrH,MAAQ,KAH1C,mBAOA,cAAC,IAAD,CACEiI,UAAW,SAAC/B,GACI,UAAVA,EAAEgC,MACJhC,EAAEiC,iBACFR,MAGJlI,OAAO,SACP2I,YACE,CAAC,KAAM,SAAU,sBAAsB9D,SAASkD,EAAOrG,UACnD,sBACA,QAEN/B,UAAU,2BACVY,MAAOwH,EAAOxH,MACdiG,SAAUwB,EACVO,KAAK,gBAIX,qBAAK5I,UAAU,mBAAf,SACE,cAAC,IAAD,CACEyG,SAAU+B,EACVjC,QAAS,kBAAMgC,KACfvI,UAAS,mEAHX,0BArFD,U,oECzDAiJ,EAJMnJ,sBAAW,SAAqBrB,EAAYsB,GAC/D,OAAO,+CAAStB,GAAT,IAAgBsB,IAAKA,Q,SC+BfmJ,EA3B+B,SAAC,GAAa,IAAXC,EAAU,EAAVA,IAC/C,OACE,cAACC,EAAA,EAAD,CACEC,OAAK,EACLvI,MACE,qBAAKd,UAAU,MAAf,SACE,qBAAKmJ,IAAKA,EAAKnJ,UAAU,wCAAwCsJ,IAAI,OAGzEvI,UAAU,MACV4F,QAAS,CACP4C,QAAS,+CACTF,MAAO,iBAVX,SAaE,cAAC,EAAD,UACE,qBAAKrJ,UAAU,yHAAf,SACE,qBACEA,UAAU,uEACV0I,MAAO,CAAEc,gBAAgB,OAAD,OAASL,EAAT,eCGrBM,IArBqB,SAAC,GAAqB,IAAnBnC,EAAkB,EAAlBA,MAAOD,EAAW,EAAXA,KACtCxC,EAAKhF,IAAM6J,OAAeC,KAAKC,UAErC,OACE,sBAAK5J,UAAU,sBAAf,WACIsH,IAAgBD,EAAO,CAACA,GAAQ,KAAIwC,MAAM,EAAG,GAAGpJ,KAAI,SAACmB,EAAGjB,GAAJ,OACpD,qBAA6BX,UAAU,SAAvC,SACE,cAAC,EAAD,CAAYmJ,IAAKvH,KADnB,UAAaiD,EAAb,iBAAwBlE,OAIzB2G,GAASA,EAAMrF,OAAS,EACvB,qBAAKjC,UAAU,WAAf,SACE,sBAAKA,UAAU,8EAAf,UACGsH,EAAMrF,OAAS,EADlB,SAIA,U,+FCVK6H,IAT6B,SAAC,GAA4B,IAA1B9J,EAAyB,EAAzBA,UAAc+J,EAAW,iBACtE,OACE,+CACMA,GADN,IAEE/J,UAAWO,IAAW,gDAAiDP,Q,wECTzEgK,E,eCWWC,EATyB,SAACxL,GACvC,OACE,+CACMA,GADN,IAEEuB,UAAU,2GCADkK,EAJU,WACvB,OAAO,cAAC,EAAD,kBCGMC,EAJU,WACvB,OAAO,cAAC,EAAD,mBCGMC,EAJO,WACpB,OAAO,cAAC,EAAD,UAAU,SCGJC,EAJS,WACtB,OAAO,cAAC,EAAD,mB,kBCQMC,EARW,WACxB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAsBtJ,SAAS,UAAUhB,UAAU,e,kBCK1CsK,EARW,WACxB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAA2BtJ,SAAS,UAAUhB,UAAU,e,kBCK/CuK,EARS,WACtB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAsBvJ,SAAS,UAAUhB,UAAU,iB,kBCK1CuK,EARS,WACtB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAWvJ,SAAS,UAAUhB,UAAU,iBCI/BsK,EARW,WACxB,OACE,cAAC,EAAD,UACE,sBAAMtK,UAAU,YAAhB,qB,kBCMSwK,EARQ,WACrB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAaxJ,SAAS,UAAUhB,UAAU,e,kBCKjCyK,EARY,WACzB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAezJ,SAAS,UAAUhB,UAAU,iB,kBCKnC0K,EARY,WACzB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAM1J,SAAS,UAAUhB,UAAU,e,gBbJrC2K,EAAY,CAAC,QAAS,WAE1B,SAASC,IAA2Q,OAA9PA,EAAW1C,OAAO2C,QAAU,SAAU7D,GAAU,IAAK,IAAIrG,EAAI,EAAGA,EAAImK,UAAU7I,OAAQtB,IAAK,CAAE,IAAIoK,EAASD,UAAUnK,GAAI,IAAK,IAAImI,KAAOiC,EAAc7C,OAAO8C,UAAUC,eAAeC,KAAKH,EAAQjC,KAAQ9B,EAAO8B,GAAOiC,EAAOjC,IAAY,OAAO9B,GAAkB4D,EAASO,MAAMC,KAAMN,WAEhT,SAASO,EAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEjC,EAAKnI,EAAnEqG,EAEzF,SAAuC+D,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DjC,EAAKnI,EAA5DqG,EAAS,GAAQuE,EAAarD,OAAOC,KAAK4C,GAAqB,IAAKpK,EAAI,EAAGA,EAAI4K,EAAWtJ,OAAQtB,IAAOmI,EAAMyC,EAAW5K,GAAQ2K,EAASE,QAAQ1C,IAAQ,IAAa9B,EAAO8B,GAAOiC,EAAOjC,IAAQ,OAAO9B,EAFxMyE,CAA8BV,EAAQO,GAAuB,GAAIpD,OAAOwD,sBAAuB,CAAE,IAAIC,EAAmBzD,OAAOwD,sBAAsBX,GAAS,IAAKpK,EAAI,EAAGA,EAAIgL,EAAiB1J,OAAQtB,IAAOmI,EAAM6C,EAAiBhL,GAAQ2K,EAASE,QAAQ1C,IAAQ,GAAkBZ,OAAO8C,UAAUY,qBAAqBV,KAAKH,EAAQjC,KAAgB9B,EAAO8B,GAAOiC,EAAOjC,IAAU,OAAO9B,EAMne,SAAS6E,EAAiBC,EAAMC,GAC9B,IAAIjL,EAAQgL,EAAKhL,MACbkL,EAAUF,EAAKE,QACfvN,EAAQ4M,EAAyBS,EAAMnB,GAE3C,OAAoB,gBAAoB,MAAOC,EAAS,CACtDqB,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,KAAM,eACNC,MAAO,6BACPtM,IAAKgM,EACL,kBAAmBC,GAClBvN,GAAQqC,EAAqB,gBAAoB,QAAS,CAC3D+D,GAAImH,GACHlL,GAAS,KAAMkJ,IAAUA,EAAqB,gBAAoB,OAAQ,CAC3EsC,EAAG,mQACHF,KAAM,mBAIV,IAAIG,EAA0B,aAAiBV,GctBhCtB,GduBA,Ic/BS,WACtB,OACE,cAAC,EAAD,UACE,cAAC,EAAD,CAAYvK,UAAU,e,kBCKbqK,EARS,WACtB,OACE,cAAC,EAAD,UACE,cAAC,IAAD,CAAcrJ,SAAS,UAAUhB,UAAU,iB,6DCgBlCwM,EAb2B,SAAC,GAAyC,IAAD,IAAtCxM,iBAAsC,MAA1B,GAA0B,EAAtBK,EAAsB,EAAtBA,OAAW0J,EAAW,iBACjF,OACE,oDACMA,GADN,IAEE/J,UAAWO,IACT,6DACAP,EAFmB,eAGXK,EAHW,2BAGcA,EAHd,gCAG4CA,EAH5C,+BAGyEA,EAHzE,mCAG0GA,EAH1G,kCAG0IA,EAH1I,yBC2BZ6J,EA1B4C,SAAC,GAMrD,IALL5F,EAKI,EALJA,MACAjE,EAII,EAJJA,OACAO,EAGI,EAHJA,MACAwF,EAEI,EAFJA,QACAwC,EACI,EADJA,KAEA,OAAOtE,EAAMmI,WACX,cAAC,EAAD,CACEpM,OAAQA,EACRO,MAAOA,EACPiG,SAAU,SAACC,GAAD,OAAOV,EAAQU,EAAEE,OAAOpG,QAClCgI,KAAMA,IAGR,cAAC8D,EAAA,EAAD,CACErM,OAAQA,EACRL,UAAU,SACV8F,KAAK,OACLlF,MAAOA,EACPgI,KAAMA,EACN/B,SAAU,SAACC,GAAD,OAAOV,EAAQU,EAAEE,OAAOpG,W,2DC3BxC+L,EAAQ,KAER,IAAMC,EAAWD,EAAQ,KACzBE,OAAOD,SAAWA,EAOlB,IClBI,GAAOE,GDwDIC,GAtC+B,SAAC,GAAyB,IAAvBnM,EAAsB,EAAtBA,MAAOiG,EAAe,EAAfA,SACtD,EAAwChH,IAAMqE,SAAS,IAAvD,mBAAO8I,EAAP,KAAqBC,EAArB,KACA,EAA0BpN,IAAMqE,SAAS,GAAzC,mBAAOgJ,EAAP,KAAcC,EAAd,KAQA,OAPAtN,IAAMoD,WAAU,WACViK,EAAQ,IACVC,GAAS,SAAC3H,GAAD,OAAUA,EAAO,KAC1ByH,EAAgBG,KAAKC,UAAUzM,OAAOiC,EAAW,OAGlD,CAACjC,IAEF,qCACE,8FAGA,cAAC,eAAD,CACEZ,UAAU,gCACVY,MAAOoM,EACP7M,QAAS,CACPmN,KAAM,mBACNC,MAAO,WACPC,aAAa,EACbC,mBAAmB,EACnBC,MAAM,EACNC,QAAS,CAAC,4BAEZ9G,SAAU,SAAC+G,EAAQ9K,EAAMlC,GACvB,IACEiG,EAASuG,KAAKS,MAAMjN,IACpB,MAAOkN,GACPjH,EAASjG,WExCNmN,GAJyC,SAAC,GAAwB,IAAtBnN,EAAqB,EAArBA,MAAOwF,EAAc,EAAdA,QAChE,OAAO,cAAC,GAAD,CAAYxF,MAAOA,EAAOiG,SAAU,SAACrH,GAAD,OAAS4G,EAAQ5G,OCY/C2K,GAb4C,SAAC,GAAsC,IAApCvJ,EAAmC,EAAnCA,MAAOwF,EAA4B,EAA5BA,QAAS/F,EAAmB,EAAnBA,OAAQuI,EAAW,EAAXA,KACpF,OACE,cAAC8D,EAAA,EAAD,CACErM,OAAQA,EACRL,UAAU,SACV8F,KAAK,SACL8C,KAAMA,EACN/B,SAAU,SAACC,GAAD,OAAOV,EAAQU,EAAEE,OAAOpG,QAClCA,MAAOA,KCeEoN,GAnB6B,SAAC,GAAiC,IAA/BpN,EAA8B,EAA9BA,MAAOiG,EAAuB,EAAvBA,SAAUxG,EAAa,EAAbA,OAC9D,OACE,qBACEkG,QAAS,kBAAMM,GAAUjG,IACzBZ,UAAS,4FACPY,EAAQ,qBAAH,eAAkCP,EAAlC,eAHT,SAME,qBAAKL,UAAU,MAAf,SACE,qBACEA,UAAS,sEACPY,EAAQ,gBAAkB,uBCXvB0J,GAJ6C,SAAC,GAAgC,IAA9B1J,EAA6B,EAA7BA,MAAOwF,EAAsB,EAAtBA,QAAS/F,EAAa,EAAbA,OAC7E,OAAO,cAAC4N,GAAD,CAAQ5N,OAAQA,EAAQO,MAAOA,EAAOiG,SAAU,SAACrH,GAAD,OAAS4G,EAAQ5G,OCY3D0O,GAb0C,SAAC,GAAsC,IAApCtN,EAAmC,EAAnCA,MAAOwF,EAA4B,EAA5BA,QAAS/F,EAAmB,EAAnBA,OAAQuI,EAAW,EAAXA,KAClF,OACE,cAAC8D,EAAA,EAAD,CACErM,OAAQA,EACRL,UAAU,SACV8F,KAAK,OACL8C,KAAMA,EACN/B,SAAU,SAACC,GAAD,OAAOV,EAAQU,EAAEE,OAAOpG,QAClCA,MAAOA,K,yPCOPuN,GAA0C,SAAC,GAAmC,IAAD,IAAhCC,gBAAgC,SAAd7O,EAAc,EAAdA,QAC7D8O,EAAYxO,IAAM6J,OAAO,MACzB4E,EAASzO,IAAM6J,OAAO,MAC5B,EAA8B7J,IAAMqE,UAA2B,GAA/D,mBAAgBqK,GAAhB,WACA,EAAwC1O,IAAMqE,UAAS,GAAvD,mBAAOsK,EAAP,KAAqBC,EAArB,KACA,EAAqC5O,IAAMqE,SAAS,GAApD,mBAAOwK,EAAP,KAAuBC,EAAvB,KAEQpL,EAAmBqL,cAAY,SAACC,GACtC,MAAO,CACLtL,eAAgBsL,EAAMC,gBAAgBC,MAAK,SAACrO,GAAD,MAAgB,4BAATA,EAAEmE,UAFhDtB,eAMR,OACE,qBAAKvD,UAAU,iFAAf,SACE,sBAAKA,UAAU,wIAAf,UACIwO,EAOE,KANF,cAACQ,GAAA,EAAD,CACEhP,UAAU,4KACVuG,QAAS,kBAAM+H,EAAOW,QAAQC,eAAe,CAAEC,SAAU,YAF3D,SAIE,cAAC,KAAD,MAGJ,cAAC,KAAD,CACEnP,UAAU,wCACVuG,QAAS,kBAAMhH,GAAQ,MAEzB,cAAC,KAAD,CAAQsH,SAAU,SAACtF,GAAD,OAAYkN,EAAgBlN,IAA9C,SACE,qBAAKxB,IAAKuO,MAEZ,sBAAKtO,UAAU,sCAAf,UACE,qBAAKA,UAAU,8CAAf,yBACA,uBACE8F,KAAK,OACLsI,UAAQ,EACRpO,UAAU,SACVD,IAAKsO,EACLxH,SAAQ,yCAAE,WAAOC,GAAP,wBAAA1D,EAAA,2DACFkE,EAAQR,EAAEE,OAAOM,SACVA,EAAMrF,OAFX,iBAGNsM,EAAW,aAAD,OAAcjH,EAAMrF,OAApB,gBAAkCqF,EAAMrF,OAAS,EAAI,IAAM,GAA3D,QACNmN,EAAW,EAJT,eAKW9H,GALX,gEAKGD,EALH,kBAMcgI,aAAWhI,GANzB,eAOJ+H,IAEAb,EAAW,GAAD,OAAIa,EAAJ,YAAgB9H,EAAMrF,OAAtB,eATN,+IAWN0M,GAAW,SAACnJ,GAAD,OAAUA,EAAO,KAC5B+I,GAAW,GAZL,gEAAF,wDAgBV,cAAC/H,GAAA,EAAD,CACED,QAAS,kBAAM8H,EAAUY,QAAQK,SACjCtP,UAAU,mEAFZ,SAIE,sBAAKA,UAAU,oBAAf,UACE,cAAC,KAAD,CAAYA,UAAU,eAAegB,SAAS,YAC9C,kDAIN,qBAAKhB,UAAU,gBAAf,SACIuD,EACA,cAACgM,GAAA,EAAD,CACElP,OAAO,SAEPmD,OAAQ,SAAC8D,GACP/H,EAAQ6O,EAAW9G,EAAM7G,KAAI,SAACmB,GAAD,OAAOA,EAAE4N,OAAOlI,EAAM,GAAGkI,MAExD9L,cAAe0K,EACf7K,eAAgBA,EAChBI,gBAAiB8L,4BARnB,sBAEsBf,IAHL,aAkBdP,M,yECCAuB,GAhFmD,SAAC,GAI5D,IAHLC,EAGI,EAHJA,cACAC,EAEI,EAFJA,iBACAC,EACI,EADJA,QAaA,OACE,qBACE7P,UAAU,sFACVyI,YAAaoH,EAFf,SAIE,sBACEpH,YAAa,SAAC3B,GAAD,OAAOA,EAAEG,mBACtBjH,UAAU,qGAFZ,UAIE,cAAC,KAAD,CACEA,UAAU,wCACVuG,QAASsJ,IAEX,sBAAK7P,UAAU,8DAAf,UACE,qBAAKA,UAAU,iCAAf,2BACA,cAACwG,GAAA,EAAD,CAAQxG,UAAU,2CAA2CuG,QAASsJ,EAAtE,uBAIF,cAACC,GAAA,EAAD,CACEC,UA/BU,SAACC,GAEjB,GAAKA,EAAOC,YAAZ,CAIA,IAAMC,EAnBM,SAACC,EAAaC,EAAoBC,GAChD,IAAML,EAAS3F,MAAMiG,KAAKH,GAC1B,EAAkBH,EAAOpK,OAAOwK,EAAY,GAArCG,EAAP,oBAGA,OAFAP,EAAOpK,OAAOyK,EAAU,EAAGE,GAEpBP,EAcSQ,CAAQb,EAAeK,EAAOjF,OAAOrF,MAAOsK,EAAOC,YAAYvK,OAE7EkK,EAAiBM,KAwBXO,mBAAmB,oCACnBP,MAAOP,EAAclP,KAAI,SAACC,GAAD,MAAQ,CAAEgQ,KAAMhQ,MACzCiQ,KAAM,YAAuD,IAApDD,EAAmD,EAAnDA,KAAMhL,EAA6C,EAA7CA,MACb,OACE,qBAAK1F,UAAU,OAAf,SACE,sBAAKA,UAAU,4DAAf,UACE,sBAAKA,UAAU,oBAAf,UACE,cAAC,KAAD,CAAsBA,UAAU,SAChC,qBAAKA,UAAU,sBAAf,SACE,qBACEA,UAAU,4CACV0I,MAAO,CAAEc,gBAAgB,OAAD,OAASkH,EAAT,aAI9B,sBAAK1Q,UAAU,OAAf,UACE,cAACgP,GAAA,EAAD,CACEzI,QAAS,kBAAMsG,OAAOpF,KAAKiJ,EAAM,WACjC1Q,UAAU,8EAFZ,SAIE,cAAC,KAAD,CAAWgB,SAAS,YAEtB,cAACgO,GAAA,EAAD,CAAYhP,UAAU,yEAAtB,SACE,cAAC,KAAD,CACEgB,SAAS,QACTuF,QAAS,WACP,IAAId,EAAG,aAAOkK,GACdlK,EAAIG,OAAOF,EAAO,GAClBkK,EAAiBnK,yB,UPtFvC,GAAY,CAAC,QAAS,WAE1B,SAAS,KAA2Q,OAA9P,GAAWyC,OAAO2C,QAAU,SAAU7D,GAAU,IAAK,IAAIrG,EAAI,EAAGA,EAAImK,UAAU7I,OAAQtB,IAAK,CAAE,IAAIoK,EAASD,UAAUnK,GAAI,IAAK,IAAImI,KAAOiC,EAAc7C,OAAO8C,UAAUC,eAAeC,KAAKH,EAAQjC,KAAQ9B,EAAO8B,GAAOiC,EAAOjC,IAAY,OAAO9B,GAAkB,GAASmE,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEjC,EAAKnI,EAAnEqG,EAEzF,SAAuC+D,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DjC,EAAKnI,EAA5DqG,EAAS,GAAQuE,EAAarD,OAAOC,KAAK4C,GAAqB,IAAKpK,EAAI,EAAGA,EAAI4K,EAAWtJ,OAAQtB,IAAOmI,EAAMyC,EAAW5K,GAAQ2K,EAASE,QAAQ1C,IAAQ,IAAa9B,EAAO8B,GAAOiC,EAAOjC,IAAQ,OAAO9B,EAFxM,CAA8B+D,EAAQO,GAAuB,GAAIpD,OAAOwD,sBAAuB,CAAE,IAAIC,EAAmBzD,OAAOwD,sBAAsBX,GAAS,IAAKpK,EAAI,EAAGA,EAAIgL,EAAiB1J,OAAQtB,IAAOmI,EAAM6C,EAAiBhL,GAAQ2K,EAASE,QAAQ1C,IAAQ,GAAkBZ,OAAO8C,UAAUY,qBAAqBV,KAAKH,EAAQjC,KAAgB9B,EAAO8B,GAAOiC,EAAOjC,IAAU,OAAO9B,EAMne,SAAS4J,GAAS9E,EAAMC,GACtB,IAAIjL,EAAQgL,EAAKhL,MACbkL,EAAUF,EAAKE,QACfvN,EAAQ,GAAyBqN,EAAM,IAE3C,OAAoB,gBAAoB,MAAO,GAAS,CACtDG,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,KAAM,OACNC,MAAO,6BACPtM,IAAKgM,EACL,kBAAmBC,GAClBvN,GAAQqC,EAAqB,gBAAoB,QAAS,CAC3D+D,GAAImH,GACHlL,GAAS,KAAM,KAAU,GAAqB,gBAAoB,OAAQ,CAC3EwL,EAAG,4vBACHF,KAAM,kBACHU,KAAWA,GAAsB,gBAAoB,OAAQ,CAChER,EAAG,6MACHF,KAAM,mBAIV,IQpCI,GRoCA,GAA0B,aAAiBwE,IS4EhCC,IT3EA,ISjB+B,SAAC,GAAiD,IAA/ClB,EAA8C,EAA9CA,cAAeC,EAA+B,EAA/BA,iBAAkBvP,EAAa,EAAbA,OAChF,EAAsCR,IAAMqE,SAAS,GAArD,mBAAO4M,EAAP,KAAoBC,EAApB,KACA,EAA4ClR,IAAMqE,UAAS,GAA3D,mBAAO8M,EAAP,KAAuBC,EAAvB,KAEMC,EAAW,yCAAG,+BAAA9N,EAAA,sEACA7E,aAAoD,CACpEC,UAAW2P,GACX1P,MAAO,CAAE2P,UAAU,KAHH,OAMC,mBALb+C,EADY,UAOVC,EADsB,aACNzB,GACtBC,EAAiB,GAAD,oBAAKuB,GAAL,aAAaC,MARb,2CAAH,qDAYjB,OACE,sBAAKpR,UAAS,uBAAkBK,EAAlB,kCAAd,UACIsP,EAAc1N,OAOZ,KANF,qBAAKjC,UAAU,kDAAkDuG,QAAS2K,EAA1E,SACE,sBAAKlR,UAAU,2BAAf,UACE,cAAC,GAAD,CAAWA,UAAU,kCAAkCgB,SAAS,YAChE,6DAIL2O,EAAclP,KAAI,SAACC,EAAGC,GAAJ,OACjB,qCACE,qBACEX,UAAS,gFACPW,IAAMmQ,EAAc,SAAW,IAEjCpI,MAAO,CAAEc,gBAAgB,OAAD,OAAS9I,EAAT,QAE1B,qBAAKyI,IAAKzI,EAAG4I,IAAI,GAAGtJ,UAAU,iBAGjC2P,EAAc1N,OACb,qBAAKjC,UAAU,sCAAf,SACE,sBAAKA,UAAU,oDAAf,UACE,qBAAKA,UAAU,4BAAf,SACE,sBAAKA,UAAU,6DAAf,UACG8Q,EAAc,EADjB,IACqBnB,EAAc1N,YAGrC,sBAAKjC,UAAU,kCAAf,UACE,cAACgP,GAAA,EAAD,CACEzI,QAAS2K,EACTlR,UAAU,mFAFZ,SAIE,cAAC,KAAD,CAAYgB,SAAS,YAEvB,cAACgO,GAAA,EAAD,CACEzI,QAAS,WACP0K,GAAkB,IAEpBjR,UAAU,8EAJZ,SAME,cAAC,KAAD,CAAagB,SAAS,YAExB,cAACqQ,GAAA,EAAD,CAAO5J,KAAMuJ,EAAb,SACE,cAAC,GAAD,CACEnB,QAAS,kBAAMoB,GAAkB,IACjCtB,cAAeA,EACfC,iBAAkB,SAACtI,GACjByJ,EAAe,GACfnB,EAAiBtI,WAKzB,cAAC0H,GAAA,EAAD,CACEhP,UAAU,4DACVuG,QAAS,kBAAMwK,GAAe,SAACvL,GAAD,OAAWA,EAAO,EAAIA,EAAO,EAAIA,MAFjE,SAIE,cAAC,KAAD,MAEF,cAACwJ,GAAA,EAAD,CACEhP,UAAU,4DACVuG,QAAS,kBACPwK,GAAe,SAACvL,GAAD,OAAWA,EAAOmK,EAAc1N,OAAS,EAAIuD,EAAO,EAAIA,MAH3E,SAME,cAAC,KAAD,WAIJ,UC/CK8L,GA9C2C,SAAC,GAIpD,IAHLC,EAGI,EAHJA,aACAC,EAEI,EAFJA,gBACAnR,EACI,EADJA,OAEA,OACE,sBAAKL,UAAS,uBAAkBK,EAAlB,kCAAd,UACIkR,EAmBE,KAlBF,qBACEvR,UAAU,kDACVuG,QAAO,wBAAE,6BAAAnD,EAAA,sEACW7E,aAAkD,CAClEC,UAAW2P,GACX1P,MAAO,CAAE2P,UAAU,KAHd,OAMY,mBALb+C,EADC,SAOLK,EAAgBL,GAPX,2CAFX,SAaE,sBAAKnR,UAAU,2BAAf,UACE,cAAC,GAAD,CAAWA,UAAU,kCAAkCgB,SAAS,YAChE,qDAKN,qBACEhB,UAAU,wEACV0I,MAAO,CAAEc,gBAAgB,OAAD,OAAS+H,EAAT,QAEzBA,EACC,qBAAKvR,UAAU,kCAAf,SACE,cAACgP,GAAA,EAAD,CACEzI,QAAS,kBAAMiL,EAAgB,KAC/BxR,UAAU,8EAFZ,SAIE,cAAC,KAAD,CAAegB,SAAS,cAG1B,SClCKuJ,GAhB0C,SAAC,GAAuC,IAArC3J,EAAoC,EAApCA,MAAOwF,EAA6B,EAA7BA,QAAS9B,EAAoB,EAApBA,MAAOjE,EAAa,EAAbA,OACjF,OAAOiE,EAAM6C,YACX,cAAC,GAAD,CACE9G,OAAQA,EACRkR,aAAc3Q,EACd4Q,gBAAiB,SAACnK,GAAD,OAAkBjB,EAAQiB,MAG7C,cAACoK,GAAD,CACEpR,OAAQA,EACRsP,cAAe/O,EACfgP,iBAAkB,SAACtI,GAAD,OAAqBlB,EAAQkB,O,wCCiEtCoK,GAlE2B,SAAC,GAA6C,IAAD,IAA1ChJ,aAA0C,MAAlC,GAAkC,EAA9B7B,EAA8B,EAA9BA,SAAUjG,EAAoB,EAApBA,MAAOP,EAAa,EAAbA,OAClEsR,EAAW,IAAIC,KASrB,OAPA3O,qBAAU,WACR,IADc,EACV4O,EAAM/S,SAASgT,uBAAuB,gBAD5B,eAECD,GAFD,IAEd,2BAAoB,SACfE,UAAUC,IAAb,eAAyB3R,EAAzB,6BAAqDA,EAArD,eAHY,iCAKb,CAACA,IAGF,gCACE,+xBA6BA,cAAC,KAAD,CACE2I,YAAY,eACZiJ,oBAAqB,SAACnL,GACpB,OAAO,IAAIpI,QAAJ,yCAAY,WAAOC,EAASC,GAAhB,gBAAAwE,EAAA,sEACC7E,aAAkD,CAClEC,UAAW2P,GACX1P,MAAO,CAAE2P,UAAU,KAHJ,OAME,kBALb+C,EADW,QAOfxS,EAAQ,CAAE6Q,IAAK2B,EAAKe,KAAM,UAE1BtT,IATe,2CAAZ,0DAaTgC,MAAOA,EACPiG,SAAU,gBAAGqL,EAAH,EAAGA,KAAH,OAAcrL,EAASqL,IACjCxJ,MAAOA,EACPyJ,WAAY,SAACD,GAAD,OAAUP,EAASxS,OAAO+S,UC5D/BR,GAX8C,SAAC,GAAgC,IAA9B9Q,EAA6B,EAA7BA,MAAOwF,EAAsB,EAAtBA,QAAS/F,EAAa,EAAbA,OAC9E,OACE,cAAC+R,GAAD,CACE/R,OAAQA,EACRqI,MAAO,CAAEwD,OAAQ,OAAQmG,UAAW,KACpCzR,MAAOA,EACPiG,SAAU,SAACrH,GAAD,OAAS4G,EAAQ5G,O,UCelBgL,GArBwC,SAAC,GAMjD,IALL5J,EAKI,EALJA,MACAwF,EAII,EAJJA,QACA/F,EAGI,EAHJA,OACAuI,EAEI,EAFJA,KACAtE,EACI,EADJA,MAEA,OACE,cAACpE,GAAA,EAAD,CACEG,OAAQA,EACRF,QAAO,CACL,CAAEU,MAAO,SAAUD,MAAO,KADrB,oBAEF0D,EAAMgO,YAAY7R,KAAI,SAAC8R,GAAD,MAAU,CAAE1R,MAAO0R,EAAK3R,MAAO2R,QAE1D3J,KAAMA,EACN/B,SAAU,SAACC,GAAD,OAAOV,EAAQU,EAAEE,OAAOpG,QAClCA,MAAOA,KCHE6J,GAb8C,SAAC,GAAsC,IAApC7J,EAAmC,EAAnCA,MAAOwF,EAA4B,EAA5BA,QAAS/F,EAAmB,EAAnBA,OAAQuI,EAAW,EAAXA,KACtF,OACE,cAAC8D,EAAA,EAAD,CACErM,OAAQA,EACRL,UAAU,SACV8F,KAAK,WACLlF,MAAOA,EACPgI,KAAMA,EACN/B,SAAU,SAACC,GAAD,OAAOV,EAAQU,EAAEE,OAAOpG,W,gFCqBzB4R,GAvB+C,SAAC/T,GAC7D,MAAoCyF,mBAAS,IAA7C,mBAAOuO,EAAP,KAAmBC,EAAnB,KAmBA,OAjBAzP,qBAAU,WACR0P,QAAQC,IAAI,UACZ,IAAQhS,EAAsCnC,EAAtCmC,MAAOiS,EAA+BpU,EAA/BoU,WAAYtP,EAAmB9E,EAAnB8E,eACvBA,GACF,wBAAC,6BAAAH,EAAA,+EAEmB0P,aAAYvP,EAAesB,GAAIjE,GAFlD,QAEOuQ,EAFP,QAGY/Q,OACPsS,EAAcvB,EAAI0B,IAJvB,gDAOGF,QAAQC,IAAR,MAPH,wDAAD,KAWD,CAACnU,EAAOgU,IAEJ,mCAAGA,K,SC4IGM,GAhJqC,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,UAAWpS,EAA6B,EAA7BA,MAAOwF,EAAsB,EAAtBA,QAAS/F,EAAa,EAAbA,OAC1EkD,EAAiBqL,cAAY,SAACC,GAAD,OACjCA,EAAMC,gBAAgBC,MAAK,SAACrO,GAAD,OAAOA,EAAEpC,QAAU0U,EAAUC,iCAG1D,EAAwBpT,IAAMqE,UAAS,GAAvC,mBAAOuD,EAAP,KAAaC,EAAb,KAEA,OACE,sBAAK1H,UAAS,sBAAiBsG,aAAajG,GAA9B,uBAAd,UACE,sBAAKL,UAAU,iCAAf,UACE,sBAAKA,UAAU,0CAAf,UACE,cAAC,KAAD,CAAMA,UAAU,OAAOgB,SAAS,UAChC,qBAAKhB,UAAU,kBAAf,gBAAkCuD,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAgBqF,OACjDoK,EAAUE,iBACT,qBAAKlT,UAAU,WAAf,SACE,cAAC,KAAD,MAGF,qBAAKA,UAAU,WAAf,SACE,cAAC,KAAD,SAIN,cAACmT,GAAA,EAAD,CACE5M,QAAS,kBAAMmB,GAAQ,IACvB1H,UAAU,gDAFZ,SAIE,cAAC,KAAD,CAAYgB,SAAS,eAIzB,cAACqQ,GAAA,EAAD,CAAO5J,KAAMA,EAAb,SACE,qBACEzH,UAAU,iFACVyI,YAAa,kBAAMf,GAAQ,IAF7B,SAIE,sBACE1H,UAAU,oFACVyI,YAAa,SAAC3B,GAAD,OAAOA,EAAEG,mBAFxB,UAIE,qBAAKjH,UAAU,wCAAwCuG,QAAS,kBAAMmB,GAAQ,IAA9E,SACE,cAAC,KAAD,MAEF,qBAAK1H,UAAU,qDAAf,gBACGuD,QADH,IACGA,OADH,EACGA,EAAgBqF,OAEnB,qBAAK5I,UAAU,gBAAf,SACGuD,EACC,cAACgM,GAAA,EAAD,CACElP,OAAQA,EACRkD,eAAgBA,EAChBE,UAA4B,kBAAV7C,EAAqB,CAACA,GAASA,EACjD8C,aAA+B,kBAAV9C,EACrB4C,OAAQ,SAACN,GACHA,EAAKjB,SAELmE,EADmB,kBAAVxF,EACDsC,EAAK,GAAG5E,MAER,GAAD,oBAAKsC,GAAL,aAAesC,EAAKzC,KAAI,SAACC,GAAD,OAAOA,EAAEpC,YAG1CoJ,GAAQ,OAIZ,cAKZ,qBAAK1H,UAAU,iDAAf,SACoB,kBAAVY,EACN,sBAAKZ,UAAU,yDAAf,UACE,+BACE,cAAC,GAAD,CACEY,MAAOA,EACP2C,eAAgBA,EAChBsP,WAAYG,EAAUH,eAGxBjS,EACA,qBACEZ,UAAU,uGACV,yCAAiCgT,EAAUnO,GAA3C,YAAiDjE,GACjD2F,QAAO,wBAAE,uBAAAnD,EAAA,sEACS2B,aAAQ,CACtBC,aAAc,qBAFT,eAKLoB,EAAQ,IALH,2CAHX,SAYE,cAAC,KAAD,CACEO,QAAS,CAAEC,KAAM,uBACjB5F,SAAS,cAfL,QAqBZ,cAAC,KAAD,CAAWhB,UAAU,sCAAsCoT,UAAU,EAArE,SACGxS,EAAMH,KAAI,SAACC,EAAGC,GAAJ,OACT,sBACEX,UAAU,2DADZ,UAIE,8BACE,cAAC,GAAD,CACEY,MAAOF,EACP6C,eAAgBA,EAChBsP,WAAYG,EAAUH,eAG1B,qBAAK7S,UAAU,0CAAf,SACE,qBACEA,UAAU,uGACV,yCAAiCgT,EAAUnO,GAA3C,YAAiDnE,GACjD6F,QAAO,wBAAE,6BAAAnD,EAAA,sEACS2B,aAAQ,CACtBC,aAAc,qBAFT,iBAKDS,EADG,aACO7E,IACVgF,OAAOjF,EAAG,GACdyF,EAAQX,IAPH,2CAHX,SAcE,cAAC,KAAD,CACEkB,QAAS,CAAEC,KAAM,uBACjB5F,SAAS,kBA5BjB,mBAEmBgS,EAAUnO,GAF7B,kBAEyCnE,eC/GxCgK,GAhBoD,SAAC,GAK7D,IAJL9J,EAII,EAJJA,MACAwF,EAGI,EAHJA,QACA9B,EAEI,EAFJA,MACAjE,EACI,EADJA,OAEA,OACE,cAAC,GAAD,CACEA,OAAQA,EACR+F,QAAS,SAACiN,GAAD,OAAYjN,EAAQiN,IAC7BL,UAAW1O,EACX1D,MAAOA,K,wGCFP0S,GAA8D,SAAC,GAK9D,IAJLlP,EAII,EAJJA,OACA7E,EAGI,EAHJA,QACAgU,EAEI,EAFJA,iBACAC,EACI,EADJA,MAEA,OACE,qBACE9K,MAAO,CAAE+K,QAAS9J,KAAK+J,IAAY,GAARF,EAAY,KACvCxT,UAAU,6EACVyI,YAAa,kBAAMlJ,EAAQ,OAH7B,SAKE,sBACES,UAAU,mEACVyI,YAAa,SAAC3B,GAAD,OAAOA,EAAEG,mBAFxB,UAIE,cAAC,KAAD,CACEjH,UAAU,wCACVuG,QAAS,kBAAMhH,EAAQ,SAEzB,cAACoU,GAAA,EAAD,CACEH,MAAOA,EAAQ,EACfnT,OAAO,SACPkT,iBAAkBA,EAClBnP,OAAQA,EACRwD,SAAUrI,UASPqU,GAA2B,SAACnV,GACvC,OAAOF,aAA6C,CAClDC,UAAW8U,GACX7U,WCkMW6E,GAzNkC,SAAC,GAO3C,IANL1C,EAMI,EANJA,MACAwF,EAKI,EALJA,QACAzC,EAII,EAJJA,gBACAtD,EAGI,EAHJA,OACA+D,EAEI,EAFJA,OACAoP,EACI,EADJA,MAEA,EAA8B3T,IAAMqE,SAAuB,IAA3D,mBAAO7C,EAAP,KAAgB8C,EAAhB,KACA,EAAgCtE,IAAMqE,SAAmB,IAAzD,mBAAOM,EAAP,KAAiBC,EAAjB,KACA,EAA8B5E,IAAMqE,WAApC,mBAAO5C,EAAP,KAAgBoD,EAAhB,KACA,EAAsC7E,IAAMqE,UAAS,GAArD,mBAAoBU,GAApB,WAEMd,EAAM,yCAAG,WAAOqB,EAAe0O,GAAtB,kBAAAzQ,EAAA,sEACQwQ,GAAyB,CAC5CxP,SACAoP,MAAOA,EAAQ,EACfD,iBAAkBpO,IAJP,UACTrG,EADS,yDAOT2G,EAPS,aAOC7E,IACViT,GAAY/U,EAChBsH,EAAQX,GATK,2CAAH,wDAYNX,EAAgB,yCAAG,uBAAA1B,EAAA,sEACb2B,aAAQ,CAAEC,aAAa,UAAD,OAAYR,EAASvC,OAArB,iBADT,kCAErBmE,EAAQxF,EAAMyD,QAAO,SAAC3D,GAAD,OAAQ8D,EAASU,SAASxE,EAAEpC,WACjDmG,EAAY,IAHS,2CAAH,qDAOhBY,EAAU,SAACf,GAAD,OACP,OAAPhD,QAAO,IAAPA,OAAA,EAAAA,EAASQ,WAAYwC,EAAMO,GACvB,WACEH,EAAW,CAAE5C,QAASwC,EAAMO,GAAI7C,UAAW,SAEtB,SAAhB,OAAPV,QAAO,IAAPA,OAAA,EAAAA,EAASU,WACT,kBAAM0C,OAAW7B,IACjB,kBAAM6B,EAAW,CAAE5C,QAASwC,EAAMO,GAAI7C,UAAW,WAoBjD6D,EAAc,SAACvB,EAAiB1D,GACpC,MAAsB,SAAf0D,EAAMwB,KACTC,KAAOnF,GAAOoF,OAAO,oBACrBrC,GAAmBW,EAAMO,MAAMlB,EAC/BA,EAAgBW,EAAMO,IAAIjE,GAC1BA,EAAMqF,WAAWC,UAAU,EAAG,KAGpC,OACE,sBAAKlG,UAAU,4BAAf,UACE,sBAAKA,UAAU,4BAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,cAACmG,GAAA,EAAD,CACE9F,OAAQA,EACRkD,eAAgB,CAAEa,UAClBgC,QAAS,SAAC5G,GAAD,OAAqB2E,GAAW,SAACqB,GAAD,OAAWhG,GAAX,oBAAmBgG,UAE7DnE,EAAQZ,KAAI,SAACmB,EAAGjB,GAAJ,OACX,sBAEEX,UAAWO,IACT,mFADmB,UAEhBF,EAAOc,cAFS,qBAEiBd,EAAOc,cAFxB,gBAFvB,UAOGS,EAAEE,QAPL,IAOeF,EAAEG,SAPjB,IAO4BH,EAAEhB,MAAO,IACnC,sBACE2F,QAAS,kBACPpC,GAAW,SAACqB,GACV,IAAIC,EAAG,aAAOD,GAEd,OADAC,EAAIG,OAAOjF,EAAG,GACP8E,MAGXzF,UAAU,2CARZ,sBARF,YACYW,UAsBhB,sBAAKX,UAAU,iBAAf,UACE,cAACwG,GAAA,EAAD,CACED,QAASzB,EACT2B,SAA8B,IAApBjC,EAASvC,OACnBjC,UAAS,uCACa,IAApBwE,EAASvC,OACL,kEACA,qDAHG,KAHX,oBAWA,cAACuE,GAAA,EAAD,CACED,QAAO,wBAAE,6BAAAnD,EAAA,sEACcwQ,GAAyB,CAC5CxP,SACAoP,MAAOA,EAAQ,IAHV,UACH1U,EADG,wDAMPsH,EAAQ,GAAD,oBAAKxF,GAAL,CAAY9B,KANZ,2CAQTkB,UAAS,mEATX,uBAeJ,qBAAKA,UAAS,2DAAsDK,EAAtD,cAAd,SACE,eAAC,KAAD,CAAWL,UAAW,kCAAmCoT,UAAU,EAAnE,UACE,wBAAOpT,UAAU,qBAAjB,UACE,gCACE,qBAAIA,UAAU,oBAAd,UACE,oBACEA,UAAS,4BAAuBK,EAAvB,iCAAsDA,EAAtD,6BADX,SAGE,cAACqG,GAAA,EAAD,CACEzG,KAAK,QACL0G,QAAS,CAAEpB,QAAS,mBAAoBqB,KAAM,OAC9CrB,QAASf,EAASvC,SAAWrB,EAAMqB,OACnC4E,SAAU,SAACC,GAAD,OAlGTC,EAkG0BD,EAAEE,OAAOzB,QAlGfd,EAAYsC,EAASnG,EAAMH,KAAI,SAACC,GAAD,OAAOA,EAAEpC,SAAS,IAAtE,IAACyI,OAqGJ3C,EAAO3D,KAAI,SAAC6D,EAAO3D,GAAR,OACV,oBACEX,UAAS,0CAAqCK,EAArC,iCAAoEA,EAApE,mBADX,SAIE,sBAAKL,UAAU,mCAAf,UACE,qBAAKA,UAAU,QACf,qBAAKA,UAAU,6BAA6BuG,QAASlB,EAAQf,GAA7D,SACGA,EAAMO,KAET,qBAAK7E,UAAU,MAAf,UACU,OAAPsB,QAAO,IAAPA,OAAA,EAAAA,EAASQ,WAAYwC,EAAMO,GAC1B,cAAC,KAAD,CACE7D,SAAS,QACThB,UAAS,UACgB,SAAhB,OAAPsB,QAAO,IAAPA,OAAA,EAAAA,EAASU,WAAsB,uBAAyB,MAG1D,WAjBV,aAEarB,YAsBnB,gCACGC,EAAMH,KAAI,SAAC0E,EAAKxE,GAAN,OACT,qBACE4F,QAAS,kBAAMzC,EAAOqB,EAAKxE,IAE3BX,UAAS,8BAAyBK,EAAzB,kCAAyDA,EAAzD,sBAHX,UAKE,oBAAIL,UAAU,OAAOuG,QAAS,SAACO,GAAD,OAAOA,EAAEG,mBAAvC,SACE,cAACP,GAAA,EAAD,CACEzG,KAAK,QACL0G,QAAS,CAAEpB,QAAS,mBAAoBqB,KAAM,OAC9CrB,QAASf,EAASU,SAASC,EAAI7G,OAC/BuI,SAAU,SAACC,GAAD,OAxIPxI,EAwI4B6G,EAAI7G,MAxIjBiH,EAwIwBuB,EAAEE,OAAOzB,aAtInEd,EADEc,EACU,SAACC,GAAD,6BAAcA,GAAd,CAAoBlH,KAItB,SAACkH,GACX,IAAIC,EAAG,aAAOD,GACVE,EAAQD,EAAIE,WAAU,SAACjF,GAAD,OAAOA,IAAMpC,KAIvC,OAHa,MAAToH,GACFD,EAAIG,OAAOF,EAAO,GAEbD,IAZW,IAACnH,EAAeiH,OA2IrBnB,EAAO3D,KAAI,SAAC6D,EAAO4C,GAAR,OACV,oBAA8BlH,UAAU,OAAxC,SACoB,MAAjBmF,EAAIb,EAAMO,IACM,UAAfP,EAAMwB,KACJxB,EAAM6C,YACJ,cAACC,GAAA,EAAD,CAAWC,KAAMlC,EAAIb,EAAMO,MAE3B,cAACuC,GAAA,EAAD,CAAWE,MAAOnC,EAAIb,EAAMO,MAG9B,qBAAK7E,UAAU,oBAAf,SACG6F,EAAYvB,EAAOa,EAAIb,EAAMO,OAGhC,MAbN,cAAgBlE,EAAhB,gBAAyBuG,SAd7B,cAEcvG,YAgCpB,cAAC,KAAD,CACEkG,SAAQ,yCAAE,WAAOtF,GAAP,UAAA6B,EAAA,sDACRwB,EAAerD,GADP,2CAAF,sDADV,SAKE,qBAAKvB,UAAU,aAEjB,iCCvNK8T,GAlBoD,SAAC,GAM7D,IALLlT,EAKI,EALJA,MACAwF,EAII,EAJJA,QACAoN,EAGI,EAHJA,MACAlP,EAEI,EAFJA,MACAjE,EACI,EADJA,OAEA,OACE,cAAC0T,GAAD,CACEP,MAAOA,EACP5S,MAAOA,EACPwF,QAAS,SAACX,GAAD,OAASW,EAAQX,IAC1BrB,OAAQE,EAAM0P,iBACd3T,OAAQA,KCHC4T,GAZc,SAACzU,GAC5B,IAEE,GAAuB,oBADb4N,KAAKS,MAAMT,KAAKC,UAAU7N,IACrBiB,IACb,MAAM,IAAIyT,MAAM,0BAElB,MAAO9T,GACP,MAAO,eAET,OAAO,MCIM6T,GAbc,SAACzU,GAC5B,IACE,IAAI2U,EAAM/G,KAAKS,MAAMT,KAAKC,UAAU7N,IAEpC,GAAmB,kBAAR2U,GAAuC,oBAAZA,EAAI1T,IACxC,MAAM,IAAIyT,MAAM,uBAElB,MAAO9T,GACP,MAAO,eAET,OAAO,MCGM6T,GAbc,SAACzU,GAC5B,IAEE,GAAmB,kBADT4N,KAAKS,MAAMT,KAAKC,UAAU7N,IAElC,MAAM,IAAI0U,MAAM,uBAElB,MAAO9T,GACP,MAAO,eAGT,OAAO,MCNM6T,GAJc,WAC3B,OAAO,MCuDMxJ,GArD8C,SAAC,GAAsC,IAApC7J,EAAmC,EAAnCA,MAAOwF,EAA4B,EAA5BA,QAAS/F,EAAmB,EAAnBA,OAAQuI,EAAW,EAAXA,KACtF,EAA0B1E,mBAAS,IAAnC,mBAAOkQ,EAAP,KAAcC,EAAd,KACMC,EAAc,yCAAG,6BAAAlR,EAAA,sEACHmR,MAAM1H,OAAO2H,SAASC,OAAS,uBAAwB,CACvEC,OAAQ,OACRC,KAAMvH,KAAKC,UAAU+G,KACpBQ,MAAK,SAAClU,GAAD,OAAOA,EAAEmU,UAJI,cACf1D,EADe,yBAKdA,EAAI/Q,MAAQ,KAAO+Q,GALL,2CAAH,qDAYpB,OAJAlO,qBAAU,WACRoR,EAASzT,KACR,CAACA,IAGF,sBAAKZ,UAAU,uBAAf,UACE,qBAAKA,UAAU,YAAf,SACE,cAAC0M,EAAA,EAAD,CACEjG,SAAU7F,EACVkU,OAAQ,aACRzU,OAAQA,EACRL,UAAU,SACV8F,KAAK,WACLlF,MAAOwT,EACPxL,KAAMA,EACN/B,SAAU,SAACC,GAAD,OAAOuN,EAASvN,EAAEE,OAAOpG,YAIvC,qBAAKZ,UAAU,+BAAf,SACGY,EACC,qBACE2F,QAAS,kBAAMH,EAAQ,KACvBpG,UAAU,6GAFZ,mBAOA,qBACEuG,QAAO,wBAAE,6BAAAnD,EAAA,sEACckR,IADd,OACHS,EADG,OAEP3O,EAAQ2O,GAFD,2CAIT/U,UAAU,mGALZ,wBCrCKiU,GAJc,SAACzU,GAC5B,OAAQA,EAAmB,KAAb,YnBDZ,GAAY,CAAC,QAAS,WAE1B,SAAS,KAA2Q,OAA9P,GAAW0I,OAAO2C,QAAU,SAAU7D,GAAU,IAAK,IAAIrG,EAAI,EAAGA,EAAImK,UAAU7I,OAAQtB,IAAK,CAAE,IAAIoK,EAASD,UAAUnK,GAAI,IAAK,IAAImI,KAAOiC,EAAc7C,OAAO8C,UAAUC,eAAeC,KAAKH,EAAQjC,KAAQ9B,EAAO8B,GAAOiC,EAAOjC,IAAY,OAAO9B,GAAkB,GAASmE,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEjC,EAAKnI,EAAnEqG,EAEzF,SAAuC+D,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DjC,EAAKnI,EAA5DqG,EAAS,GAAQuE,EAAarD,OAAOC,KAAK4C,GAAqB,IAAKpK,EAAI,EAAGA,EAAI4K,EAAWtJ,OAAQtB,IAAOmI,EAAMyC,EAAW5K,GAAQ2K,EAASE,QAAQ1C,IAAQ,IAAa9B,EAAO8B,GAAOiC,EAAOjC,IAAQ,OAAO9B,EAFxM,CAA8B+D,EAAQO,GAAuB,GAAIpD,OAAOwD,sBAAuB,CAAE,IAAIC,EAAmBzD,OAAOwD,sBAAsBX,GAAS,IAAKpK,EAAI,EAAGA,EAAIgL,EAAiB1J,OAAQtB,IAAOmI,EAAM6C,EAAiBhL,GAAQ2K,EAASE,QAAQ1C,IAAQ,GAAkBZ,OAAO8C,UAAUY,qBAAqBV,KAAKH,EAAQjC,KAAgB9B,EAAO8B,GAAOiC,EAAOjC,IAAU,OAAO9B,EAMne,SAASgO,GAASlJ,EAAMC,GACtB,IAAIjL,EAAQgL,EAAKhL,MACbkL,EAAUF,EAAKE,QACfvN,EAAQ,GAAyBqN,EAAM,IAE3C,OAAoB,gBAAoB,MAAO,GAAS,CACtDG,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,KAAM,OACNC,MAAO,6BACPtM,IAAKgM,EACL,kBAAmBC,GAClBvN,GAAQqC,EAAqB,gBAAoB,QAAS,CAC3D+D,GAAImH,GACHlL,GAAS,KAAM,KAAU,GAAqB,gBAAoB,OAAQ,CAC3EwL,EAAG,yiBACHF,KAAM,mBAIV,IAAI,GAA0B,aAAiB4I,IoBtBhCC,IpBuBA,IoB/BS,WACtB,OACE,cAAC,EAAD,UACE,cAAC,GAAD,CAAWjV,UAAU,Y,kGC+CZkV,GA3CuC,SAAC,GAQhD,IAPLC,EAOI,EAPJA,QACAC,EAMI,EANJA,aACAC,EAKI,EALJA,gBACA5N,EAII,EAJJA,KACAoI,EAGI,EAHJA,QACAyF,EAEI,EAFJA,oBACGvL,EACC,kBACJ,EAAgC7F,mBAAc,MAA9C,mBAAOqR,EAAP,KAAiBC,EAAjB,KAEA,OACE,qCACE,cAACC,GAAA,EAAD,yBACEhO,KAAc,MAARA,EAAeA,EAAO6C,QAAQiL,IAChCxL,GAFN,IAGEwL,SAAUA,EACV1F,QAASA,GAAoB,kBAAM2F,EAAY,OAC/C7O,QAAS,CAAE+O,MAAO,mCAClBN,aACEA,GAAgB,CACdO,SAAU,MACVC,WAAY,UAGhBP,gBACEA,GAAmB,CACjBM,SAAU,MACVC,WAAY,UAflB,SAmBE,qBACErP,QAAS+O,EAAuBzF,GAAoB,kBAAM2F,EAAY,YAAS3S,EADjF,SAGGsS,OAGL,qBAAK5O,QAAS,SAACO,GAAD,OAAO0O,EAAY1O,EAAE+O,gBAAnC,SAAoD9L,EAAK7I,e,iCCjBhD4U,GAtBiC,SAAC,GAAiC,IAA/BlV,EAA8B,EAA9BA,MAAOwF,EAAuB,EAAvBA,QAAY2D,EAAW,kBAC/E,OACE,cAAC,GAAD,CACEoL,QACE,cAAC,KAAD,CACEY,MAAOnV,EACPiG,SAAU,SAACkP,EAAOC,GAChB5P,EAAQ,QAAD,OAAS2P,EAAME,IAAIC,EAAnB,aAAyBH,EAAME,IAAIE,EAAnC,aAAyCJ,EAAME,IAAI5S,EAAnD,aAAyD0S,EAAME,IAAI7S,EAAnE,SAIbgS,aAAc,CACZO,SAAU,SACVC,WAAY,QAEdP,gBAAiB,CAAEO,WAAY,OAAQD,SAAU,OAbnD,SAeE,mCAAS5L,OCQFqM,GAAsB,CACjCtQ,KAAM,kBACNtH,UAAW6X,GACXrO,SAAUsO,IAGNlS,GAAS,CACb,CACE0B,KAAM,SACNyQ,MAAOC,EACPhY,UAAWiY,EACXzO,SAAU0O,IAEZ,CACE5Q,KAAM,SACNyQ,MAAOI,EACPnY,UAAWoY,GACX5O,SAAU0O,IAEZ,CAAE5Q,KAAM,MAAOyQ,MAAOM,EAAUrY,UAAWsY,GAAc9O,SAAU+O,IACnE,CAAEjR,KAAM,QAASyQ,MAAOS,EAAYxY,UAAWsY,GAAc9O,SAAUiP,IACvE,CACEnR,KAAM,UACNyQ,MAAOW,EACP1Y,UAAW2Y,GACXnP,SAAU0O,IAEZ,CAAE5Q,KAAM,OAAQyQ,MAAOa,EAAW5Y,UAAW6Y,GAAerP,SAAU0O,IACtE,CAAE5Q,KAAM,QAASyQ,MAAOe,EAAY9Y,UAAW+Y,GAAgBvP,SAAU0O,IACzE,CACE5Q,KAAM,YACNyQ,MAAOiB,EACPhZ,UAAWiZ,GACXzP,SAAU0O,IAEZ,CAAE5Q,KAAM,OAAQyQ,MAAOmB,EAAWlZ,UAAWsY,GAAc9O,SAAU2P,IACrE,CAAE7R,KAAM,OAAQyQ,MAAOqB,EAAWpZ,UAAWqZ,GAAe7P,SAAU0O,IACtE,CACE5Q,KAAM,WACNyQ,MAAOuB,EACPtZ,UAAWuZ,GACX/P,SAAU0O,IAEZ,CACE5Q,KAAM,WACNyQ,MAAOyB,EACPxZ,UAAWyZ,GACXjQ,SAAU0O,IAEZ,CACE5Q,KAAM,aACNyQ,MAAO2B,EACP1Z,UAAW2Z,GACXnQ,SAAU0O,IAEZ,CAAE5Q,KAAM,QAASyQ,MAAO6B,GAAY5Z,UC7EoB,SAAC,GAAoC,EAAlC8F,MAAmC,IAA5B1D,EAA2B,EAA3BA,MAAOwF,EAAoB,EAApBA,QAAoB,EAAXwC,KAClF,OACE,cAAC,GAAD,CAAahI,MAAOA,EAAOwF,QAAS,SAACiS,GAAD,OAASjS,EAAQiS,IAArD,SACE,qBAAK3P,MAAO,CAAE4P,WAAY1X,GAASZ,UAAU,oCD0EcgI,SAAU0O,IACzE,CAAE5Q,KAAM,MAAOyQ,MAAOgC,EAAU/Z,UAAWsY,GAAc9O,SAAU0O,KAGtDtS,Q,+JElDFoU,EAAe,I,sFAjC1B,SAAOnR,GACL,OAAO,IAAI3I,SAAQ,SAACC,GAClB,IACE,IAAM8Z,EAAUC,cACVC,EAAYtR,EAAKuB,KAAKgQ,MAAM,KAC5BC,EAAWC,IAAUC,WAAa,IAAMJ,EAAUA,EAAU1W,OAAS,GACvE+W,EAAUjZ,YAAI0Y,EAASI,GAErBI,EAAaC,YAAqBF,EAAS3R,GACjD4R,EAAWE,GACT,iBACA,SAACC,OACD,SAAChZ,GACCzB,EAAQ,CAAEyB,MAAOA,EAAMwI,UAEzB,WACEyQ,YAAeJ,EAAWG,SAASrZ,KAAK6U,MAAK,SAAC0E,GAC5C3a,EAAQ,CAAE2a,cAAaT,mBAI7B,MAAOzY,GACPzB,EAAQ,CAAEyB,gB,oBAKhB,SAAOmZ,GACL,IAAMd,EAAUC,cAChBc,YAAazZ,YAAI0Y,EAASc,Q,MClCjBlK,EAAU,uCAAG,WAAOhI,GAAP,iBAAAjE,EAAA,+EAEJoV,EAAaiB,OAAOpS,GAFhB,YAIlB,UAFE8J,EAFgB,kDAKbA,GALa,cAOduI,EAAc,CAClB9Q,KAAMvB,EAAKuB,KACX3I,KAAMoH,EAAKpH,KACXuP,IAAK2B,EAAImI,YACTK,YAAaxI,EAAI0H,SACjB/S,KAAM8T,YAAiBvS,IAZL,kBAcbwS,YAAY,0BAA2BH,IAd1B,mFAiBf,CAAEtZ,MAAO,KAAM6F,aAjBA,0DAAH,uD,gKCHjB8B,EAAgB,CACpBgN,SAAU,iBAAM,IAChB+E,OAAQ,iBAAM,IACd,YAAa,iBAAM,IACnBjF,KAAM,iBAAO,IACbpU,IAAK,iBAAO,IACZsZ,MAAO,iBAAM,IACbC,MAAO,SAACtZ,GAAD,MAA6B,UAAXA,EAAEoF,MAAoBpF,EAAEyG,YAAc,GAAK,IACpE8S,KAAM,kBAAM,MACZC,KAAM,kBAAM,MACZC,OAAQ,kBAAM,MACdC,QAAS,kBAAM,GACfC,SAAU,SAAC3Z,GAAD,MAA6B,aAAXA,EAAEoF,MAAuBpF,EAAEwS,iBAAmB,GAAK,IAC/EoH,WAAY,iBAAM,IAClBxb,SAAU,SAAC4B,GAAD,MACG,aAAXA,EAAEoF,MACFpF,EAAE6Z,eAAepX,QAAO,SAACC,EAAGC,GAAJ,mBAAC,eAAeD,GAAhB,kBAAoBC,EAAEwB,GAAKkD,EAAc1E,EAAEyC,UAAU,KAC/E0U,IAAK,iBAAM,IACX,kBAAmB,iBAAM,IACzBzE,MAAO,iBAAM,KAGAhO,I,OCgIA4L,IAlImC,SAAC,GAQ5C,IAPL/L,EAOI,EAPJA,SACAxD,EAMI,EANJA,OACAmP,EAKI,EALJA,iBACAC,EAII,EAJJA,MACAlV,EAGI,EAHJA,MACA+B,EAEI,EAFJA,OACAoa,EACI,EADJA,WAEMC,EAAa,sBAAOC,KAAP,CAAmBvE,MAEhCwE,EAAWC,cAEXC,EAAU1W,EAAOjB,QACrB,SAACC,EAAGC,GAAJ,mBAAC,eACID,GADL,kBAEGC,EAAEwB,GACD0O,GAAoBA,EAAiBlQ,EAAEwB,IACnC0O,EAAiBlQ,EAAEwB,IACnBkD,EAAc1E,EAAEyC,MAAMzC,OAE9B,IAGF,EAAmFsE,YAAU,CAC3FoT,kBAAkB,EAClBhT,cAAe+S,EACfE,oBAAoB,EACpBpT,SAAS,WAAD,4BAAE,WAAOC,GAAP,SAAAzE,EAAA,sEACFwX,EAAS,CAAE9U,KAAM,uBAAwBmV,SAAS,IADhD,uBAEFrT,EAASC,GAFP,2CAAF,mDAAC,GAITG,SAAU,SAACH,GACT,IAAMI,EAAc,GAUpB,OATA7D,EAAOzC,SAAQ,SAACjB,GACd,IAAIsS,EAAY0H,EAAc3L,MAAK,SAACnN,GAAD,OAAOA,EAAEkE,OAASpF,EAAEoF,QACvD,IAAKkN,EAAW,OAAO/K,EACvB,IAAI7H,EAAQ4S,EAAUhL,SAASH,EAAKnH,EAAEmE,KAClCzE,IACF6H,EAAOvH,EAAEmE,IAAMzE,MAIZ6H,KAnBHG,EAAR,EAAQA,OAAQH,EAAhB,EAAgBA,OAAQiT,EAAxB,EAAwBA,cAAe3S,EAAvC,EAAuCA,aAAcD,EAArD,EAAqDA,YAAaE,EAAlE,EAAkEA,aAuB5D2S,GAAc5H,GAAoBnG,KAAKC,UAAUyN,KAAa1N,KAAKC,UAAUjF,GAMnF,OAJAvI,IAAMoD,WAAU,WACd2X,EAAS,CAAE9U,KAAM,uBAAwBmV,QAASE,MACjD,CAACA,EAAYP,IAGd,sBAAK5a,UAAU,8BAAf,UACE,sBAAKA,UAAU,sCAAf,UACE,gCACE,qBACEA,UAAWO,IACT,0DADmB,UAEhBF,EAAOc,cAFS,cADvB,SAMG7C,EAAK,gBAAqBmc,GAAU,iBAErCnc,EACA,sBAAK0B,UAAWO,IAAW,GAAD,OAAIF,EAAOc,cAAX,aAAqC,gBAA/D,qBACW7C,KAFH,QAMZ,cAACkI,EAAA,EAAD,CACEV,KAAK,SACLS,QAAS,kBAAMgC,KACf9B,SAAU+B,IAAiB2S,EAC3Bnb,UAAS,iBACPmb,EACI,2CACA,kEAHG,UAJX,SAUG3S,EACG,aACoB,MAApB+K,GAA4BkH,EAC5B,OACA,eAGR,qBAAKza,UAAU,wEAAf,SACE,qBAAKA,UAAU,uBAAf,SACGkI,OAAOC,KAAKC,GAAQnG,OACjBmC,EACGC,QAAO,SAAC3D,GAAD,OAAQA,EAAE0a,aACjB3a,KAAI,SAACC,EAAGC,GAAO,IAAD,IACPnC,EAAS,UAAGkc,EAAc3L,MAAK,SAACnN,GAAD,OAAOA,EAAEkE,OAASpF,EAAEoF,eAA1C,aAAG,EAA8CtH,UAEhE,OACE,sBAEEwB,UAAS,UACP,CAAC,YAAa,cAAckF,SAASxE,EAAEoF,MAAQ,SAAW,kBADnD,eAFX,UAME,eAAC7E,EAAA,EAAD,CACEZ,OAAQA,EACRL,UAAU,mBACVI,MAAOkI,EAAc,EAAd,UAAkBL,EAAOvH,EAAEmE,WAA3B,aAAkB,EAAcoB,WAAa,KAHtD,UAKGvF,EAAEmE,GAAI,OAEPrG,EACA,cAACA,EAAD,CACE4H,QAAS,SAAC5G,GAAD,OAAS0b,EAAcxa,EAAEmE,GAAIrF,IACtCa,OAAQA,EACRO,MAAOwH,EAAO1H,EAAEmE,IAChB+D,KAAMlI,EAAEmE,GACR2O,MAAOA,EACPlP,MAAO5D,IAPG,OAbhB,gBACgBC,OAyBtB,c,uPCpID8O,EAA0B,CACrCD,IAAK,SAAC5O,GAAD,OACH,qBACE2F,QAAS,SAACO,GACRA,EAAEG,kBACF4F,OAAOpF,KAAK7G,EAAO,WAErBZ,UAAU,sDACV0I,MAAO,CAAEc,gBAAgB,OAAD,OAAS5I,EAAT,SAG5BX,KAAM,SAACW,GAAD,OAAmBya,YAAYza,KA0ExB2J,UAvEqB,WAClC,IAAM8D,EAAYxO,IAAM6J,OAAO,MACzB4R,EAAS7Z,cACf,EAAqCyC,mBAAS,GAA9C,mBAAOwK,EAAP,KAAuBC,EAAvB,KAEQpL,EAAmBqL,aAAY,SAACC,GACtC,MAAO,CACLtL,eAAgBsL,EAAMC,gBAAgBC,MAAK,SAACrO,GAAD,MAAgB,4BAATA,EAAEmE,UAFhDtB,eAMR,OACE,sBAAKvD,UAAU,8BAAf,UACE,sBAAKA,UAAU,sCAAf,UACE,cAAC,IAAD,CAAWA,UAAU,YAArB,mBACA,uBAEE8F,KAAK,OACLsI,UAAQ,EACRpO,UAAU,SACVD,IAAKsO,EACLxH,SAAQ,uCAAE,WAAOC,GAAP,yBAAA1D,EAAA,2DACFkE,EAAQR,EAAEE,OAAOM,SAEVA,EAAMrF,OAHX,iBAIN7C,IAAMwb,SAAS,CACb9U,KAAM,cACNmV,QAAQ,aAAD,OAAe3T,EAAMrF,OAArB,gBAAmCqF,EAAMrF,OAAS,EAAI,IAAM,GAA5D,SAELmN,EAAW,EART,cASW9H,GATX,gEASGD,EATH,kBAUcgI,YAAWhI,GAVzB,QAWE,UADA8J,EAVF,QAkBFmK,EAAOnK,EAAI/Q,MAAQ,uBAAwB,CAAEmb,QAAS,WANtDnM,IACAhQ,IAAMwb,SAAS,CACb9U,KAAM,cACNmV,QAAQ,GAAD,OAAK7L,EAAL,YAAiB9H,EAAMrF,OAAvB,iBAfP,+IAsBN7C,IAAMwb,SAAS,CAAE9U,KAAM,cAAemV,SAAS,IAC/CtM,GAAW,SAACnJ,GAAD,OAAUA,EAAO,KAvBtB,gEAAF,uDANV,qBACqBkJ,IAgCrB,cAAC,IAAD,CACEnI,QAAS,kBAAM8H,EAAUY,QAAQK,SACjCtP,UAAU,6EAFZ,SAIE,sBAAKA,UAAU,oBAAf,UACE,cAAC,IAAD,CAAYA,UAAU,eAAegB,SAAS,YAC9C,kDAKJuC,EACA,cAAC,IAAD,CACElD,OAAO,SAEPsD,gBAAiB8L,EACjBlM,eAAgBA,GAJlB,sBAEsBmL,IAHL,U,uFC9DVyE,IAhB+B,SAAC,GAIxC,IAAD,IAHJnT,iBAGI,MAHQ,GAGR,EADD+J,GACC,EAFJwR,QAEI,kBACJ,OACE,+CACMxR,GADN,IAEE/J,UACE,kHACAA,O,iCClBR,sCAAIgK,EAAOwR,EAASC,EAApB,OAEI9Q,EAAY,CAAC,QAAS,WAE1B,SAASC,IAA2Q,OAA9PA,EAAW1C,OAAO2C,QAAU,SAAU7D,GAAU,IAAK,IAAIrG,EAAI,EAAGA,EAAImK,UAAU7I,OAAQtB,IAAK,CAAE,IAAIoK,EAASD,UAAUnK,GAAI,IAAK,IAAImI,KAAOiC,EAAc7C,OAAO8C,UAAUC,eAAeC,KAAKH,EAAQjC,KAAQ9B,EAAO8B,GAAOiC,EAAOjC,IAAY,OAAO9B,GAAkB4D,EAASO,MAAMC,KAAMN,WAEhT,SAASO,EAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEjC,EAAKnI,EAAnEqG,EAEzF,SAAuC+D,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DjC,EAAKnI,EAA5DqG,EAAS,GAAQuE,EAAarD,OAAOC,KAAK4C,GAAqB,IAAKpK,EAAI,EAAGA,EAAI4K,EAAWtJ,OAAQtB,IAAOmI,EAAMyC,EAAW5K,GAAQ2K,EAASE,QAAQ1C,IAAQ,IAAa9B,EAAO8B,GAAOiC,EAAOjC,IAAQ,OAAO9B,EAFxMyE,CAA8BV,EAAQO,GAAuB,GAAIpD,OAAOwD,sBAAuB,CAAE,IAAIC,EAAmBzD,OAAOwD,sBAAsBX,GAAS,IAAKpK,EAAI,EAAGA,EAAIgL,EAAiB1J,OAAQtB,IAAOmI,EAAM6C,EAAiBhL,GAAQ2K,EAASE,QAAQ1C,IAAQ,GAAkBZ,OAAO8C,UAAUY,qBAAqBV,KAAKH,EAAQjC,KAAgB9B,EAAO8B,GAAOiC,EAAOjC,IAAU,OAAO9B,EAMne,SAAS0U,EAAY5P,EAAMC,GACzB,IAAIjL,EAAQgL,EAAKhL,MACbkL,EAAUF,EAAKE,QACfvN,EAAQ4M,EAAyBS,EAAMnB,GAE3C,OAAoB,gBAAoB,MAAOC,EAAS,CACtDqB,MAAO,GACPC,OAAQ,EACRC,QAAS,WACTC,KAAM,OACNC,MAAO,6BACPtM,IAAKgM,EACL,kBAAmBC,GAClBvN,GAAQqC,EAAqB,gBAAoB,QAAS,CAC3D+D,GAAImH,GACHlL,GAAS,KAAMkJ,IAAUA,EAAqB,gBAAoB,OAAQ,CAC3EsC,EAAG,2FACHqP,OAAQ,eACRC,YAAa,QACbC,cAAe,QACfC,eAAgB,WACbN,IAAYA,EAAuB,gBAAoB,SAAU,CACpEO,GAAI,QACJC,GAAI,QACJ9F,EAAG,QACHyF,OAAQ,eACRC,YAAa,WACVH,IAAaA,EAAwB,gBAAoB,SAAU,CACtEM,GAAI,QACJC,GAAI,QACJ9F,EAAG,QACHyF,OAAQ,eACRC,YAAa,YAIjB,IAAIrP,EAA0B,aAAiBmP,GAChC,K,iCCjDf,sCAAI1R,EAAO8C,EAAQ0O,EAASC,EAAUQ,EAAtC,OAEItR,EAAY,CAAC,QAAS,WAE1B,SAASC,IAA2Q,OAA9PA,EAAW1C,OAAO2C,QAAU,SAAU7D,GAAU,IAAK,IAAIrG,EAAI,EAAGA,EAAImK,UAAU7I,OAAQtB,IAAK,CAAE,IAAIoK,EAASD,UAAUnK,GAAI,IAAK,IAAImI,KAAOiC,EAAc7C,OAAO8C,UAAUC,eAAeC,KAAKH,EAAQjC,KAAQ9B,EAAO8B,GAAOiC,EAAOjC,IAAY,OAAO9B,GAAkB4D,EAASO,MAAMC,KAAMN,WAEhT,SAASO,EAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEjC,EAAKnI,EAAnEqG,EAEzF,SAAuC+D,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DjC,EAAKnI,EAA5DqG,EAAS,GAAQuE,EAAarD,OAAOC,KAAK4C,GAAqB,IAAKpK,EAAI,EAAGA,EAAI4K,EAAWtJ,OAAQtB,IAAOmI,EAAMyC,EAAW5K,GAAQ2K,EAASE,QAAQ1C,IAAQ,IAAa9B,EAAO8B,GAAOiC,EAAOjC,IAAQ,OAAO9B,EAFxMyE,CAA8BV,EAAQO,GAAuB,GAAIpD,OAAOwD,sBAAuB,CAAE,IAAIC,EAAmBzD,OAAOwD,sBAAsBX,GAAS,IAAKpK,EAAI,EAAGA,EAAIgL,EAAiB1J,OAAQtB,IAAOmI,EAAM6C,EAAiBhL,GAAQ2K,EAASE,QAAQ1C,IAAQ,GAAkBZ,OAAO8C,UAAUY,qBAAqBV,KAAKH,EAAQjC,KAAgB9B,EAAO8B,GAAOiC,EAAOjC,IAAU,OAAO9B,EAMne,SAASkV,EAAapQ,EAAMC,GAC1B,IAAIjL,EAAQgL,EAAKhL,MACbkL,EAAUF,EAAKE,QACfvN,EAAQ4M,EAAyBS,EAAMnB,GAE3C,OAAoB,gBAAoB,MAAOC,EAAS,CACtDqB,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,KAAM,OACNC,MAAO,6BACPtM,IAAKgM,EACL,kBAAmBC,GAClBvN,GAAQqC,EAAqB,gBAAoB,QAAS,CAC3D+D,GAAImH,GACHlL,GAAS,KAAMkJ,IAAUA,EAAqB,gBAAoB,OAAQ,CAC3EsC,EAAG,mGACHqP,OAAQ,eACRC,YAAa,QACbC,cAAe,QACfC,eAAgB,WACbhP,IAAWA,EAAsB,gBAAoB,OAAQ,CAChER,EAAG,kGACHqP,OAAQ,eACRC,YAAa,QACbC,cAAe,QACfC,eAAgB,WACbN,IAAYA,EAAuB,gBAAoB,SAAU,CACpEO,GAAI,QACJC,GAAI,QACJ9F,EAAG,QACHyF,OAAQ,eACRC,YAAa,WACVH,IAAaA,EAAwB,gBAAoB,SAAU,CACtEM,GAAI,QACJC,GAAI,QACJ9F,EAAG,QACHyF,OAAQ,eACRC,YAAa,WACVK,IAAaA,EAAwB,gBAAoB,SAAU,CACtEF,GAAI,QACJC,GAAI,QACJ9F,EAAG,QACHyF,OAAQ,eACRC,YAAa,YAIjB,IAAIrP,EAA0B,aAAiB2P,GAChC,K,4DC/BAC,EA3Bc,WAC3B,IAAMC,EAAO1S,iBAAY,IAAIuF,QAgB7B,OAdAhM,qBAAU,WACR,IAAMoZ,EAAMvd,SAASG,cAAc,OAQnC,OAPAod,EAAI3T,MAAM4T,SAAW,WACrBD,EAAI3T,MAAM6T,cAAgB,OAC1BF,EAAI3T,MAAM8T,IAAM,IAChBH,EAAI3T,MAAMuD,MAAQ,OAClBoQ,EAAI3T,MAAMwD,OAAS,OACnBkQ,EAAKK,IAAMJ,EACXvd,SAAS6V,KAAK3V,YAAYqd,GACnB,WACLvd,SAAS6V,KAAKhV,YAAY0c,MAE3B,CAACD,IAEG,SAACjd,GAAD,OACL,SAACud,GAAiC,IAAD,uBAAdC,EAAc,iCAAdA,EAAc,kBAC/B,IAAMC,EAAUzd,EAAM,WAAN,GAAOud,GAAP,OAAoBC,IACpC,MAA+C,UAA3CD,EAASG,eAAenU,MAAM4T,SACzBQ,uBAAaF,EAASR,EAAKK,KAE7BG,K,gBC8BE9M,IA7CqC,SAAC,GAK9C,IAJLC,EAII,EAJJA,UACAY,EAGI,EAHJA,KACAT,EAEI,EAFJA,MACAO,EACI,EADJA,mBAEMsM,EAAkBZ,IAClBa,EAAStT,iBAAeC,KAAKC,UAE7BqT,EAAW,SAACC,EAAiBxX,GACjC,MAAM,GAAN,OAAUwX,EAAV,YAAqBxX,EAArB,YAA8BsX,EAAO/N,UAGvC,OACE,cAAC,IAAD,CAAiBc,UAAWA,EAA5B,SACE,cAAC,IAAD,CAAWoN,YAAY,gBAAvB,SACG,SAACT,GAAD,OACC,8CAAK1c,UAAWyQ,GAAwBiM,EAASU,gBAAjD,IAAiErd,IAAK2c,EAASW,SAA/E,UACGnN,EAAMzP,KAAI,SAACC,EAAGC,GACb,OACE,cAAC,IAAD,CAEE2c,YAAaL,EAAS,YAAatc,GACnC+E,MAAO/E,EAHT,SAKGoc,GAAgB,SAACL,GAAD,OACf,yDACE3c,IAAK2c,EAASW,UACVX,EAASG,gBACTH,EAASa,iBAHf,aAKE,cAAC5M,EAAD,2BAAUjQ,GAAV,IAAagF,MAAO/E,YAVnBsc,EAAS,YAAatc,OAgBhC+b,EAAS1T,uB,6HCKPwU,IAvC2B,SAAC,GAA6B,IAA3Bnf,EAA0B,EAA1BA,aAAcC,EAAY,EAAZA,MACnDiF,EAAiBqL,aAAY,SAACC,GAAD,OACjCA,EAAMC,gBAAgBC,MAAK,SAACrO,GAAD,OAAOA,EAAEmE,KAAOxG,QAG/B8G,EAAQsY,mBAAS,CAACpf,EAAc,cAAeC,EAAOiF,GAAtC,sBAAuD,4BAAAH,EAAA,yDAC9EG,EAD8E,yCACvD,MADuD,UAE9EjF,GAAUiF,EAAema,OAFqD,yCAEtC,MAFsC,uBAGjE5K,YAAYzU,EAAcC,GAHuC,cAG7E6S,EAH6E,yBAI5EA,GAJ4E,4CAA7ErO,KAOFkB,EAAUC,cAEhB,OAAQV,EACN,cAAC,IAAD,CACEiQ,MAAO,EACPnT,OAAO,SACP/B,MAAOA,EACPiV,iBAAkBpO,QAAYtC,EAC9BuB,OAAQb,EAAea,OACvBqW,WAAYlX,EAAema,OAASna,EAAeqF,UAAO/F,EAC1D+E,SAAQ,uCAAE,WAAOC,GAAP,SAAAzE,EAAA,0DACJyE,EADI,mBAEK,MAAP1C,EAFE,gCAGE9C,IAAmBsb,eAAepa,EAAesB,GAAIM,EAAK0C,GAH5D,6CAKExF,IAAmBwX,YAAYtW,EAAesB,GAAIgD,GALpD,OASHtE,EAAema,QAClB1Z,EAAQ4Z,SAVF,2CAAF,wDARa","file":"static/js/8.8382e4ea.chunk.js","sourcesContent":["import Document from \"components/Document\";\r\n\r\nexport interface AppearanceProps {}\r\n\r\nexport interface ApperanceItem {\r\n  id: string;\r\n  name: string;\r\n  value: any;\r\n  docId: string;\r\n}\r\n\r\nconst COLLECTION_ID = \"AppearanceReservedCollection\";\r\n\r\nconst Appearance: React.FC<AppearanceProps> = () => {\r\n  return <Document collectionId={COLLECTION_ID} docId=\"\"></Document>;\r\n};\r\n\r\nexport default Appearance;\r\n","import ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"store\";\r\nimport NotificationsProvider from \"components/NotificationsProvider\";\r\nimport { QueryClientProvider } from \"react-query\";\r\nimport { queryClient } from \"index\";\r\n\r\nexport interface CallableComponent<T> {\r\n  proceed: (v: T) => void;\r\n}\r\n\r\ninterface callComponentArgs<T> {\r\n  Component: React.FC<any>;\r\n  props: Omit<T, \"proceed\">;\r\n}\r\n\r\nexport function callComponent<T, RT>({ Component, props }: callComponentArgs<T>): Promise<RT> {\r\n  return new Promise((resolve, reject) => {\r\n    const wrapper = document.getElementById(\"root\")?.appendChild(document.createElement(\"div\"));\r\n\r\n    if (wrapper) {\r\n      ReactDOM.render(\r\n        <Provider store={store}>\r\n          <NotificationsProvider>\r\n            <QueryClientProvider client={queryClient}>\r\n              <Component\r\n                {...props}\r\n                proceed={(val: RT) => {\r\n                  ReactDOM.unmountComponentAtNode(wrapper);\r\n                  wrapper.parentNode?.removeChild(wrapper);\r\n                  resolve(val);\r\n                }}\r\n              />\r\n            </QueryClientProvider>\r\n          </NotificationsProvider>\r\n        </Provider>,\r\n        wrapper\r\n      );\r\n    }\r\n  });\r\n}\r\n","import { IoAlertCircleOutline } from \"react-icons/io5\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport React, { SelectHTMLAttributes } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <IoAlertCircleOutline className=\"text-red-FF0000\" size={20}></IoAlertCircleOutline>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport interface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {\r\n  className?: string;\r\n  options: { label: string; value: string | number }[];\r\n  error?: string | boolean;\r\n  ground: GroundType;\r\n}\r\n\r\nconst Select: React.FC<SelectProps> = ({ className = \"\", options, error, ground, ...props }) => {\r\n  let mainClasses = `input${ground}TextColor input${ground}HoverBackground input${ground}FocusedTextColor input${ground}FocusedBackground input${ground}FocusedBorderColor input${ground}Background`;\r\n  return (\r\n    <div className={`${className} relative flex items-center`}>\r\n      <select\r\n        className={classNames(\"px-3 h-full border-2 border-solid w-full rounded outline-none\", {\r\n          \"border-red-FF0000\": error,\r\n          [mainClasses]: !error,\r\n        })}\r\n        {...props}\r\n        spellCheck={false}\r\n      >\r\n        {options.map((x, i) => (\r\n          <option data-testid={`select-option-${x.value}`} key={\"opt-\" + i} value={x.value}>\r\n            {x.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import React from \"react\";\r\nimport ErrorRounded from \"@mui/icons-material/ErrorRounded\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport classNames from \"classnames\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface LabelProps {\r\n  error?: string | undefined | null;\r\n  className?: string;\r\n  children: any;\r\n  ground: GroundType;\r\n}\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <ErrorRounded className=\"text-red-500 text-xl\" fontSize=\"inherit\"></ErrorRounded>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst Label: React.FC<LabelProps> = ({ className = \"\", children, error, ground }) => {\r\n  return (\r\n    <div\r\n      className={classNames(\r\n        `flex justify-between relative ${className}`,\r\n        `${ground.toLowerCase()}TextColor`\r\n      )}\r\n    >\r\n      <div>{children}</div>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Label;\r\n","import { useNotify } from \"components/NotificationsProvider\";\r\nimport { FilterType } from \"components/TableElements/CollectionTable\";\r\nimport { createIndex } from \"components/TableElements/CreateIndex\";\r\nimport { useEffect, useCallback } from \"react\";\r\nimport { Document, GetCollectionOptions } from \"utils/interfaces\";\r\nimport CollectionsManager from \"facades/CollectionsManager\";\r\nimport { useInfiniteQuery } from \"react-query\";\r\n\r\ninterface UseFetchProps {\r\n  collectionId: string;\r\n  filters?: FilterType[];\r\n  orderBy?: { fieldId: string; direction: \"asc\" | \"desc\" };\r\n  inView: boolean;\r\n}\r\n\r\nconst useFetch = ({ collectionId, filters = [], orderBy, inView }: UseFetchProps) => {\r\n  const notify = useNotify();\r\n\r\n  const getOptions = useCallback(() => {\r\n    let options: GetCollectionOptions = { collectionId };\r\n\r\n    options.where = \"\";\r\n    options.orderBy = \"\";\r\n\r\n    filters.forEach((f, i) => {\r\n      options.where += (i > 0 ? \";\" : \"\") + f.fieldId + \",\" + f.operator + \",\" + f.value;\r\n      if (orderBy && orderBy.fieldId !== f.fieldId) {\r\n        options.orderBy += (options.orderBy ? \";\" : \"\") + f.fieldId;\r\n      }\r\n    });\r\n\r\n    if (orderBy) {\r\n      options.orderBy += (options.orderBy ? \";\" : \"\") + `${orderBy.fieldId},${orderBy.direction}`;\r\n    }\r\n    if (!orderBy && !filters.length) {\r\n      options.orderBy = \"createdAt,asc\";\r\n    }\r\n\r\n    options.populateRef = false;\r\n\r\n    return options;\r\n  }, [orderBy, filters, collectionId]);\r\n\r\n  const { data, error, fetchNextPage, hasNextPage } = useInfiniteQuery<Document[]>(\r\n    [collectionId, orderBy, filters],\r\n    ({ pageParam }) => {\r\n      return CollectionsManager.getCollection({ ...getOptions(), startAfter: pageParam });\r\n    },\r\n    {\r\n      keepPreviousData: true,\r\n      getNextPageParam: (lastPage, pages) => {\r\n        let lastDoc = lastPage?.length && lastPage.length === 10 ? lastPage[9] : null;\r\n        return lastDoc ? lastDoc[orderBy ? orderBy.fieldId : \"createdAt\"] : undefined;\r\n      },\r\n    }\r\n  );\r\n\r\n  const onError = (message: string) => {\r\n    if (message.includes(\"FAILED_PRECONDITION\")) {\r\n      createIndex(message.split(\"it here:\")[1]);\r\n    } else {\r\n      notify(message, { variant: \"error\" });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (inView && hasNextPage) {\r\n      fetchNextPage();\r\n    }\r\n  }, [inView, fetchNextPage, hasNextPage]);\r\n\r\n  return { docs: data?.pages.reduce((a, b) => [...a, ...b], []) || [] };\r\n};\r\n\r\nexport default useFetch;\r\n","import { Document } from \"utils/interfaces\";\r\nimport { CollectionType, AnyField } from \"api/collectionTypes\";\r\nimport FilesCell from \"./FilesCell\";\r\nimport React, { useEffect } from \"react\";\r\nimport ExpandMoreRounded from \"@mui/icons-material/ExpandMoreRounded\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport AddFilter from \"./AddFilter\";\r\nimport Button from \"components/Button\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport classNames from \"classnames\";\r\nimport useFetch from \"hooks/useFetch\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport Checkbox from \"@mui/material/Checkbox\";\r\nimport moment from \"moment\";\r\nimport CollectionsManager from \"facades/CollectionsManager\";\r\nimport { GroundType } from \"utils/types\";\r\nimport { uncapitalize } from \"helper\";\r\n\r\nexport interface TableProps {\r\n  collectionType: CollectionType;\r\n  onPick?: (a: Document[]) => void;\r\n  blackList?: string[];\r\n  singleSelect?: boolean;\r\n  valueFormatters?: { [key: string]: (val: any) => any };\r\n  ground: GroundType;\r\n  filters?: FilterType[];\r\n  onEdit?: (doc: Document) => void;\r\n  hideFilters?: boolean;\r\n}\r\n\r\nexport type FilterType = { fieldId: string; operator: string; value: string; hidden?: boolean };\r\n\r\nconst Table: React.FC<TableProps> = ({\r\n  collectionType,\r\n  onPick,\r\n  blackList = [],\r\n  singleSelect = false,\r\n  valueFormatters,\r\n  ground,\r\n  filters: _filters = [],\r\n  onEdit: _onEdit,\r\n  hideFilters = false,\r\n}) => {\r\n  const history = useHistory();\r\n\r\n  const [filters, setFilters] = React.useState<FilterType[]>([]);\r\n  const fields = collectionType.fields.filter((field) => field.displayOnTable);\r\n  const [selected, setSelected] = React.useState<string[]>([]);\r\n  const [orderBy, setOrderBy] = React.useState<{ fieldId: string; direction: \"asc\" | \"desc\" }>();\r\n  const [endIsInView, setEndIsInView] = React.useState(false);\r\n\r\n  const { docs } = useFetch({\r\n    collectionId: collectionType.id,\r\n    filters,\r\n    orderBy,\r\n    inView: endIsInView,\r\n  });\r\n\r\n  const onDeleteSelected = async () => {\r\n    if (await confirm({ confirmation: `Delete ${selected.length} documents?` })) {\r\n      CollectionsManager.deleteMultipleDocuments(\r\n        collectionType.id,\r\n        docs.filter((x) => selected.includes(x.docId))\r\n      );\r\n\r\n      setSelected([]);\r\n    }\r\n  };\r\n\r\n  const onEdit =\r\n    _onEdit ||\r\n    ((doc: Document) => {\r\n      history.push(`/collections/${collectionType.id}/edit/${doc.docId}`);\r\n    });\r\n\r\n  const onOrder = (field: AnyField) =>\r\n    orderBy?.fieldId !== field.id\r\n      ? () => {\r\n          setOrderBy({ fieldId: field.id, direction: \"asc\" });\r\n        }\r\n      : orderBy?.direction !== \"asc\"\r\n      ? () => setOrderBy(undefined)\r\n      : () => setOrderBy({ fieldId: field.id, direction: \"desc\" });\r\n\r\n  const selectAll = (select: boolean) => setSelected(select ? docs.map((x) => x.docId) : []);\r\n\r\n  const selectHandler = (docId: string, checked: boolean) => {\r\n    if (checked) {\r\n      if (singleSelect) {\r\n        setSelected([docId]);\r\n      } else {\r\n        setSelected((prev) => [...prev, docId]);\r\n      }\r\n\r\n      return;\r\n    }\r\n    setSelected((prev) => {\r\n      let arr = [...prev];\r\n      let index = arr.findIndex((x) => x === docId);\r\n      if (index != null) {\r\n        arr.splice(index, 1);\r\n      }\r\n      return arr;\r\n    });\r\n  };\r\n\r\n  const formatValue = (field: AnyField, value: any) => {\r\n    return field.type === \"date\"\r\n      ? moment(value).format(\"YYYY-MM-DD HH:mm\")\r\n      : valueFormatters && field.id in valueFormatters\r\n      ? valueFormatters[field.id](value)\r\n      : value.toString().substring(0, 40);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (_filters.length) {\r\n      setFilters((prev) => [...prev, ..._filters]);\r\n    }\r\n  }, [_filters]);\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex-col flex\">\r\n      <div className=\"flex justify-between mb-3\">\r\n        {hideFilters ? null : (\r\n          <div className=\"flex flex-wrap\">\r\n            <AddFilter\r\n              ground={ground}\r\n              collectionType={collectionType}\r\n              onValue={(val: FilterType) => setFilters((prev) => [val, ...prev])}\r\n            ></AddFilter>\r\n            {filters.map((f, i) =>\r\n              f.hidden ? null : (\r\n                <div\r\n                  key={`f-${i}`}\r\n                  className={classNames(\r\n                    \"rounded min-h-28px border leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative\",\r\n                    `${uncapitalize(ground)}TextColor ${uncapitalize(ground)}BorderColor`\r\n                  )}\r\n                >\r\n                  {f.fieldId} {f.operator} {f.value}{\" \"}\r\n                  <span\r\n                    onClick={() =>\r\n                      setFilters((prev) => {\r\n                        let arr = [...prev];\r\n                        arr.splice(i, 1);\r\n                        return arr;\r\n                      })\r\n                    }\r\n                    className=\"text-xs leading-28px ml-3 cursor-pointer\"\r\n                  >\r\n                    \r\n                  </span>\r\n                </div>\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {!onPick ? (\r\n          <Button\r\n            onClick={onDeleteSelected}\r\n            disabled={selected.length === 0}\r\n            className={`px-7 mb-3 min-w-unset rounded h-28px ${\r\n              selected.length === 0\r\n                ? \"buttonDisabledBackground buttonDisabledTextColor cursor-default\"\r\n                : \"dangerBackground buttonDangerTextColor\"\r\n            } `}\r\n          >\r\n            Delete\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            onClick={() => onPick(docs.filter((x) => selected.includes(x.docId)))}\r\n            className={`h-28px min-w-unset rounded mb-3 px-7 ${\r\n              selected.length === 0\r\n                ? \"buttonDisabledBackground buttonDisabledTextColor cursor-default\"\r\n                : \"primaryBackground buttonPrimaryTextColor\"\r\n            } `}\r\n          >\r\n            Select\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <div className={classNames(\"flex-grow h-0 -mt-3 rounded overflow-hidden bg-white\")}>\r\n        <SimpleBar className={\"relative scrollbar-light h-full\"}>\r\n          <table className=\"w-full text-center\">\r\n            <thead>\r\n              <tr className=\"whitespace-nowrap\">\r\n                <th className={`sticky top-0 table${ground}HeaderBackground z-10 px-1`}>\r\n                  {singleSelect ? null : (\r\n                    <Checkbox\r\n                      size=\"small\"\r\n                      classes={{ checked: \"primaryTextColor\", root: \"p-0\" }}\r\n                      checked={selected.length === docs.length}\r\n                      onChange={(e) => selectAll(e.target.checked)}\r\n                    ></Checkbox>\r\n                  )}\r\n                </th>\r\n                {fields.map((field, i) => (\r\n                  <th\r\n                    className={`font-medium sticky top-0 table${ground}HeaderBackground`}\r\n                    key={`th-${i}`}\r\n                  >\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <div className=\"w-5\"></div>\r\n                      <div className=\"cursor-pointer select-none\" onClick={onOrder(field)}>\r\n                        {field.id}\r\n                      </div>\r\n                      <div className=\"w-5\">\r\n                        {orderBy?.fieldId === field.id ? (\r\n                          <ExpandMoreRounded\r\n                            fontSize=\"small\"\r\n                            className={`${\r\n                              orderBy?.direction === \"asc\" ? \"transform rotate-180\" : \"\"\r\n                            }`}\r\n                          ></ExpandMoreRounded>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {docs.map((doc, i) =>\r\n                blackList.includes(doc.docId) ? null : (\r\n                  <tr\r\n                    onClick={() =>\r\n                      onPick ? selectHandler(doc.docId, !selected.includes(doc.docId)) : onEdit(doc)\r\n                    }\r\n                    key={`row-${i}`}\r\n                    className={`cursor-pointer table${ground}RowHoverTextColor table${ground}RowHoverBackground`}\r\n                  >\r\n                    <td className=\"px-1\" onClick={(e) => e.stopPropagation()}>\r\n                      <Checkbox\r\n                        size=\"small\"\r\n                        classes={{ checked: \"primaryTextColor\", root: \"p-0\" }}\r\n                        checked={selected.includes(doc.docId)}\r\n                        onChange={(e) => selectHandler(doc.docId, e.target.checked)}\r\n                      ></Checkbox>\r\n                    </td>\r\n                    {fields.map((field, j) => (\r\n                      <td key={`row-${i}-col-${j}`} className=\"px-2\">\r\n                        {doc[field.id] != null ? (\r\n                          field.type === \"media\" ? (\r\n                            field.mediaSingle ? (\r\n                              <FilesCell file={doc[field.id]}></FilesCell>\r\n                            ) : (\r\n                              <FilesCell files={doc[field.id]} />\r\n                            )\r\n                          ) : (\r\n                            <div className=\"whitespace-nowrap\">\r\n                              {formatValue(field, doc[field.id])}\r\n                            </div>\r\n                          )\r\n                        ) : null}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                )\r\n              )}\r\n              <tr>\r\n                <td colSpan={fields.length + 1}>\r\n                  <InView\r\n                    onChange={async (inView) => {\r\n                      setEndIsInView(inView);\r\n                    }}\r\n                  >\r\n                    <div className=\"w-full\"></div>\r\n                  </InView>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          <div></div>\r\n        </SimpleBar>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import Modal from \"@mui/material/Modal\";\r\nimport Input from \"components/Input\";\r\nimport Select from \"components/Select\";\r\nimport Button from \"components/Button\";\r\nimport { CollectionType } from \"api/collectionTypes\";\r\nimport React from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport Label from \"components/Label\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface AddFilterModalProps {\r\n  collectionType: Pick<CollectionType, \"fields\">;\r\n  onValue: Function;\r\n  ground: GroundType;\r\n}\r\n\r\nconst AddFilterModal: React.FC<AddFilterModalProps> = ({ collectionType, onValue, ground }) => {\r\n  const operators = [\r\n    \"<\",\r\n    \"<=\",\r\n    \"==\",\r\n    \">\",\r\n    \">=\",\r\n    \"!=\",\r\n    \"array-contains\",\r\n    \"array-contains-any\",\r\n    \"in\",\r\n    \"not-in\",\r\n  ];\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const { values, errors, handleChange, submitCount, handleSubmit, isSubmitting } = useFormik({\r\n    onSubmit: async (vals, { resetForm }) => {\r\n      onValue(vals);\r\n      setOpen(false);\r\n      resetForm();\r\n    },\r\n    initialValues: {\r\n      value: \"\",\r\n      operator: \"\",\r\n      fieldId: \"\",\r\n    },\r\n    validate: (vals: any) => {\r\n      let errors: any = {};\r\n      Object.keys(vals).forEach((x) => {\r\n        if (!vals[x]) {\r\n          errors[x] = \"Required\";\r\n        }\r\n      });\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => setOpen(true)}\r\n        className=\"secondaryBackground buttonSecondaryTextColor min-w-unset flex items-center justify-center h-28px px-7 rounded text-sm mr-3 mb-3\"\r\n      >\r\n        Filters\r\n      </Button>\r\n      {!open ? null : (\r\n        <Modal open={open}>\r\n          <div\r\n            className=\"fixed left-0 top-0 w-full h-full flex p-7\"\r\n            onMouseDown={() => setOpen(false)}\r\n          >\r\n            <div\r\n              onMouseDown={(e) => e.stopPropagation()}\r\n              className=\"bg-white rounded p-7 m-auto relative animate-littlemoveup\"\r\n              style={{ maxWidth: 600 }}\r\n            >\r\n              <CloseRounded\r\n                className=\"absolute top-0 right-0 cursor-pointer\"\r\n                onClick={() => setOpen(false)}\r\n              ></CloseRounded>\r\n              <div className=\"flex flex-wrap -mx-2 mb-4\">\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    ground=\"Dialog\"\r\n                    className=\"mb-2\"\r\n                    error={submitCount > 0 ? errors.fieldId : null}\r\n                  >\r\n                    Field\r\n                  </Label>\r\n                  <Select\r\n                    className=\"h-34px\"\r\n                    ground=\"Dialog\"\r\n                    name=\"fieldId\"\r\n                    onChange={handleChange}\r\n                    value={values.fieldId}\r\n                    options={[\r\n                      { value: \"\", label: \"Select\" },\r\n                      ...collectionType.fields.map((x) => ({ value: x.id, label: x.id })),\r\n                    ]}\r\n                  ></Select>\r\n                </div>\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    ground=\"Dialog\"\r\n                    className=\"mb-2\"\r\n                    error={submitCount > 0 ? errors.operator : null}\r\n                  >\r\n                    Operator\r\n                  </Label>\r\n                  <Select\r\n                    className=\"h-34px\"\r\n                    ground=\"Dialog\"\r\n                    name=\"operator\"\r\n                    onChange={handleChange}\r\n                    value={values.operator}\r\n                    options={[\r\n                      { value: \"\", label: \"Select\" },\r\n                      ...operators.map((x) => ({ value: x, label: x })),\r\n                    ]}\r\n                  ></Select>\r\n                </div>\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    ground=\"Dialog\"\r\n                    className=\"mb-2 text-black\"\r\n                    error={submitCount > 0 ? errors.value : null}\r\n                  >\r\n                    Value\r\n                  </Label>\r\n                  <Input\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === \"Enter\") {\r\n                        e.preventDefault();\r\n                        handleSubmit();\r\n                      }\r\n                    }}\r\n                    ground=\"Dialog\"\r\n                    placeholder={\r\n                      [\"in\", \"not in\", \"array-contains-any\"].includes(values.operator)\r\n                        ? \"value, value, value\"\r\n                        : \"value\"\r\n                    }\r\n                    className=\"placeholder-black h-34px\"\r\n                    value={values.value}\r\n                    onChange={handleChange}\r\n                    name=\"value\"\r\n                  ></Input>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex justify-end\">\r\n                <Button\r\n                  disabled={isSubmitting}\r\n                  onClick={() => handleSubmit()}\r\n                  className={`primaryBackground buttonPrimaryTextColor h-28px min-w-unset px-8`}\r\n                >\r\n                  Add\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddFilterModal;\r\n","import { forwardRef } from \"react\";\r\n\r\nconst TooltipChild = forwardRef(function MyComponent(props: any, ref: any) {\r\n  return <div {...props} ref={ref}></div>;\r\n});\r\n\r\nexport default TooltipChild;\r\n","import TooltipChild from \"components/TooltipChild\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\n\r\ninterface MediaFieldProps {\r\n  src: string;\r\n}\r\n\r\nconst MediaField: React.FC<MediaFieldProps> = ({ src }) => {\r\n  return (\r\n    <Tooltip\r\n      arrow\r\n      title={\r\n        <div className=\"p-1\">\r\n          <img src={src} className=\"max-w-136px max-h-136px w-auto h-auto\" alt=\"\" />\r\n        </div>\r\n      }\r\n      placement=\"top\"\r\n      classes={{\r\n        tooltip: \"font-poppins text-xs p-0 rounded bg-fireck-1\",\r\n        arrow: \"text-fireck-1\",\r\n      }}\r\n    >\r\n      <TooltipChild>\r\n        <div className=\"group w-4 h-4 relative flex items-center justify-center rounded hover:bg-gray-535371 hover:bg-opacity-5 cursor-pointer\">\r\n          <div\r\n            className=\"relative w-4 h-4 rounded-full bg-center bg-cover pointer-events-none\"\r\n            style={{ backgroundImage: `url(${src})` }}\r\n          ></div>\r\n        </div>\r\n      </TooltipChild>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default MediaField;\r\n","import React from \"react\";\r\nimport MediaField from \"./MediaField\";\r\n\r\nexport interface FilesProps {\r\n  files?: string[];\r\n  file?: string;\r\n}\r\n\r\nconst Files: React.FC<FilesProps> = ({ files, file }) => {\r\n  const id = React.useRef<number>(Math.random());\r\n\r\n  return (\r\n    <div className=\"flex justify-center\">\r\n      {(files ? files : file ? [file] : []).slice(0, 4).map((f, i) => (\r\n        <div key={`${id}-file-${i}`} className=\"mr-0.5\">\r\n          <MediaField src={f}></MediaField>\r\n        </div>\r\n      ))}\r\n      {files && files.length > 4 ? (\r\n        <div className=\"relative\">\r\n          <div className=\"w-4 h-4 rounded-full bg-fireck-4 text-10px flex items-center justify-center\">\r\n            {files.length - 4}+\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Files;\r\n","import classNames from \"classnames\";\r\n\r\nexport interface PageTitleProps\r\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ className, ...rest }) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={classNames(\"text-27px font-medium capitalize leading-none\", className)}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default PageTitle;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSubcollection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 11,\n    viewBox: \"0 0 19 19\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.570312 0.778809H6.57031V4.77881H0.570312V0.778809ZM12.5703 7.77881H18.5703V11.7788H12.5703V7.77881ZM12.5703 14.7788H18.5703V18.7788H12.5703V14.7788ZM10.5703 10.7788H4.57031V15.7788H10.5703V17.7788H4.57031H2.57031V6.77881H4.57031V8.77881H10.5703V10.7788Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSubcollection);\nexport default __webpack_public_path__ + \"static/media/subcollection.fddc67b1.svg\";\nexport { ForwardRef as ReactComponent };","interface WrapperProps {}\r\n\r\nconst Wrapper: React.FC<WrapperProps> = (props) => {\r\n  return (\r\n    <div\r\n      {...props}\r\n      className=\"w-8 rounded h-5 primaryBackground text-center flex justify-center items-center text-10px font-medium\"\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default Wrapper;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst String: React.FC = () => {\r\n  return <Wrapper>Ab</Wrapper>;\r\n};\r\n\r\nexport default String;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Number: React.FC = () => {\r\n  return <Wrapper>123</Wrapper>;\r\n};\r\n\r\nexport default Number;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Map: React.FC = () => {\r\n  return <Wrapper>{\"{ }\"}</Wrapper>;\r\n};\r\n\r\nexport default Map;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Array: React.FC = () => {\r\n  return <Wrapper>[ ]</Wrapper>;\r\n};\r\n\r\nexport default Array;\r\n","import ToggleOnOutlinedIcon from \"@material-ui/icons/ToggleOnOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <ToggleOnOutlinedIcon fontSize=\"inherit\" className=\"text-lg\"></ToggleOnOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import CalendarTodayOutlinedIcon from \"@material-ui/icons/CalendarTodayOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <CalendarTodayOutlinedIcon fontSize=\"inherit\" className=\"text-sm\"></CalendarTodayOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import PanoramaOutlinedIcon from \"@material-ui/icons/PanoramaOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <PanoramaOutlinedIcon fontSize=\"inherit\" className=\"text-base\"></PanoramaOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import NotesIcon from \"@material-ui/icons/Notes\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <NotesIcon fontSize=\"inherit\" className=\"text-base\"></NotesIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <span className=\"text-10px\">JSON</span>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import ListRounded from \"@material-ui/icons/ListRounded\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Enum: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <ListRounded fontSize=\"inherit\" className=\"text-xl\"></ListRounded>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Enum;\r\n","import VpnKeyRounded from \"@material-ui/icons/VpnKeyRounded\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Password: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <VpnKeyRounded fontSize=\"inherit\" className=\"text-base\"></VpnKeyRounded>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import Link from \"@material-ui/icons/Link\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Relation: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <Link fontSize=\"inherit\" className=\"text-lg\"></Link>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Relation;\r\n","import { ReactComponent as SubColIcon } from \"assets/subcollection.svg\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <SubColIcon className=\"m-auto\"></SubColIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import Wrapper from \"./Wrapper\";\r\nimport AllInclusive from \"@mui/icons-material/AllInclusive\";\r\n\r\nconst Array: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <AllInclusive fontSize=\"inherit\" className=\"text-base\"></AllInclusive>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Array;\r\n","import classNames from \"classnames\";\r\nimport { TextareaHTMLAttributes } from \"react\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface TextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {\r\n  className?: string;\r\n  ground: GroundType;\r\n}\r\n\r\nconst Textarea: React.FC<TextareaProps> = ({ className = \"\", ground, ...rest }) => {\r\n  return (\r\n    <textarea\r\n      {...rest}\r\n      className={classNames(\r\n        \"border-2 rounded px-3 py-2 w-full min-h-208px outline-none\",\r\n        className,\r\n        `input${ground}Background input${ground}HoverBackground input${ground}HoverTextColor input${ground}FocusedBorderColor input${ground}FocusedBackground input${ground}FocusedTextColor`\r\n      )}\r\n    ></textarea>\r\n  );\r\n};\r\n\r\nexport default Textarea;\r\n","import { AnyField, StringField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport Textarea from \"components/Textarea\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface FieldComponentProps<T> {\r\n  value: any;\r\n  onValue: (val: any) => void;\r\n  ground: GroundType;\r\n  name: string;\r\n  field: T;\r\n  level: number;\r\n}\r\n\r\nconst String: React.FC<FieldComponentProps<StringField>> = ({\r\n  field,\r\n  ground,\r\n  value,\r\n  onValue,\r\n  name,\r\n}) => {\r\n  return field.stringLong ? (\r\n    <Textarea\r\n      ground={ground}\r\n      value={value}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      name={name}\r\n    ></Textarea>\r\n  ) : (\r\n    <Input\r\n      ground={ground}\r\n      className=\"h-28px\"\r\n      type=\"text\"\r\n      value={value}\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default String;\r\n","import { UnControlled as CodeMirror } from \"react-codemirror2\";\r\nimport React from \"react\";\r\nimport \"codemirror/lib/codemirror.css\";\r\nimport \"codemirror/theme/material.css\";\r\nimport \"codemirror/addon/edit/closebrackets\";\r\nimport \"codemirror/mode/javascript/javascript\";\r\nimport \"codemirror/addon/lint/lint\";\r\nimport \"codemirror/addon/lint/lint.css\";\r\nrequire(\"codemirror/addon/lint/json-lint\");\r\ndeclare const window: any;\r\nconst jsonlint = require(\"jsonlint-mod\");\r\nwindow.jsonlint = jsonlint;\r\n\r\nexport interface JsonEditorProps {\r\n  value: string;\r\n  onChange: (val: string) => void;\r\n}\r\n\r\nconst JsonEditor: React.FC<JsonEditorProps> = ({ value, onChange }) => {\r\n  const [initialValue, setInitialValue] = React.useState(\"\");\r\n  const [count, setCount] = React.useState(0);\r\n  React.useEffect(() => {\r\n    if (count < 3) {\r\n      setCount((prev) => prev + 1);\r\n      setInitialValue(JSON.stringify(value, undefined, 2));\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [value]);\r\n  return (\r\n    <>\r\n      <style>{`.CodeMirror{\r\n          height: 100% !important;\r\n      }`}</style>\r\n      <CodeMirror\r\n        className=\"rounded overflow-auto h-208px\"\r\n        value={initialValue}\r\n        options={{\r\n          mode: \"application/json\",\r\n          theme: \"material\",\r\n          lineNumbers: true,\r\n          autoCloseBrackets: true,\r\n          lint: true,\r\n          gutters: [\"CodeMirror-lint-markers\"],\r\n        }}\r\n        onChange={(editor, data, value) => {\r\n          try {\r\n            onChange(JSON.parse(value));\r\n          } catch (er) {\r\n            onChange(value);\r\n          }\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default JsonEditor;\r\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMedia(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 42,\n    height: 42,\n    viewBox: \"0 0 42 42\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M35.0859 0.75H7.58594C5.76257 0.75 4.01389 1.47433 2.72458 2.76364C1.43527 4.05295 0.710938 5.80164 0.710938 7.625V35.125C0.710938 36.9484 1.43527 38.697 2.72458 39.9864C4.01389 41.2757 5.76257 42 7.58594 42H35.0859C36.9093 42 38.658 41.2757 39.9473 39.9864C41.2366 38.697 41.9609 36.9484 41.9609 35.125V7.625C41.9609 5.80164 41.2366 4.05295 39.9473 2.76364C38.658 1.47433 36.9093 0.75 35.0859 0.75ZM7.58594 5.33333H35.0859C35.6937 5.33333 36.2766 5.57478 36.7064 6.00455C37.1362 6.43432 37.3776 7.01721 37.3776 7.625V26.7833L30.0443 20.5271C28.9081 19.5922 27.4823 19.081 26.0109 19.081C24.5395 19.081 23.1138 19.5922 21.9776 20.5271L5.29427 34.4375V7.625C5.29427 7.01721 5.53571 6.43432 5.96549 6.00455C6.39526 5.57478 6.97815 5.33333 7.58594 5.33333V5.33333Z\",\n    fill: \"currentColor\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.1694 16.7915C14.0679 16.7915 15.6069 15.2525 15.6069 13.354C15.6069 11.4555 14.0679 9.9165 12.1694 9.9165C10.271 9.9165 8.73193 11.4555 8.73193 13.354C8.73193 15.2525 10.271 16.7915 12.1694 16.7915Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMedia);\nexport default __webpack_public_path__ + \"static/media/media.6d37b55b.svg\";\nexport { ForwardRef as ReactComponent };","import { SimpleField } from \"api/collectionTypes\";\r\nimport JsonEditor from \"components/JsonEditor\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Any: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue }) => {\r\n  return <JsonEditor value={value} onChange={(val) => onValue(val)}></JsonEditor>;\r\n};\r\n\r\nexport default Any;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Number: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue, ground, name }) => {\r\n  return (\r\n    <Input\r\n      ground={ground}\r\n      className=\"h-28px\"\r\n      type=\"number\"\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      value={value}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default Number;\r\n","import { GroundType } from \"utils/types\";\r\n\r\nexport interface SwitchProps {\r\n  value: boolean;\r\n  onChange: (value: boolean) => void;\r\n  ground: GroundType;\r\n}\r\n\r\nconst CustomSwitch: React.FC<SwitchProps> = ({ value, onChange, ground }) => {\r\n  return (\r\n    <div\r\n      onClick={() => onChange(!value)}\r\n      className={`h-28px w-16 relative transition-all flex items-center rounded-full cursor-pointer ${\r\n        value ? \"primaryBackground \" : `input${ground}Background`\r\n      }`}\r\n    >\r\n      <div className=\"p-1\">\r\n        <div\r\n          className={`w-6 h-6 relative rounded-full bg-white transition transform ${\r\n            value ? \"translate-x-8\" : \"tenslate-x-0\"\r\n          }`}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomSwitch;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Switch from \"components/Switch\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Boolean: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue, ground }) => {\r\n  return <Switch ground={ground} value={value} onChange={(val) => onValue(val)}></Switch>;\r\n};\r\n\r\nexport default Boolean;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Date: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue, ground, name }) => {\r\n  return (\r\n    <Input\r\n      ground={ground}\r\n      className=\"h-28px\"\r\n      type=\"date\"\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      value={value}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default Date;\r\n","import ButtonBase from \"@mui/material/ButtonBase\";\r\nimport React from \"react\";\r\nimport { uploadFile } from \"api/files\";\r\nimport Button from \"components/Button\";\r\nimport AddRounded from \"@mui/icons-material/AddRounded\";\r\nimport ExpandLessRounded from \"@mui/icons-material/ExpandLessRounded\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport CollectionTable from \"components/TableElements/CollectionTable\";\r\nimport { MediaDocumentFormatters } from \".\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\n\r\nexport interface SelectMediaProps {\r\n  multiple?: boolean;\r\n  proceed: Function;\r\n}\r\n\r\nconst SelectMedia: React.FC<SelectMediaProps> = ({ multiple = false, proceed }) => {\r\n  const uploadRef = React.useRef(null as any);\r\n  const topRef = React.useRef(null as any);\r\n  const [loading, setLoading] = React.useState<boolean | string>(false);\r\n  const [isTopVisible, setIsTopVisible] = React.useState(false);\r\n  const [refreshCounter, setCounter] = React.useState(0);\r\n\r\n  const { collectionType } = useSelector((state: RootState) => {\r\n    return {\r\n      collectionType: state.collectionTypes.find((x) => x.id === \"FilesReservedCollection\"),\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"fixed z-30 left-0 top-0 w-full h-full flex overflow-auto dialogOuterBackground\">\r\n      <div className=\"m-auto p-8 rounded dialogBackground dialogTextColor max-w-846px w-full max-h-552px h-full relative flex-col flex animate-littlemoveup\">\r\n        {!isTopVisible ? (\r\n          <ButtonBase\r\n            className=\"z-30 absolute shadow-2xl outline-none right-6 bottom-3 w-34px h-34px rounded flex cursor-pointer text-black bg-orange-300 hover:bg-orange-301 items-center justify-center\"\r\n            onClick={() => topRef.current.scrollIntoView({ behavior: \"smooth\" })}\r\n          >\r\n            <ExpandLessRounded></ExpandLessRounded>\r\n          </ButtonBase>\r\n        ) : null}\r\n        <CloseRounded\r\n          className=\"absolute top-0 right-0 cursor-pointer\"\r\n          onClick={() => proceed(false)}\r\n        ></CloseRounded>\r\n        <InView onChange={(inView) => setIsTopVisible(inView)}>\r\n          <div ref={topRef}></div>\r\n        </InView>\r\n        <div className=\"flex justify-between flex-wrap mb-7\">\r\n          <div className=\"font-medium text-2xl leading-none mb-4 mr-4\">Select file</div>\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            className=\"hidden\"\r\n            ref={uploadRef}\r\n            onChange={async (e) => {\r\n              const files = e.target.files;\r\n              if (files && files.length) {\r\n                setLoading(`Uploading ${files.length} file${files.length > 1 ? \"s\" : \"\"}...`);\r\n                let uploaded = 0;\r\n                for (let file of files) {\r\n                  const res = await uploadFile(file);\r\n                  uploaded++;\r\n\r\n                  setLoading(`${uploaded}/${files.length} uploaded.`);\r\n                }\r\n                setCounter((prev) => prev + 1);\r\n                setLoading(false);\r\n              }\r\n            }}\r\n          />\r\n          <Button\r\n            onClick={() => uploadRef.current.click()}\r\n            className=\"primaryBackground buttonPrimaryTextColor h-28px mb-4 min-w-unset\"\r\n          >\r\n            <div className=\"flex items-center\">\r\n              <AddRounded className=\"mr-2 text-lg\" fontSize=\"inherit\"></AddRounded>\r\n              <span>Upload</span>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n        <div className=\"flex-grow h-0\">\r\n          {!collectionType ? null : (\r\n            <CollectionTable\r\n              ground=\"Dialog\"\r\n              key={`media-table-${refreshCounter}`}\r\n              onPick={(files) => {\r\n                proceed(multiple ? files.map((f) => f.url) : files[0].url);\r\n              }}\r\n              singleSelect={!multiple}\r\n              collectionType={collectionType}\r\n              valueFormatters={MediaDocumentFormatters}\r\n            ></CollectionTable>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectMedia;\r\n\r\nexport const callMedia = (multiple = false) => {\r\n  return callComponent<SelectMediaProps, string | boolean>({\r\n    Component: SelectMedia,\r\n    props: { multiple },\r\n  });\r\n};\r\n","import Button from \"components/Button\";\r\nimport React from \"react\";\r\nimport DragIndicatorRounded from \"@mui/icons-material/DragIndicatorRounded\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\nimport OpenInNew from \"@mui/icons-material/OpenInNew\";\r\nimport DeleteIcon from \"@mui/icons-material/DeleteOutlineOutlined\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\nimport DraggableList from \"./DraggableList\";\r\n\r\nexport interface ReorderSelectedFilesProps {\r\n  selectedFiles: string[];\r\n  setSelectedFiles: Function;\r\n  onClose: () => void;\r\n}\r\n\r\nconst reorder = (list: any[], startIndex: number, endIndex: number) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst ReorderSelectedFiles: React.FC<ReorderSelectedFilesProps> = ({\r\n  selectedFiles,\r\n  setSelectedFiles,\r\n  onClose,\r\n}) => {\r\n  const onDragEnd = (result: any) => {\r\n    // dropped outside the list\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    const items = reorder(selectedFiles, result.source.index, result.destination.index);\r\n\r\n    setSelectedFiles(items);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed z-30 left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40 p-7\"\r\n      onMouseDown={onClose}\r\n    >\r\n      <div\r\n        onMouseDown={(e) => e.stopPropagation()}\r\n        className=\"m-auto rounded bg-white max-w-552px w-full max-h-552px relative flex-col flex animate-littlemoveup\"\r\n      >\r\n        <CloseRounded\r\n          className=\"absolute right-0 top-0 cursor-pointer\"\r\n          onClick={onClose}\r\n        ></CloseRounded>\r\n        <div className=\"flex justify-between flex-wrap mb-4 px-9 pt-9 flex-shrink-0\">\r\n          <div className=\"font-medium text-2xl mr-4 mb-4\">Reorder files</div>\r\n          <Button className=\"mb-4 bg-fireck-4 hover:bg-fireck-4-hover\" onClick={onClose}>\r\n            Finish\r\n          </Button>\r\n        </div>\r\n        <DraggableList\r\n          onDragEnd={onDragEnd}\r\n          containerClassName=\"px-9 pb-9 flex-grow overflow-auto\"\r\n          items={selectedFiles.map((x) => ({ item: x }))}\r\n          Item={({ item, index }: { item: string; index: number }) => {\r\n            return (\r\n              <div className=\"pb-3\">\r\n                <div className=\"bg-gray-300 flex items-center rounded p-2 justify-between\">\r\n                  <div className=\"flex items-center\">\r\n                    <DragIndicatorRounded className=\"mr-4\" />\r\n                    <div className=\"bg-fireck-5 rounded\">\r\n                      <div\r\n                        className=\"bg-center bg-cover bg-no-repeat w-11 h-11\"\r\n                        style={{ backgroundImage: `url(${item})` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex\">\r\n                    <ButtonBase\r\n                      onClick={() => window.open(item, \"_blank\")}\r\n                      className=\"outline-none mr-2 h-26px w-26px rounded bg-fireck-4 hover:bg-fireck-4-hover\"\r\n                    >\r\n                      <OpenInNew fontSize=\"small\"></OpenInNew>\r\n                    </ButtonBase>\r\n                    <ButtonBase className=\"outline-none h-26px w-26px rounded bg-fireck-4 hover:bg-fireck-4-hover\">\r\n                      <DeleteIcon\r\n                        fontSize=\"small\"\r\n                        onClick={() => {\r\n                          let arr = [...selectedFiles];\r\n                          arr.splice(index, 1);\r\n                          setSelectedFiles(arr);\r\n                        }}\r\n                      ></DeleteIcon>\r\n                    </ButtonBase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          }}\r\n        ></DraggableList>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReorderSelectedFiles;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgColor(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 19,\n    height: 18,\n    viewBox: \"0 0 19 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.0025 12C16.0025 12 14.0025 14.17 14.0025 15.5C14.0025 16.0304 14.2132 16.5391 14.5883 16.9142C14.9634 17.2893 15.4721 17.5 16.0025 17.5C16.5329 17.5 17.0416 17.2893 17.4167 16.9142C17.7918 16.5391 18.0025 16.0304 18.0025 15.5C18.0025 14.17 16.0025 12 16.0025 12ZM2.2125 10.5L7.0025 5.71L11.7925 10.5H2.2125ZM13.5625 9.44L4.6225 0.5L3.2125 1.91L5.5925 4.29L0.4425 9.44C-0.1475 10 -0.1475 10.97 0.4425 11.56L5.9425 17.06C6.2325 17.35 6.6225 17.5 7.0025 17.5C7.3825 17.5 7.7725 17.35 8.0625 17.06L13.5625 11.56C14.1525 10.97 14.1525 10 13.5625 9.44Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgColor);\nexport default __webpack_public_path__ + \"static/media/color.ef806ebd.svg\";\nexport { ForwardRef as ReactComponent };","import PhotoLibrary from \"@mui/icons-material/PhotoLibrary\";\r\nimport React from \"react\";\r\nimport ArrowBackIosRounded from \"@mui/icons-material/ArrowBackIosRounded\";\r\nimport ArrowForwardIosRounded from \"@mui/icons-material/ArrowForwardIosRounded\";\r\nimport AddRounded from \"@mui/icons-material/AddRounded\";\r\nimport EditRounded from \"@mui/icons-material/EditRounded\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport SelectMedia, { SelectMediaProps } from \"pages/Media/SelectMedia\";\r\nimport ReorderSelectedFiles from \"components/ReorderSelectedFiles\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport { ReactComponent as MediaIcon } from \"assets/media.svg\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface MediaInputProps {\r\n  selectedFiles: string[];\r\n  setSelectedFiles: Function;\r\n  ground: GroundType;\r\n}\r\n\r\nconst MediaInput: React.FC<MediaInputProps> = ({ selectedFiles, setSelectedFiles, ground }) => {\r\n  const [activeIndex, setActiveIndex] = React.useState(0);\r\n  const [openReordering, setOpenReordering] = React.useState(false);\r\n\r\n  const selectFiles = async () => {\r\n    const res = await callComponent<SelectMediaProps, string[] | boolean>({\r\n      Component: SelectMedia,\r\n      props: { multiple: true },\r\n    });\r\n\r\n    if (typeof res !== \"boolean\") {\r\n      const prevFiles = [...selectedFiles];\r\n      setSelectedFiles([...res, ...prevFiles]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`h-208px input${ground}Background rounded-md relative`}>\r\n      {!selectedFiles.length ? (\r\n        <div className=\"flex w-full h-full cursor-pointer relative z-10\" onClick={selectFiles}>\r\n          <div className=\"m-auto flex items-center\">\r\n            <MediaIcon className=\"text-39px mr-3 primaryTextColor\" fontSize=\"inherit\"></MediaIcon>\r\n            <div>Upload multiple files</div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n      {selectedFiles.map((x, i) => (\r\n        <>\r\n          <div\r\n            className={`absolute left-0 top-0 w-full h-full bg-center bg-contain bg-no-repeat ${\r\n              i !== activeIndex ? \"hidden\" : \"\"\r\n            }`}\r\n            style={{ backgroundImage: `url(${x})` }}\r\n          ></div>\r\n          <img src={x} alt=\"\" className=\"hidden\"></img>\r\n        </>\r\n      ))}\r\n      {selectedFiles.length ? (\r\n        <div className=\"absolute left-0 top-0 w-full h-full\">\r\n          <div className=\"relative flex items-center justify-between h-full\">\r\n            <div className=\"absolute left-0 top-0 p-3\">\r\n              <div className=\"h-26px rounded primaryBackground px-3 text-sm leading-26px\">\r\n                {activeIndex + 1}/{selectedFiles.length}\r\n              </div>\r\n            </div>\r\n            <div className=\"absolute top-0 right-0 flex p-3\">\r\n              <ButtonBase\r\n                onClick={selectFiles}\r\n                className=\"outline-none h-26px w-26px mr-2 rounded primaryBackground buttonPrimaryTextColor\"\r\n              >\r\n                <AddRounded fontSize=\"small\"></AddRounded>\r\n              </ButtonBase>\r\n              <ButtonBase\r\n                onClick={() => {\r\n                  setOpenReordering(true);\r\n                }}\r\n                className=\"outline-none h-26px w-26px rounded primaryBackground buttonPrimaryTextColor\"\r\n              >\r\n                <EditRounded fontSize=\"small\"></EditRounded>\r\n              </ButtonBase>\r\n              <Modal open={openReordering}>\r\n                <ReorderSelectedFiles\r\n                  onClose={() => setOpenReordering(false)}\r\n                  selectedFiles={selectedFiles}\r\n                  setSelectedFiles={(files: string[]) => {\r\n                    setActiveIndex(0);\r\n                    setSelectedFiles(files);\r\n                  }}\r\n                ></ReorderSelectedFiles>\r\n              </Modal>\r\n            </div>\r\n            <ButtonBase\r\n              className=\"primaryBackground buttonPrimaryTextColor p-4 outline-none\"\r\n              onClick={() => setActiveIndex((prev) => (prev > 0 ? prev - 1 : prev))}\r\n            >\r\n              <ArrowBackIosRounded></ArrowBackIosRounded>\r\n            </ButtonBase>\r\n            <ButtonBase\r\n              className=\"primaryBackground buttonPrimaryTextColor p-4 outline-none\"\r\n              onClick={() =>\r\n                setActiveIndex((prev) => (prev < selectedFiles.length - 1 ? prev + 1 : prev))\r\n              }\r\n            >\r\n              <ArrowForwardIosRounded></ArrowForwardIosRounded>\r\n            </ButtonBase>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaInput;\r\n","import React from \"react\";\r\nimport DeleteRounded from \"@mui/icons-material/DeleteOutlineOutlined\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport SelectMedia, { SelectMediaProps } from \"pages/Media/SelectMedia\";\r\nimport { ReactComponent as MediaIcon } from \"assets/media.svg\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface SingleMediaInputProps {\r\n  selectedFile: string;\r\n  setSelectedFile: Function;\r\n  ground: GroundType;\r\n}\r\n\r\nconst SingleMediaInput: React.FC<SingleMediaInputProps> = ({\r\n  selectedFile,\r\n  setSelectedFile,\r\n  ground,\r\n}) => {\r\n  return (\r\n    <div className={`h-208px input${ground}Background rounded-md relative`}>\r\n      {!selectedFile ? (\r\n        <div\r\n          className=\"flex w-full h-full cursor-pointer relative z-10\"\r\n          onClick={async () => {\r\n            const res = await callComponent<SelectMediaProps, string | boolean>({\r\n              Component: SelectMedia,\r\n              props: { multiple: false },\r\n            });\r\n\r\n            if (typeof res !== \"boolean\") {\r\n              setSelectedFile(res);\r\n            }\r\n          }}\r\n        >\r\n          <div className=\"m-auto flex items-center\">\r\n            <MediaIcon className=\"text-39px mr-3 primaryTextColor\" fontSize=\"inherit\"></MediaIcon>\r\n            <div>Upload a file</div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n\r\n      <div\r\n        className=\"absolute left-0 top-0 w-full h-full bg-center bg-contain bg-no-repeat\"\r\n        style={{ backgroundImage: `url(${selectedFile})` }}\r\n      ></div>\r\n      {selectedFile ? (\r\n        <div className=\"absolute top-0 right-0 flex p-3\">\r\n          <ButtonBase\r\n            onClick={() => setSelectedFile(\"\")}\r\n            className=\"outline-none h-26px w-26px rounded primaryBackground buttonPrimaryTextColor\"\r\n          >\r\n            <DeleteRounded fontSize=\"small\"></DeleteRounded>\r\n          </ButtonBase>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleMediaInput;\r\n","import { MediaField } from \"api/collectionTypes\";\r\nimport MultipleMediaInput from \"components/MultipleMediaInput\";\r\nimport SingleMediaInput from \"components/SingleMediaInput\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Media: React.FC<FieldComponentProps<MediaField>> = ({ value, onValue, field, ground }) => {\r\n  return field.mediaSingle ? (\r\n    <SingleMediaInput\r\n      ground={ground}\r\n      selectedFile={value}\r\n      setSelectedFile={(file: string) => onValue(file)}\r\n    ></SingleMediaInput>\r\n  ) : (\r\n    <MultipleMediaInput\r\n      ground={ground}\r\n      selectedFiles={value}\r\n      setSelectedFiles={(files: string[]) => onValue(files)}\r\n    ></MultipleMediaInput>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import MdEditor from \"react-markdown-editor-lite\";\r\nimport \"react-markdown-editor-lite/lib/index.css\";\r\nimport MarkdownIt from \"markdown-it\";\r\nimport SelectMedia, { SelectMediaProps } from \"pages/Media/SelectMedia\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport { GroundType } from \"utils/types\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport interface RichTextProps {\r\n  style?: React.CSSProperties;\r\n  onChange: (a: string) => void;\r\n  value: string;\r\n  ground: GroundType;\r\n}\r\n\r\nconst RichText: React.FC<RichTextProps> = ({ style = {}, onChange, value, ground }) => {\r\n  const mdParser = new MarkdownIt();\r\n\r\n  useEffect(() => {\r\n    let els = document.getElementsByClassName(\"rc-md-editor\");\r\n    for (var el of els) {\r\n      el.classList.add(`input${ground}Background`, `input${ground}TextColor`);\r\n    }\r\n  }, [ground]);\r\n\r\n  return (\r\n    <div>\r\n      <style>{`.rc-md-navigation .button-wrap .button {\r\n        background-color: white !important;\r\n        border-radius: 4px !important;\r\n        margin-bottom: 2px !important;\r\n        margin-top: 2px !important;\r\n      }\r\n\r\n      .rc-md-navigation{\r\n        border-bottom: none !important;\r\n        background-color: transparent !important;\r\n        margin-bottom: 4px;\r\n      }\r\n\r\n      .rc-md-editor{\r\n        border: none !important;\r\n        padding: 7px !important;\r\n        border-radius: 4px !important;\r\n      } \r\n\r\n      .rc-md-editor textarea{\r\n        background-color: transparent !important;\r\n        // border-radius: 4px !important;\r\n        overflow: auto !important;\r\n        border-right: 1px solid #DDDDDD !important;\r\n      }\r\n\r\n      \r\n      \r\n      `}</style>\r\n      <MdEditor\r\n        placeholder=\"Type here...\"\r\n        onCustomImageUpload={(e) => {\r\n          return new Promise(async (resolve, reject) => {\r\n            const res = await callComponent<SelectMediaProps, string | boolean>({\r\n              Component: SelectMedia,\r\n              props: { multiple: false },\r\n            });\r\n\r\n            if (typeof res === \"string\") {\r\n              resolve({ url: res, text: \"image\" });\r\n            } else {\r\n              reject();\r\n            }\r\n          });\r\n        }}\r\n        value={value}\r\n        onChange={({ text }) => onChange(text)}\r\n        style={style}\r\n        renderHTML={(text) => mdParser.render(text)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RichText;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport RichTextEditor from \"components/RichTextEditor\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst RichText: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue, ground }) => {\r\n  return (\r\n    <RichTextEditor\r\n      ground={ground}\r\n      style={{ height: \"30vw\", minHeight: 400 }}\r\n      value={value}\r\n      onChange={(val) => onValue(val)}\r\n    ></RichTextEditor>\r\n  );\r\n};\r\n\r\nexport default RichText;\r\n","import { EnumField } from \"api/collectionTypes\";\r\nimport Select from \"components/Select\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Enum: React.FC<FieldComponentProps<EnumField>> = ({\r\n  value,\r\n  onValue,\r\n  ground,\r\n  name,\r\n  field,\r\n}) => {\r\n  return (\r\n    <Select\r\n      ground={ground}\r\n      options={[\r\n        { label: \"Select\", value: \"\" },\r\n        ...field.enumOptions.map((opt) => ({ label: opt, value: opt })),\r\n      ]}\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      value={value}\r\n    ></Select>\r\n  );\r\n};\r\n\r\nexport default Enum;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Password: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue, ground, name }) => {\r\n  return (\r\n    <Input\r\n      ground={ground}\r\n      className=\"h-28px\"\r\n      type=\"password\"\r\n      value={value}\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import { CollectionType } from \"api/collectionTypes\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getDocument } from \"api/collections\";\r\n\r\ninterface RelationFieldValueProps {\r\n  value: string;\r\n  collectionType: CollectionType | undefined;\r\n  labelField: string;\r\n}\r\n\r\nconst RelationFieldValue: React.FC<RelationFieldValueProps> = (props) => {\r\n  const [valueLabel, setValueLabel] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    console.log(\"called\");\r\n    const { value, labelField, collectionType } = props;\r\n    if (collectionType) {\r\n      (async () => {\r\n        try {\r\n          let res = await getDocument(collectionType.id, value);\r\n          if (!res.error) {\r\n            setValueLabel(res[labelField]);\r\n          }\r\n        } catch (er) {\r\n          console.log(er);\r\n        }\r\n      })();\r\n    }\r\n  }, [props, valueLabel]);\r\n\r\n  return <>{valueLabel}</>;\r\n};\r\n\r\nexport default RelationFieldValue;\r\n","import { RelationField as RelationFieldType } from \"api/collectionTypes\";\r\nimport React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport CollectionTable from \"./TableElements/CollectionTable\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport IconButton from \"./IconButton\";\r\nimport Link from \"@mui/icons-material/Link\";\r\nimport AddRounded from \"@mui/icons-material/AddRounded\";\r\nimport { ReactComponent as OneToOneIcon } from \"assets/one-to-one.svg\";\r\nimport { ReactComponent as OneToManyIcon } from \"assets/one-to-many.svg\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport DeleteOutlineOutlined from \"@mui/icons-material/DeleteOutlineOutlined\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport RelationFieldValue from \"components/RelationFieldValue\";\r\nimport { GroundType } from \"utils/types\";\r\nimport { uncapitalize } from \"helper\";\r\n\r\nexport interface RelationFieldProps {\r\n  fieldType: RelationFieldType;\r\n  value: string[] | string;\r\n  onValue: (a: string[] | string) => void;\r\n  ground: GroundType;\r\n}\r\n\r\nconst RelationField: React.FC<RelationFieldProps> = ({ fieldType, value, onValue, ground }) => {\r\n  const collectionType = useSelector((state: RootState) =>\r\n    state.collectionTypes.find((x) => x.docId === fieldType.relatedCollectionTypeDocId)\r\n  );\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  return (\r\n    <div className={`rounded p-5 ${uncapitalize(ground)}ContainerBackground`}>\r\n      <div className=\"flex flex-wrap justify-between\">\r\n        <div className=\"flex items-center font-medium mb-3 mr-3\">\r\n          <Link className=\"mr-3\" fontSize=\"small\"></Link>\r\n          <div className=\"capitalize mr-3\">{collectionType?.name}</div>\r\n          {fieldType.relationOneToOne ? (\r\n            <div className=\"flex w-8\">\r\n              <OneToOneIcon></OneToOneIcon>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex w-8\">\r\n              <OneToManyIcon></OneToManyIcon>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <IconButton\r\n          onClick={() => setOpen(true)}\r\n          className=\"mb-3 primaryBackground buttonPrimaryTextColor\"\r\n        >\r\n          <AddRounded fontSize=\"small\"></AddRounded>\r\n        </IconButton>\r\n      </div>\r\n\r\n      <Modal open={open}>\r\n        <div\r\n          className=\"fixed left-0 top-0 w-full h-full flex overflow-auto p-12 dialogOuterBackground\"\r\n          onMouseDown={() => setOpen(false)}\r\n        >\r\n          <div\r\n            className=\"p-9 rounded w-full h-full flex flex-col relative dialogBackground dialogTextColor\"\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"absolute right-0 top-0 cursor-pointer\" onClick={() => setOpen(false)}>\r\n              <CloseRounded></CloseRounded>\r\n            </div>\r\n            <div className=\"text-27px font-medium mb-5 capitalize leading-none\">\r\n              {collectionType?.name}\r\n            </div>\r\n            <div className=\"flex-grow h-0\">\r\n              {collectionType ? (\r\n                <CollectionTable\r\n                  ground={ground}\r\n                  collectionType={collectionType}\r\n                  blackList={typeof value === \"string\" ? [value] : value}\r\n                  singleSelect={typeof value === \"string\"}\r\n                  onPick={(docs) => {\r\n                    if (docs.length) {\r\n                      if (typeof value === \"string\") {\r\n                        onValue(docs[0].docId);\r\n                      } else {\r\n                        onValue([...value, ...docs.map((x) => x.docId)]);\r\n                      }\r\n\r\n                      setOpen(false);\r\n                    }\r\n                  }}\r\n                ></CollectionTable>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n      <div className=\"w-full max-h-64 overflow-auto bg-white rounded\">\r\n        {typeof value === \"string\" ? (\r\n          <div className=\"px-1 h-28px bg-white flex items-center justify-between\">\r\n            <span>\r\n              <RelationFieldValue\r\n                value={value}\r\n                collectionType={collectionType}\r\n                labelField={fieldType.labelField}\r\n              ></RelationFieldValue>\r\n            </span>\r\n            {!value ? null : (\r\n              <div\r\n                className=\"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-red-FF0000 hover:text-white\"\r\n                data-testid={`delete-for-field-${fieldType.id}-${value}`}\r\n                onClick={async () => {\r\n                  let res = await confirm({\r\n                    confirmation: \"Remove document?\",\r\n                  });\r\n                  if (res) {\r\n                    onValue(\"\");\r\n                  }\r\n                }}\r\n              >\r\n                <DeleteOutlineOutlined\r\n                  classes={{ root: \"pointer-events-none\" }}\r\n                  fontSize=\"inherit\"\r\n                ></DeleteOutlineOutlined>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <SimpleBar className=\"h-36 scrollbar-light scrollbar-thin\" autoHide={false}>\r\n            {value.map((x, i) => (\r\n              <div\r\n                className=\"px-1  flex justify-between tableDialogRowHoverBackground\"\r\n                key={`relation-${fieldType.id}-docId-${x}`}\r\n              >\r\n                <div>\r\n                  <RelationFieldValue\r\n                    value={x}\r\n                    collectionType={collectionType}\r\n                    labelField={fieldType.labelField}\r\n                  ></RelationFieldValue>\r\n                </div>\r\n                <div className=\"flex items-center flex-grow justify-end\">\r\n                  <div\r\n                    className=\"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-red-FF0000 hover:text-white\"\r\n                    data-testid={`delete-for-field-${fieldType.id}-${x}`}\r\n                    onClick={async () => {\r\n                      let res = await confirm({\r\n                        confirmation: \"Remove document?\",\r\n                      });\r\n                      if (res) {\r\n                        let arr = [...value];\r\n                        arr.splice(i, 1);\r\n                        onValue(arr);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <DeleteOutlineOutlined\r\n                      classes={{ root: \"pointer-events-none\" }}\r\n                      fontSize=\"inherit\"\r\n                    ></DeleteOutlineOutlined>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </SimpleBar>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RelationField;\r\n","import { RelationField as RelationFieldType } from \"api/collectionTypes\";\r\nimport RelationField from \"components/RelationField\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Relation: React.FC<FieldComponentProps<RelationFieldType>> = ({\r\n  value,\r\n  onValue,\r\n  field,\r\n  ground,\r\n}) => {\r\n  return (\r\n    <RelationField\r\n      ground={ground}\r\n      onValue={(docIds) => onValue(docIds)}\r\n      fieldType={field}\r\n      value={value}\r\n    ></RelationField>\r\n  );\r\n};\r\n\r\nexport default Relation;\r\n","import { AnyField } from \"api/collectionTypes\";\r\nimport DocumentForm from \"./DocumentForm\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\nimport { Document } from \"utils/interfaces\";\r\n\r\nexport interface SubcollectionDocumentProps {\r\n  fields: AnyField[];\r\n  proceed: (a: { [key: string]: any } | null) => void;\r\n  editableDocument?: { [key: string]: any };\r\n  level: number;\r\n}\r\n\r\nconst SubcollectionDocument: React.FC<SubcollectionDocumentProps> = ({\r\n  fields,\r\n  proceed,\r\n  editableDocument,\r\n  level,\r\n}) => {\r\n  return (\r\n    <div\r\n      style={{ padding: Math.min(level * 30, 90) }}\r\n      className=\"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40\"\r\n      onMouseDown={() => proceed(null)}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded h-full w-full p-9 relative animate-littlemoveup\"\r\n        onMouseDown={(e) => e.stopPropagation()}\r\n      >\r\n        <CloseRounded\r\n          className=\"absolute top-0 right-0 cursor-pointer\"\r\n          onClick={() => proceed(null)}\r\n        ></CloseRounded>\r\n        <DocumentForm\r\n          level={level + 1}\r\n          ground=\"Dialog\"\r\n          editableDocument={editableDocument}\r\n          fields={fields}\r\n          onSubmit={proceed}\r\n        ></DocumentForm>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubcollectionDocument;\r\n\r\nexport const getSubcollectionDocument = (props: Omit<SubcollectionDocumentProps, \"proceed\">) => {\r\n  return callComponent<typeof props, Document | null>({\r\n    Component: SubcollectionDocument,\r\n    props,\r\n  });\r\n};\r\n","import { Document } from \"utils/interfaces\";\r\nimport { AnyField } from \"api/collectionTypes\";\r\nimport FilesCell from \"components/TableElements/FilesCell\";\r\nimport React from \"react\";\r\nimport ExpandMoreRounded from \"@mui/icons-material/ExpandMoreRounded\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport AddFilter from \"components/TableElements/AddFilter\";\r\nimport Button from \"components/Button\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport classNames from \"classnames\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport Checkbox from \"@mui/material/Checkbox\";\r\nimport moment from \"moment\";\r\nimport { getSubcollectionDocument } from \"./SubcollectionDocument\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface SubcollectionFieldProps {\r\n  fields: AnyField[];\r\n  value: Document[];\r\n  onValue: (newVal: any) => void;\r\n  valueFormatters?: { [key: string]: (val: any) => any };\r\n  ground: GroundType;\r\n  level: number;\r\n}\r\n\r\nexport type FilterType = { fieldId: string; operator: string; value: string };\r\n\r\nconst Table: React.FC<SubcollectionFieldProps> = ({\r\n  value,\r\n  onValue,\r\n  valueFormatters,\r\n  ground,\r\n  fields,\r\n  level,\r\n}) => {\r\n  const [filters, setFilters] = React.useState<FilterType[]>([]);\r\n  const [selected, setSelected] = React.useState<string[]>([]);\r\n  const [orderBy, setOrderBy] = React.useState<{ fieldId: string; direction: \"asc\" | \"desc\" }>();\r\n  const [endIsInView, setEndIsInView] = React.useState(false);\r\n\r\n  const onEdit = async (doc: Document, docIndex: number) => {\r\n    let document = await getSubcollectionDocument({\r\n      fields,\r\n      level: level + 1,\r\n      editableDocument: doc,\r\n    });\r\n    if (!document) return;\r\n    let arr = [...value];\r\n    arr[docIndex] = document;\r\n    onValue(arr);\r\n  };\r\n\r\n  const onDeleteSelected = async () => {\r\n    if (await confirm({ confirmation: `Delete ${selected.length} documents?` })) {\r\n      onValue(value.filter((x) => !selected.includes(x.docId)));\r\n      setSelected([]);\r\n    }\r\n  };\r\n\r\n  const onOrder = (field: AnyField) =>\r\n    orderBy?.fieldId !== field.id\r\n      ? () => {\r\n          setOrderBy({ fieldId: field.id, direction: \"asc\" });\r\n        }\r\n      : orderBy?.direction !== \"asc\"\r\n      ? () => setOrderBy(undefined)\r\n      : () => setOrderBy({ fieldId: field.id, direction: \"desc\" });\r\n\r\n  const selectAll = (select: boolean) => setSelected(select ? value.map((x) => x.docId) : []);\r\n\r\n  const selectHandler = (docId: string, checked: boolean) => {\r\n    if (checked) {\r\n      setSelected((prev) => [...prev, docId]);\r\n\r\n      return;\r\n    }\r\n    setSelected((prev) => {\r\n      let arr = [...prev];\r\n      let index = arr.findIndex((x) => x === docId);\r\n      if (index != null) {\r\n        arr.splice(index, 1);\r\n      }\r\n      return arr;\r\n    });\r\n  };\r\n\r\n  const formatValue = (field: AnyField, value: any) => {\r\n    return field.type === \"date\"\r\n      ? moment(value).format(\"YYYY-MM-DD hh:mm\")\r\n      : valueFormatters && field.id in valueFormatters\r\n      ? valueFormatters[field.id](value)\r\n      : value.toString().substring(0, 40);\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-96 w-full flex-col flex\">\r\n      <div className=\"flex justify-between mb-3\">\r\n        <div className=\"flex flex-wrap\">\r\n          <AddFilter\r\n            ground={ground}\r\n            collectionType={{ fields }}\r\n            onValue={(val: FilterType) => setFilters((prev) => [val, ...prev])}\r\n          ></AddFilter>\r\n          {filters.map((f, i) => (\r\n            <div\r\n              key={`f-${i}`}\r\n              className={classNames(\r\n                \"rounded min-h-28px border leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative\",\r\n                `${ground.toLowerCase()}TextColor ${ground.toLowerCase()}BorderColor`\r\n              )}\r\n            >\r\n              {f.fieldId} {f.operator} {f.value}{\" \"}\r\n              <span\r\n                onClick={() =>\r\n                  setFilters((prev) => {\r\n                    let arr = [...prev];\r\n                    arr.splice(i, 1);\r\n                    return arr;\r\n                  })\r\n                }\r\n                className=\"text-xs leading-28px ml-3 cursor-pointer\"\r\n              >\r\n                \r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"flex flex-wrap\">\r\n          <Button\r\n            onClick={onDeleteSelected}\r\n            disabled={selected.length === 0}\r\n            className={`px-7 mr-4 min-w-unset h-28px ${\r\n              selected.length === 0\r\n                ? \"buttonDisabledBackground buttonDisabledTextColor cursor-default\"\r\n                : \"bg-red-FF0000 hover:bg-red-FF0000-hover text-white\"\r\n            } `}\r\n          >\r\n            Delete\r\n          </Button>\r\n          <Button\r\n            onClick={async () => {\r\n              let document = await getSubcollectionDocument({\r\n                fields,\r\n                level: level + 1,\r\n              });\r\n              if (!document) return;\r\n              onValue([...value, document]);\r\n            }}\r\n            className={`px-7 h-28px primaryBackground min-w-unset buttonPrimaryTextColor`}\r\n          >\r\n            Add\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className={`flex-grow h-0 -mt-3 rounded overflow-hidden table${ground}Background`}>\r\n        <SimpleBar className={\"relative scrollbar-light h-full\"} autoHide={false}>\r\n          <table className=\"w-full text-center\">\r\n            <thead>\r\n              <tr className=\"whitespace-nowrap\">\r\n                <th\r\n                  className={`sticky top-0 table${ground}HeaderBackground table${ground}HeaderTextColor z-10 px-1`}\r\n                >\r\n                  <Checkbox\r\n                    size=\"small\"\r\n                    classes={{ checked: \"primaryTextColor\", root: \"p-0\" }}\r\n                    checked={selected.length === value.length}\r\n                    onChange={(e) => selectAll(e.target.checked)}\r\n                  ></Checkbox>\r\n                </th>\r\n                {fields.map((field, i) => (\r\n                  <th\r\n                    className={`font-semibold sticky top-0 table${ground}HeaderBackground table${ground}HeaderTextColor`}\r\n                    key={`th-${i}`}\r\n                  >\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <div className=\"w-5\"></div>\r\n                      <div className=\"cursor-pointer select-none\" onClick={onOrder(field)}>\r\n                        {field.id}\r\n                      </div>\r\n                      <div className=\"w-5\">\r\n                        {orderBy?.fieldId === field.id ? (\r\n                          <ExpandMoreRounded\r\n                            fontSize=\"small\"\r\n                            className={`${\r\n                              orderBy?.direction === \"asc\" ? \"transform rotate-180\" : \"\"\r\n                            }`}\r\n                          ></ExpandMoreRounded>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {value.map((doc, i) => (\r\n                <tr\r\n                  onClick={() => onEdit(doc, i)}\r\n                  key={`row-${i}`}\r\n                  className={`cursor-pointer table${ground}RowHoverTextColor table${ground}RowHoverBackground`}\r\n                >\r\n                  <td className=\"px-1\" onClick={(e) => e.stopPropagation()}>\r\n                    <Checkbox\r\n                      size=\"small\"\r\n                      classes={{ checked: \"primaryTextColor\", root: \"p-0\" }}\r\n                      checked={selected.includes(doc.docId)}\r\n                      onChange={(e) => selectHandler(doc.docId, e.target.checked)}\r\n                    ></Checkbox>\r\n                  </td>\r\n                  {fields.map((field, j) => (\r\n                    <td key={`row-${i}-col-${j}`} className=\"px-2\">\r\n                      {doc[field.id] != null ? (\r\n                        field.type === \"media\" ? (\r\n                          field.mediaSingle ? (\r\n                            <FilesCell file={doc[field.id]}></FilesCell>\r\n                          ) : (\r\n                            <FilesCell files={doc[field.id]} />\r\n                          )\r\n                        ) : (\r\n                          <div className=\"whitespace-nowrap\">\r\n                            {formatValue(field, doc[field.id])}\r\n                          </div>\r\n                        )\r\n                      ) : null}\r\n                    </td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <InView\r\n            onChange={async (inView) => {\r\n              setEndIsInView(inView);\r\n            }}\r\n          >\r\n            <div className=\"w-full\"></div>\r\n          </InView>\r\n          <div></div>\r\n        </SimpleBar>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import { CollectionField } from \"api/collectionTypes\";\r\nimport SubcollectionField from \"components/SubcollectionField\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Collection: React.FC<FieldComponentProps<CollectionField>> = ({\r\n  value,\r\n  onValue,\r\n  level,\r\n  field,\r\n  ground,\r\n}) => {\r\n  return (\r\n    <SubcollectionField\r\n      level={level}\r\n      value={value}\r\n      onValue={(arr) => onValue(arr)}\r\n      fields={field.collectionFields}\r\n      ground={ground}\r\n    ></SubcollectionField>\r\n  );\r\n};\r\n\r\nexport default Collection;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  try {\r\n    let obj = JSON.parse(JSON.stringify(val));\r\n    if (typeof obj.map !== \"function\") {\r\n      throw new Error(\"object is not an array\");\r\n    }\r\n  } catch (error) {\r\n    return \"Wrong format\";\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  try {\r\n    let obj = JSON.parse(JSON.stringify(val));\r\n\r\n    if (typeof obj === \"string\" || typeof obj.map === \"function\") {\r\n      throw new Error(\"object is not a map\");\r\n    }\r\n  } catch (error) {\r\n    return \"Wrong format\";\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  try {\r\n    let obj = JSON.parse(JSON.stringify(val));\r\n    if (typeof obj === \"string\") {\r\n      throw new Error(\"object is not a map\");\r\n    }\r\n  } catch (error) {\r\n    return \"Wrong format\";\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","export type Validation = (val: any) => string | null;\r\n\r\nconst Validate: Validation = () => {\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Password: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue, ground, name }) => {\r\n  const [plain, setPlain] = useState(\"\");\r\n  const createPassword = async () => {\r\n    const res = await fetch(window.location.origin + \"/auth/createPassword\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(plain),\r\n    }).then((x) => x.json());\r\n    return res.error ? null : res;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPlain(value);\r\n  }, [value]);\r\n\r\n  return (\r\n    <div className=\"w-full relative flex\">\r\n      <div className=\"flex-grow\">\r\n        <Input\r\n          disabled={value}\r\n          onBlur={() => {}}\r\n          ground={ground}\r\n          className=\"h-28px\"\r\n          type=\"password\"\r\n          value={plain}\r\n          name={name}\r\n          onChange={(e) => setPlain(e.target.value)}\r\n        ></Input>\r\n      </div>\r\n\r\n      <div className=\"ml-1 select-none font-medium\">\r\n        {value ? (\r\n          <div\r\n            onClick={() => onValue(\"\")}\r\n            className=\"h-28px leading-28px text-xs rounded bg-red-FF0000 hover:bg-red-FF0000-hover text-white cursor-pointer px-3\"\r\n          >\r\n            Clear\r\n          </div>\r\n        ) : (\r\n          <div\r\n            onClick={async () => {\r\n              let password = await createPassword();\r\n              onValue(password);\r\n            }}\r\n            className=\"h-28px leading-28px text-xs rounded primaryBackground buttonPrimaryTextColor cursor-pointer px-3\"\r\n          >\r\n            Save\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  return !val ? \"Required\" : null;\r\n};\r\n\r\nexport default Validate;\r\n","import Wrapper from \"./Wrapper\";\r\nimport { ReactComponent as ColorIcon } from \"assets/color.svg\";\r\n\r\nconst Color: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <ColorIcon className=\"w-4\"></ColorIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Color;\r\n","import { ReactElement, useState } from \"react\";\r\nimport Popover, { PopoverProps } from \"@mui/material/Popover\";\r\n\r\nexport interface PopoverWrapperProps extends Omit<PopoverProps, \"open\"> {\r\n  content: ReactElement;\r\n  open?: boolean;\r\n  onClose?: () => void;\r\n  closeOnContentClick?: boolean;\r\n}\r\n\r\nconst PopoverWrapper: React.FC<PopoverWrapperProps> = ({\r\n  content,\r\n  anchorOrigin,\r\n  transformOrigin,\r\n  open,\r\n  onClose,\r\n  closeOnContentClick,\r\n  ...rest\r\n}) => {\r\n  const [anchorEl, setAnchorEl] = useState<any>(null);\r\n\r\n  return (\r\n    <>\r\n      <Popover\r\n        open={open != null ? open : Boolean(anchorEl)}\r\n        {...rest}\r\n        anchorEl={anchorEl}\r\n        onClose={onClose ? onClose : () => setAnchorEl(null)}\r\n        classes={{ paper: \"shadow-3-3-12-10 border rounded\" }}\r\n        anchorOrigin={\r\n          anchorOrigin || {\r\n            vertical: \"top\",\r\n            horizontal: \"center\",\r\n          }\r\n        }\r\n        transformOrigin={\r\n          transformOrigin || {\r\n            vertical: \"top\",\r\n            horizontal: \"center\",\r\n          }\r\n        }\r\n      >\r\n        <div\r\n          onClick={closeOnContentClick ? (onClose ? onClose : () => setAnchorEl(null)) : undefined}\r\n        >\r\n          {content}\r\n        </div>\r\n      </Popover>\r\n      <div onClick={(e) => setAnchorEl(e.currentTarget)}>{rest.children}</div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PopoverWrapper;\r\n","import Popover from \"components/Popover\";\r\nimport { SketchPicker } from \"react-color\";\r\n\r\ninterface ColorPickerProps\r\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\r\n  value: string;\r\n  onValue: (val: string) => void;\r\n}\r\n\r\nconst ColorPicker: React.FC<ColorPickerProps> = ({ value, onValue, ...rest }) => {\r\n  return (\r\n    <Popover\r\n      content={\r\n        <SketchPicker\r\n          color={value}\r\n          onChange={(color, event) => {\r\n            onValue(`rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`);\r\n          }}\r\n        ></SketchPicker>\r\n      }\r\n      anchorOrigin={{\r\n        vertical: \"bottom\",\r\n        horizontal: \"left\",\r\n      }}\r\n      transformOrigin={{ horizontal: \"left\", vertical: \"top\" }}\r\n    >\r\n      <div {...rest}></div>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nexport default ColorPicker;\r\n","import StringBadge from \"./Badges/String\";\r\nimport NumberBadge from \"./Badges/Number\";\r\nimport MapBadge from \"./Badges/Map\";\r\nimport ArrayBadge from \"./Badges/Array\";\r\nimport BooleanBadge from \"./Badges/Boolean\";\r\nimport DateBadge from \"./Badges/Date\";\r\nimport MediaBadge from \"./Badges/Media\";\r\nimport RichTextBadge from \"./Badges/RichText\";\r\nimport JsonBadge from \"./Badges/Json\";\r\nimport EnumBadge from \"./Badges/Enum\";\r\nimport PasswordBadge from \"./Badges/Password\";\r\nimport RelationBadge from \"./Badges/Relation\";\r\nimport SubcollectionBadge from \"./Badges/Subcollection\";\r\nimport AnyBadge from \"./Badges/Any\";\r\nimport StringComponent from \"./Components/String\";\r\nimport AnyComponent from \"./Components/Any\";\r\nimport NumberComponent from \"./Components/Number\";\r\nimport BooleanComponent from \"./Components/Boolean\";\r\nimport DateComponent from \"./Components/Date\";\r\nimport MediaComponent from \"./Components/Media\";\r\nimport RichTextComponent from \"./Components/RichText\";\r\nimport EnumComponent from \"./Components/Enum\";\r\nimport PasswordComponent from \"./Components/Password\";\r\nimport RelationComponent from \"./Components/Relation\";\r\nimport SubcollectionComponent from \"./Components/Subcollection\";\r\nimport ArrayValidation from \"./Validations/Array\";\r\nimport MapValidation from \"./Validations/Map\";\r\nimport JsonValidation from \"./Validations/Json\";\r\nimport DefaultValidation from \"./Validations/Default\";\r\nimport HashedPasswordComponent from \"./Components/HashedPassword\";\r\nimport HashedPasswordValidation from \"./Validations/HashedPassword\";\r\nimport ColorBadge from \"./Badges/Color\";\r\nimport ColorComponent from \"./Components/Color\";\r\n\r\nexport const HashedPasswordField = {\r\n  type: \"hashed-password\",\r\n  Component: HashedPasswordComponent,\r\n  validate: HashedPasswordValidation,\r\n};\r\n\r\nconst fields = [\r\n  {\r\n    type: \"string\",\r\n    Badge: StringBadge,\r\n    Component: StringComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  {\r\n    type: \"number\",\r\n    Badge: NumberBadge,\r\n    Component: NumberComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  { type: \"map\", Badge: MapBadge, Component: AnyComponent, validate: MapValidation },\r\n  { type: \"array\", Badge: ArrayBadge, Component: AnyComponent, validate: ArrayValidation },\r\n  {\r\n    type: \"boolean\",\r\n    Badge: BooleanBadge,\r\n    Component: BooleanComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  { type: \"date\", Badge: DateBadge, Component: DateComponent, validate: DefaultValidation },\r\n  { type: \"media\", Badge: MediaBadge, Component: MediaComponent, validate: DefaultValidation },\r\n  {\r\n    type: \"rich-text\",\r\n    Badge: RichTextBadge,\r\n    Component: RichTextComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  { type: \"json\", Badge: JsonBadge, Component: AnyComponent, validate: JsonValidation },\r\n  { type: \"enum\", Badge: EnumBadge, Component: EnumComponent, validate: DefaultValidation },\r\n  {\r\n    type: \"password\",\r\n    Badge: PasswordBadge,\r\n    Component: PasswordComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  {\r\n    type: \"relation\",\r\n    Badge: RelationBadge,\r\n    Component: RelationComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  {\r\n    type: \"collection\",\r\n    Badge: SubcollectionBadge,\r\n    Component: SubcollectionComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  { type: \"color\", Badge: ColorBadge, Component: ColorComponent, validate: DefaultValidation },\r\n  { type: \"any\", Badge: AnyBadge, Component: AnyComponent, validate: DefaultValidation },\r\n];\r\n\r\nexport default fields;\r\n","import { AnyField, StringField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport ColorPicker from \"components/ColorPicker\";\r\n\r\nexport interface FieldComponentProps<T> {\r\n  value: any;\r\n  onValue: (val: any) => void;\r\n  name: string;\r\n  field: T;\r\n  level: number;\r\n}\r\n\r\nconst Color: React.FC<FieldComponentProps<StringField>> = ({ field, value, onValue, name }) => {\r\n  return (\r\n    <ColorPicker value={value} onValue={(clr) => onValue(clr)}>\r\n      <div style={{ background: value }} className=\"h-28px w-32 rounded border-2\"></div>\r\n    </ColorPicker>\r\n  );\r\n};\r\n\r\nexport default Color;\r\n","import {\r\n  deleteObject,\r\n  getDownloadURL,\r\n  getStorage,\r\n  ref,\r\n  uploadBytesResumable,\r\n} from \"firebase/storage\";\r\nimport shortuuid from \"short-uuid\";\r\n\r\nclass FilesManagerClass {\r\n  upload(file: File): Promise<{ downloadUrl: string; fileName: string } | { error: string }> {\r\n    return new Promise((resolve) => {\r\n      try {\r\n        const storage = getStorage();\r\n        const nameParts = file.name.split(\".\");\r\n        const fileName = shortuuid.generate() + \".\" + nameParts[nameParts.length - 1];\r\n        let fileRef = ref(storage, fileName);\r\n\r\n        const uploadTask = uploadBytesResumable(fileRef, file);\r\n        uploadTask.on(\r\n          \"state_changed\",\r\n          (snapshot) => {},\r\n          (error) => {\r\n            resolve({ error: error.name });\r\n          },\r\n          () => {\r\n            getDownloadURL(uploadTask.snapshot.ref).then((downloadUrl) => {\r\n              resolve({ downloadUrl, fileName });\r\n            });\r\n          }\r\n        );\r\n      } catch (error: any) {\r\n        resolve({ error });\r\n      }\r\n    });\r\n  }\r\n\r\n  delete(path: string) {\r\n    const storage = getStorage();\r\n    deleteObject(ref(storage, path));\r\n  }\r\n}\r\n\r\nexport const FilesManager = new FilesManagerClass();\r\n","import { getFileExtension } from \"helper\";\r\nimport store from \"store\";\r\nimport { addDocument, deleteDocument, updateDocument } from \"./collections\";\r\nimport { FilesManager } from \"facades/FilesManager\";\r\n\r\nexport const uploadFile = async (file: File): Promise<{ error: string } | any> => {\r\n  try {\r\n    const res = await FilesManager.upload(file);\r\n\r\n    if (\"error\" in res) {\r\n      return res;\r\n    } else {\r\n      const fileDetails = {\r\n        name: file.name,\r\n        size: file.size,\r\n        url: res.downloadUrl,\r\n        storagePath: res.fileName,\r\n        type: getFileExtension(file),\r\n      };\r\n      return addDocument(\"FilesReservedCollection\", fileDetails);\r\n    }\r\n  } catch (error: any) {\r\n    return { error: error.toString() };\r\n  }\r\n};\r\n\r\nexport type FileDocument = {\r\n  docId: string;\r\n  name: string;\r\n  size: number;\r\n  storagePath: string;\r\n  createdAt: number;\r\n  url: string;\r\n};\r\n\r\nexport const getFiles = async ({\r\n  limit = 10,\r\n  orderBy,\r\n  startAt,\r\n  startAfter,\r\n}: {\r\n  limit?: number;\r\n  orderBy: string;\r\n  startAt?: string | number;\r\n  startAfter?: string | number;\r\n}): Promise<Array<FileDocument> | { error: string }> => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(\r\n      window.location.origin +\r\n        `/private/files?limit=${limit}${\r\n          startAt ? \"&startAt=\" + startAt : \"\"\r\n        }&orderBy=${orderBy},desc${startAfter ? `&startAfter=${startAfter}` : \"\"}`,\r\n      {\r\n        headers: { Authorization: \"Bearer \" + token },\r\n      }\r\n    ).then((x) => x.json());\r\n  } catch (error: any) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const getFilesCount = async () => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(window.location.origin + `/private/files/count`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const deleteFile = (docId: string, storagePath: string) => {\r\n  try {\r\n    FilesManager.delete(storagePath);\r\n    return deleteDocument(\"FilesReservedCollection\", docId);\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const editFile = (docId: string, updates: { [key: string]: any }) => {\r\n  try {\r\n    return updateDocument(\"FilesReservedCollection\", docId, updates);\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n","import { AnyField } from \"api/collectionTypes\";\r\n\r\nconst initialValues = {\r\n  password: () => \"\",\r\n  string: () => \"\",\r\n  \"rich-text\": () => \"\",\r\n  json: () => ({}),\r\n  map: () => ({}),\r\n  array: () => [],\r\n  media: (x: AnyField) => (x.type === \"media\" && x.mediaSingle ? \"\" : []),\r\n  date: () => null,\r\n  enum: () => null,\r\n  number: () => null,\r\n  boolean: () => false,\r\n  relation: (x: AnyField) => (x.type === \"relation\" && x.relationOneToOne ? \"\" : []),\r\n  collection: () => [],\r\n  document: (x: AnyField) =>\r\n    x.type === \"document\" &&\r\n    x.documentFields.reduce((a, b) => ({ ...a, [b.id]: initialValues[b.type] }), {}),\r\n  any: () => \"\",\r\n  \"hashed-password\": () => \"\",\r\n  color: () => \"\",\r\n};\r\n\r\nexport default initialValues;\r\n","import React from \"react\";\r\nimport Button from \"components/Button\";\r\nimport { useFormik } from \"formik\";\r\nimport Label from \"components/Label\";\r\nimport FieldTypes from \"components/Fields\";\r\nimport { HashedPasswordField } from \"components/Fields\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport { AnyField } from \"api/collectionTypes\";\r\nimport initialValues from \"./Fields/InitialValues\";\r\nimport { GroundType } from \"utils/types\";\r\n\r\nexport interface DocumentFormProps {\r\n  onSubmit: (a: { [key: string]: any } | null) => void;\r\n  fields: AnyField[];\r\n  editableDocument?: { [key: string]: any };\r\n  docId?: string;\r\n  ground: GroundType;\r\n  level: number;\r\n  singleName?: string;\r\n}\r\n\r\nconst DocumentForm: React.FC<DocumentFormProps> = ({\r\n  onSubmit,\r\n  fields,\r\n  editableDocument,\r\n  level,\r\n  docId,\r\n  ground,\r\n  singleName,\r\n}) => {\r\n  const allFieldTypes = [...FieldTypes, HashedPasswordField];\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const initial = fields.reduce(\r\n    (a, b) => ({\r\n      ...a,\r\n      [b.id]:\r\n        editableDocument && editableDocument[b.id]\r\n          ? editableDocument[b.id]\r\n          : initialValues[b.type](b),\r\n    }),\r\n    {}\r\n  );\r\n\r\n  const { values, errors, setFieldValue, handleSubmit, submitCount, isSubmitting } = useFormik({\r\n    validateOnChange: false,\r\n    initialValues: initial as { [index: string]: any },\r\n    enableReinitialize: true,\r\n    onSubmit: async (vals) => {\r\n      await dispatch({ type: \"SET_DOCUMENT_CHANGED\", payload: false });\r\n      await onSubmit(vals);\r\n    },\r\n    validate: (vals) => {\r\n      const errors: any = {};\r\n      fields.forEach((x) => {\r\n        let fieldType = allFieldTypes.find((f) => f.type === x.type);\r\n        if (!fieldType) return errors;\r\n        let error = fieldType.validate(vals[x.id]);\r\n        if (error) {\r\n          errors[x.id] = error;\r\n        }\r\n      });\r\n\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  const hasChanged = !editableDocument || JSON.stringify(initial) !== JSON.stringify(values);\r\n\r\n  React.useEffect(() => {\r\n    dispatch({ type: \"SET_DOCUMENT_CHANGED\", payload: hasChanged });\r\n  }, [hasChanged, dispatch]);\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col w-full\">\r\n      <div className=\"flex justify-between flex-wrap mb-2\">\r\n        <div>\r\n          <div\r\n            className={classNames(\r\n              \"font-medium text-27px leading-none capitalize mb-1 mr-4\",\r\n              `${ground.toLowerCase()}TextColor`\r\n            )}\r\n          >\r\n            {docId ? `Edit Document` : singleName ? singleName : `Add Document`}\r\n          </div>\r\n          {!docId ? null : (\r\n            <div className={classNames(`${ground.toLowerCase()}TextColor`, \"mb-3 text-xs\")}>\r\n              Doc id: {docId}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <Button\r\n          type=\"submit\"\r\n          onClick={() => handleSubmit()}\r\n          disabled={isSubmitting || !hasChanged}\r\n          className={`h-34px ${\r\n            hasChanged\r\n              ? \"primaryBackground buttonPrimaryTextColor\"\r\n              : \"buttonDisabledBackground buttonDisabledTextColor cursor-default\"\r\n          }  mb-2`}\r\n        >\r\n          {isSubmitting\r\n            ? \"Loading...\"\r\n            : editableDocument != null || singleName\r\n            ? \"Save\"\r\n            : \"Publish\"}\r\n        </Button>\r\n      </div>\r\n      <div className=\"flex-grow h-0 overflow-y-auto overflow-x-hidden pt-4 -mx-7 -mb-7 px-7\">\r\n        <div className=\"flex flex-wrap -mx-3\">\r\n          {Object.keys(values).length\r\n            ? fields\r\n                .filter((x) => !x.isDefault)\r\n                .map((x, i) => {\r\n                  const Component = allFieldTypes.find((f) => f.type === x.type)?.Component;\r\n\r\n                  return (\r\n                    <div\r\n                      key={`field-${i}`}\r\n                      className={`${\r\n                        [\"rich-text\", \"collection\"].includes(x.type) ? \"w-full\" : \"sm:w-1/2 w-full\"\r\n                      } px-3 mb-12`}\r\n                    >\r\n                      <Label\r\n                        ground={ground}\r\n                        className=\"mb-2 font-medium\"\r\n                        error={submitCount > 0 ? errors[x.id]?.toString() : null}\r\n                      >\r\n                        {x.id}{\" \"}\r\n                      </Label>\r\n                      {!Component ? null : (\r\n                        <Component\r\n                          onValue={(val) => setFieldValue(x.id, val)}\r\n                          ground={ground}\r\n                          value={values[x.id]}\r\n                          name={x.id}\r\n                          level={level}\r\n                          field={x as never}\r\n                        ></Component>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })\r\n            : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentForm;\r\n","import Button from \"components/Button\";\r\nimport React, { useState } from \"react\";\r\nimport { uploadFile } from \"api/files\";\r\nimport store, { RootState } from \"store\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport PageTitle from \"components/PageTitle\";\r\nimport CollectionTable from \"components/TableElements/CollectionTable\";\r\nimport { useSelector } from \"react-redux\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\nimport { formatBytes } from \"helper\";\r\n\r\nexport interface MediaProps {}\r\n\r\nexport const MediaDocumentFormatters = {\r\n  url: (value: string) => (\r\n    <div\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        window.open(value, \"_blank\");\r\n      }}\r\n      className=\"bg-center bg-cover h-10 w-10 mx-auto bg-gray-E1E1E1\"\r\n      style={{ backgroundImage: `url(${value})` }}\r\n    ></div>\r\n  ),\r\n  size: (value: number) => formatBytes(value),\r\n};\r\n\r\nconst Media: React.FC<MediaProps> = () => {\r\n  const uploadRef = React.useRef(null as any);\r\n  const notify = useNotify();\r\n  const [refreshCounter, setCounter] = useState(0);\r\n\r\n  const { collectionType } = useSelector((state: RootState) => {\r\n    return {\r\n      collectionType: state.collectionTypes.find((x) => x.id === \"FilesReservedCollection\"),\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex flex-col\">\r\n      <div className=\"flex justify-between flex-wrap mb-3\">\r\n        <PageTitle className=\"mb-4 mr-4\">Media</PageTitle>\r\n        <input\r\n          key={`file-input-${refreshCounter}`}\r\n          type=\"file\"\r\n          multiple\r\n          className=\"hidden\"\r\n          ref={uploadRef}\r\n          onChange={async (e) => {\r\n            const files = e.target.files;\r\n\r\n            if (files && files.length) {\r\n              store.dispatch({\r\n                type: \"SET_LOADING\",\r\n                payload: `Uploading ${files.length} file${files.length > 1 ? \"s\" : \"\"}...`,\r\n              });\r\n              let uploaded = 0;\r\n              for (let file of files) {\r\n                const res = await uploadFile(file);\r\n                if (!(\"error\" in res)) {\r\n                  uploaded++;\r\n                  store.dispatch({\r\n                    type: \"SET_LOADING\",\r\n                    payload: `${uploaded}/${files.length} uploaded.`,\r\n                  });\r\n                } else {\r\n                  notify(res.error + \". Try reload the app\", { variant: \"error\" });\r\n                }\r\n              }\r\n\r\n              store.dispatch({ type: \"SET_LOADING\", payload: false });\r\n              setCounter((prev) => prev + 1);\r\n            }\r\n          }}\r\n        />\r\n        <Button\r\n          onClick={() => uploadRef.current.click()}\r\n          className=\"primaryBackground buttonPrimaryTextColor mb-4 h-34px pr-6 pl-5 min-w-unset\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <AddRounded className=\"mr-2 text-lg\" fontSize=\"inherit\"></AddRounded>\r\n            <span>Upload</span>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n\r\n      {!collectionType ? null : (\r\n        <CollectionTable\r\n          ground=\"Ground\"\r\n          key={`files-table-${refreshCounter}`}\r\n          valueFormatters={MediaDocumentFormatters}\r\n          collectionType={collectionType}\r\n        ></CollectionTable>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","export type IconButtonVariant = \"transparent\" | \"standard\";\r\n\r\nexport interface IconButtonProps {\r\n  className?: string;\r\n  variant?: IconButtonVariant;\r\n  [x: string]: any;\r\n}\r\n\r\nconst IconButton: React.FC<IconButtonProps> = ({\r\n  className = \"\",\r\n  variant = \"standard\",\r\n  ...rest\r\n}) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={\r\n        `bg-fireck-4 hover:bg-fireck-4-hover h-5 w-5 rounded flex items-center justify-center transition cursor-pointer ` +\r\n        className\r\n      }\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default IconButton;\r\n","var _path, _circle, _circle2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOneToOne(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 9,\n    viewBox: \"0 0 40 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.36621 4.67223H30.7241M30.7241 4.67223L28.3085 2.25659M30.7241 4.67223L28.3085 7.08786\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 4.69562,\n    cy: 4.49835,\n    r: 3.31773,\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.3948,\n    cy: 4.49835,\n    r: 3.31773,\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOneToOne);\nexport default __webpack_public_path__ + \"static/media/one-to-one.a9ab4eb3.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _circle, _circle2, _circle3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOneToMany(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 37,\n    viewBox: \"0 0 40 37\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5875 18.8431L30.4119 7.39751M30.4119 7.39751L26.8752 6.44984M30.4119 7.39751L29.4643 10.9342\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5873 18.8433L30.4117 30.2889M30.4117 30.2889L29.4641 26.7522M30.4117 30.2889L26.875 31.2366\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 5.00165,\n    cy: 18.7858,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.2653,\n    cy: 32.5311,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })), _circle3 || (_circle3 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.2653,\n    cy: 5.15558,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOneToMany);\nexport default __webpack_public_path__ + \"static/media/one-to-many.c2288723.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst useDraggableInPortal = () => {\r\n  const self = useRef<any>({}).current;\r\n\r\n  useEffect(() => {\r\n    const div = document.createElement(\"div\");\r\n    div.style.position = \"absolute\";\r\n    div.style.pointerEvents = \"none\";\r\n    div.style.top = \"0\";\r\n    div.style.width = \"100%\";\r\n    div.style.height = \"100%\";\r\n    self.elt = div;\r\n    document.body.appendChild(div);\r\n    return () => {\r\n      document.body.removeChild(div);\r\n    };\r\n  }, [self]);\r\n\r\n  return (render: any) =>\r\n    (provided: any, ...args: any) => {\r\n      const element = render(provided, ...args);\r\n      if (provided.draggableProps.style.position === \"fixed\") {\r\n        return createPortal(element, self.elt);\r\n      }\r\n      return element;\r\n    };\r\n};\r\n\r\nexport default useDraggableInPortal;\r\n","import useDraggableInPortal from \"hooks/useDraggableInPortal\";\r\nimport { DragDropContext, Droppable, Draggable, DropResult } from \"react-beautiful-dnd\";\r\nimport { useRef } from \"react\";\r\n\r\ninterface DraggableListProps {\r\n  onDragEnd: (val: DropResult) => void;\r\n  Item: React.FC<any>;\r\n  items: any[];\r\n  containerClassName: string;\r\n}\r\n\r\nconst DraggableList: React.FC<DraggableListProps> = ({\r\n  onDragEnd,\r\n  Item,\r\n  items,\r\n  containerClassName,\r\n}) => {\r\n  const renderDraggable = useDraggableInPortal();\r\n  const uniqid = useRef<number>(Math.random());\r\n\r\n  const formatId = (keyword: string, index: number) => {\r\n    return `${keyword}-${index}-${uniqid.current}`;\r\n  };\r\n\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId=\"droppable-sub\">\r\n        {(provided) => (\r\n          <div className={containerClassName} {...provided.droppableProps} ref={provided.innerRef}>\r\n            {items.map((x, i) => {\r\n              return (\r\n                <Draggable\r\n                  key={formatId(\"draggable\", i)}\r\n                  draggableId={formatId(\"draggable\", i)}\r\n                  index={i}\r\n                >\r\n                  {renderDraggable((provided: any) => (\r\n                    <div\r\n                      ref={provided.innerRef}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                    >\r\n                      <Item {...x} index={i}></Item>\r\n                    </div>\r\n                  ))}\r\n                </Draggable>\r\n              );\r\n            })}\r\n            {provided.placeholder}\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </DragDropContext>\r\n  );\r\n};\r\n\r\nexport default DraggableList;\r\n","import React from \"react\";\r\nimport { getDocument } from \"api/collections\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport DocumentForm from \"components/DocumentForm\";\r\nimport CollectionsManager from \"facades/CollectionsManager\";\r\nimport { useQuery } from \"react-query\";\r\n\r\nexport interface DocumentProps {\r\n  collectionId: string;\r\n  docId: string;\r\n}\r\n\r\nconst Document: React.FC<DocumentProps> = ({ collectionId, docId }) => {\r\n  const collectionType = useSelector((state: RootState) =>\r\n    state.collectionTypes.find((x) => x.id === collectionId)\r\n  );\r\n\r\n  const { data: doc } = useQuery([collectionId, \"getDocument\", docId, collectionType], async () => {\r\n    if (!collectionType) return null;\r\n    if (!docId && !collectionType.single) return null;\r\n    const res = await getDocument(collectionId, docId);\r\n    return res;\r\n  });\r\n\r\n  const history = useHistory();\r\n\r\n  return !collectionType ? null : (\r\n    <DocumentForm\r\n      level={0}\r\n      ground=\"Ground\"\r\n      docId={docId}\r\n      editableDocument={doc ? doc : undefined}\r\n      fields={collectionType.fields}\r\n      singleName={collectionType.single ? collectionType.name : undefined}\r\n      onSubmit={async (vals) => {\r\n        if (vals) {\r\n          if (doc != null) {\r\n            await CollectionsManager.updateDocument(collectionType.id, doc, vals);\r\n          } else {\r\n            await CollectionsManager.addDocument(collectionType.id, vals);\r\n          }\r\n        }\r\n\r\n        if (!collectionType.single) {\r\n          history.goBack();\r\n        }\r\n      }}\r\n    ></DocumentForm>\r\n  );\r\n};\r\n\r\nexport default Document;\r\n"],"sourceRoot":""}