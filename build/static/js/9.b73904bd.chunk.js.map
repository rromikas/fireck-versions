{"version":3,"sources":["pages/CollectionDocument.tsx","api/callComponent.tsx","components/Select.tsx","components/TableElements/CreateIndex.tsx","hooks/useFetch.ts","components/TableElements/CollectionTable.tsx","components/Label.tsx","components/TableElements/AddFilter.tsx","components/TooltipChild.tsx","components/TableElements/FilesCell/MediaField.tsx","components/TableElements/FilesCell/index.tsx","helper.ts","components/PageTitle.tsx","pages/Media/SelectMedia.tsx","facades/FilesManager.ts","api/files.ts","assets/subcollection.svg","components/Fields/Badges/Wrapper.tsx","components/Fields/Badges/String.tsx","components/Fields/Badges/Number.tsx","components/Fields/Badges/Map.tsx","components/Fields/Badges/Array.tsx","components/Fields/Badges/Boolean.tsx","components/Fields/Badges/Date.tsx","components/Fields/Badges/Media.tsx","components/Fields/Badges/RichText.tsx","components/Fields/Badges/Json.tsx","components/Fields/Badges/Enum.tsx","components/Fields/Badges/Password.tsx","components/Fields/Badges/Relation.tsx","components/Fields/Badges/Subcollection.tsx","components/Fields/Badges/Any.tsx","components/Textarea.tsx","components/Fields/Components/String.tsx","components/JsonEditor.tsx","assets/media.svg","components/Fields/Components/Any.tsx","components/Fields/Components/Number.tsx","components/Switch.tsx","components/Fields/Components/Boolean.tsx","components/Fields/Components/Date.tsx","components/ReorderSelectedFiles.tsx","components/MultipleMediaInput.tsx","components/SingleMediaInput.tsx","components/Fields/Components/Media.tsx","components/RichTextEditor.tsx","components/Fields/Components/RichText.tsx","components/Fields/Components/Enum.tsx","components/Fields/Components/Password.tsx","components/RelationFieldValue.tsx","components/RelationField.tsx","components/Fields/Components/Relation.tsx","components/SubcollectionDocument.tsx","components/SubcollectionField.tsx","components/Fields/Validations/Default.ts","components/Fields/Components/HashedPassword.tsx","components/Fields/index.ts","components/Fields/Validations/HashedPassword.ts","components/Fields/Validations/Map.ts","components/Fields/Validations/Array.ts","components/Fields/Validations/Json.ts","components/Fields/Components/Subcollection.tsx","pages/Media/index.tsx","components/IconButton.tsx","components/DocumentForm.tsx","assets/one-to-one.svg","assets/one-to-many.svg","hooks/useDraggableInPortal.ts","components/DraggableList.tsx","components/Document.tsx"],"names":["AddDocument","match","collectionId","params","id","docId","callComponent","Component","props","Promise","resolve","reject","wrapper","document","getElementById","appendChild","createElement","ReactDOM","render","store","proceed","val","unmountComponentAtNode","parentNode","removeChild","WarningIcon","React","forwardRef","ref","className","size","Select","options","error","groundColor","classNames","spellCheck","map","x","i","value","label","title","placement","CreateIndexModal","url","onMouseDown","e","stopPropagation","Button","onClick","window","open","useFetch","filters","orderBy","inView","useState","docs","setDocs","inViewRef","useRef","endReached","filterSortTriggered","notify","useNotify","loading","setLoading","abortController","AbortController","filterSortCounter","setFilterSortCounter","getOptions","useCallback","data","forEach","f","where","fieldId","operator","direction","length","startAfter","populateRef","onError","message","includes","split","variant","useEffect","current","fetcher","a","triggeredBySortFilter","getCollection","signal","newData","prev","limit","abort","Table","collectionType","onPick","blackList","singleSelect","valueFormatters","_filters","_onEdit","onEdit","hideFilters","history","useHistory","setFilters","fields","filter","field","displayOnTable","selected","setSelected","setOrderBy","endIsInView","setEndIsInView","onDeleteSelected","confirm","confirmation","deleteDocument","doc","push","onOrder","undefined","selectHandler","checked","arr","index","findIndex","splice","formatValue","type","moment","format","toString","substring","AddFilter","onValue","hidden","disabled","autoHide","Checkbox","classes","root","onChange","select","target","fontSize","j","mediaSingle","FilesCell","file","files","colSpan","Label","children","AddFilterModal","setOpen","useFormik","onSubmit","vals","resetForm","initialValues","validate","errors","Object","keys","values","handleChange","submitCount","handleSubmit","isSubmitting","style","maxWidth","name","onKeyDown","key","preventDefault","placeholder","TooltipChild","MediaField","src","Tooltip","arrow","alt","tooltip","backgroundImage","Files","Math","random","slice","formatBytes","b","c","d","floor","log","parseFloat","pow","toFixed","getFileExtension","mime","extension","pop","er","PageTitle","rest","SelectMedia","multiple","uploadRef","topRef","isTopVisible","setIsTopVisible","refreshCounter","setCounter","useSelector","state","collectionTypes","find","scrollIntoView","behavior","uploaded","uploadFile","click","MediaDocumentFormatters","callMedia","FilesManager","storage","getStorage","nameParts","fileName","shortuuid","generate","fileRef","uploadTask","uploadBytesResumable","on","snapshot","getDownloadURL","then","downloadUrl","path","deleteObject","upload","res","fileDetails","storagePath","addDocument","_path","Wrapper","String","Number","Map","Array","Boolean","Media","Enum","Password","Relation","_excluded","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgSubcollection","_ref","svgRef","titleId","width","height","viewBox","fill","xmlns","ForwardRef","Textarea","stringLong","Input","require","jsonlint","JsonEditor","initialValue","setInitialValue","count","setCount","JSON","stringify","mode","theme","lineNumbers","autoCloseBrackets","lint","gutters","editor","parse","Any","useStyles","makeStyles","switchBase","color","getComputedStyle","documentElement","getPropertyValue","backgroundColor","track","background","CustomSwitch","Switch","Date","ReorderSelectedFiles","selectedFiles","setSelectedFiles","onClose","DraggableList","onDragEnd","result","destination","items","list","startIndex","endIndex","from","removed","reorder","containerClassName","item","Item","ButtonBase","SvgMedia","MediaInput","activeIndex","setActiveIndex","openReordering","setOpenReordering","selectFiles","prevFiles","Modal","SingleMediaInput","selectedFile","setSelectedFile","MultipleMediaInput","RichText","mdParser","MarkdownIt","onCustomImageUpload","text","renderHTML","RichTextEditor","minHeight","enumOptions","opt","RelationFieldValue","valueLabel","setValueLabel","labelField","getDocument","console","RelationField","fieldType","relatedCollectionTypeDocId","relationOneToOne","IconButton","CollectionTable","docIds","SubcollectionDocument","editableDocument","level","padding","min","DocumentForm","getSubcollectionDocument","docIndex","Validate","plain","setPlain","createPassword","fetch","location","origin","method","body","json","onBlur","password","HashedPasswordField","HashedPasswordComponent","Badge","StringBadge","StringComponent","DefaultValidation","NumberBadge","NumberComponent","MapBadge","AnyComponent","obj","Error","ArrayBadge","BooleanBadge","BooleanComponent","DateBadge","DateComponent","MediaBadge","MediaComponent","RichTextBadge","RichTextComponent","JsonBadge","EnumBadge","EnumComponent","PasswordBadge","PasswordComponent","RelationBadge","RelationComponent","SubcollectionBadge","SubcollectionField","collectionFields","AnyBadge","dispatch","payload","allFieldTypes","FieldTypes","string","array","media","date","enum","number","boolean","relation","collection","documentFields","reduce","any","useDispatch","initial","validateOnChange","enableReinitialize","setFieldValue","hasChanged","isDefault","_circle","_circle2","SvgOneToOne","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","_path2","_circle3","SvgOneToMany","useDraggableInPortal","self","div","position","pointerEvents","top","elt","provided","args","element","draggableProps","createPortal","renderDraggable","uniqid","formatId","keyword","droppableId","droppableProps","innerRef","draggableId","dragHandleProps","setDoc","single","updateDocument","goBack"],"mappings":"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","file":"static/js/9.b73904bd.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport Document from \"components/Document\";\r\n\r\ntype CollectionParams = { id: string; docId: string };\r\nexport interface AddDocumentProps extends RouteComponentProps<CollectionParams> {}\r\n\r\nconst AddDocument: React.FC<AddDocumentProps> = ({ match }) => {\r\n  const collectionId = match.params.id;\r\n  const docId = match.params.docId;\r\n\r\n  return <Document collectionId={collectionId} docId={docId}></Document>;\r\n};\r\n\r\nexport default AddDocument;\r\n","import ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"store\";\r\nimport NotificationsProvider from \"components/NotificationsProvider\";\r\n\r\nexport interface CallableComponent<T> {\r\n  proceed: (v: T) => void;\r\n}\r\n\r\ninterface callComponentArgs<T> {\r\n  Component: React.FC<any>;\r\n  props: Omit<T, \"proceed\">;\r\n}\r\n\r\nexport function callComponent<T, RT>({ Component, props }: callComponentArgs<T>): Promise<RT> {\r\n  return new Promise((resolve, reject) => {\r\n    const wrapper = document.getElementById(\"root\")?.appendChild(document.createElement(\"div\"));\r\n\r\n    if (wrapper) {\r\n      ReactDOM.render(\r\n        <Provider store={store}>\r\n          <NotificationsProvider>\r\n            <Component\r\n              {...props}\r\n              proceed={(val: RT) => {\r\n                ReactDOM.unmountComponentAtNode(wrapper);\r\n                wrapper.parentNode?.removeChild(wrapper);\r\n                resolve(val);\r\n              }}\r\n            />\r\n          </NotificationsProvider>\r\n        </Provider>,\r\n        wrapper\r\n      );\r\n    }\r\n  });\r\n}\r\n","import { IoAlertCircleOutline } from \"react-icons/io5\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport React, { SelectHTMLAttributes } from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <IoAlertCircleOutline className=\"text-red-FF0000\" size={20}></IoAlertCircleOutline>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport interface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {\r\n  className?: string;\r\n  options: { label: string; value: string | number }[];\r\n  error?: string | boolean;\r\n  groundColor: \"white\" | \"black\";\r\n}\r\n\r\nconst Select: React.FC<SelectProps> = ({\r\n  className = \"\",\r\n  options,\r\n  error,\r\n  groundColor,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <div className={`${className} relative flex items-center`}>\r\n      <select\r\n        className={classNames(\"px-3 h-full border-2 border-solid w-full rounded outline-none\", {\r\n          \"border-red-FF0000\": error,\r\n          \"focus:border-fireck-4\": !error,\r\n          \"border-gray-300 bg-gray-300\": groundColor === \"white\",\r\n          \"border-white bg-white\": groundColor === \"black\",\r\n        })}\r\n        {...props}\r\n        spellCheck={false}\r\n      >\r\n        {options.map((x, i) => (\r\n          <option data-testid={`select-option-${x.value}`} key={\"opt-\" + i} value={x.value}>\r\n            {x.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import { callComponent } from \"api/callComponent\";\r\nimport Button from \"components/Button\";\r\n\r\nexport interface CreateIndexModalProps {\r\n  proceed: Function;\r\n  url: string;\r\n}\r\n\r\nconst CreateIndexModal: React.FC<CreateIndexModalProps> = ({ proceed, url }) => {\r\n  return (\r\n    <div\r\n      className=\"fixed left-0 top-0 w-full h-full flex bg-black bg-opacity-40\"\r\n      onMouseDown={() => proceed(false)}\r\n    >\r\n      <div onMouseDown={(e) => e.stopPropagation()} className=\"bg-white rounded p-7  m-auto\">\r\n        <div className=\"mb-12\">This query requires creating an index.</div>\r\n        <div className=\"flex justify-between\">\r\n          <Button\r\n            className=\"bg-fireck-5 hover:bg-fireck-5-hover min-w-unset text-white h-28px\"\r\n            onClick={() => proceed(false)}\r\n          >\r\n            Later\r\n          </Button>\r\n          <Button\r\n            className=\"bg-fireck-4 hover:bg-fireck-4-hover min-w-unset h-28px\"\r\n            onClick={() => {\r\n              window.open(url, \"_blank\");\r\n              proceed(false);\r\n            }}\r\n          >\r\n            Create\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateIndexModal;\r\n\r\nexport const createIndex = (url: string) => {\r\n  callComponent<CreateIndexModalProps, boolean>({ Component: CreateIndexModal, props: { url } });\r\n};\r\n","import { Document, getCollection, GetCollectionOptions } from \"api/collections\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport { FilterType } from \"components/TableElements/CollectionTable\";\r\nimport { createIndex } from \"components/TableElements/CreateIndex\";\r\nimport { useEffect, useRef, useState, useCallback } from \"react\";\r\n\r\ninterface UseFetchProps {\r\n  collectionId: string;\r\n  filters?: FilterType[];\r\n  orderBy?: { fieldId: string; direction: \"asc\" | \"desc\" };\r\n  inView: boolean;\r\n}\r\n\r\nconst useFetch = ({ collectionId, filters = [], orderBy, inView }: UseFetchProps) => {\r\n  const [docs, setDocs] = useState<Document[]>([]);\r\n  const inViewRef = useRef(false);\r\n  const endReached = useRef(false);\r\n  const filterSortTriggered = useRef(false);\r\n  const notify = useNotify();\r\n  const [loading, setLoading] = useState(false);\r\n  const abortController = useRef(new AbortController());\r\n  const [filterSortCounter, setFilterSortCounter] = useState(0);\r\n\r\n  const getOptions = useCallback(\r\n    (data: Document[]) => {\r\n      let options: GetCollectionOptions = { collectionId };\r\n\r\n      options.where = \"\";\r\n      options.orderBy = \"\";\r\n\r\n      filters.forEach((f, i) => {\r\n        options.where += (i > 0 ? \";\" : \"\") + f.fieldId + \",\" + f.operator + \",\" + f.value;\r\n        if (orderBy && orderBy.fieldId !== f.fieldId) {\r\n          options.orderBy += (options.orderBy ? \";\" : \"\") + f.fieldId;\r\n        }\r\n      });\r\n\r\n      if (orderBy) {\r\n        options.orderBy += (options.orderBy ? \";\" : \"\") + `${orderBy.fieldId},${orderBy.direction}`;\r\n      }\r\n      if (!orderBy && !filters.length) {\r\n        options.orderBy = \"createdAt,asc\";\r\n      }\r\n\r\n      if (data.length) {\r\n        options.startAfter = data[data.length - 1][orderBy ? orderBy.fieldId : \"createdAt\"];\r\n      }\r\n      options.populateRef = false;\r\n\r\n      return options;\r\n    },\r\n    [orderBy, filters, collectionId]\r\n  );\r\n\r\n  const onError = (message: string) => {\r\n    if (message.includes(\"FAILED_PRECONDITION\")) {\r\n      createIndex(message.split(\"it here:\")[1]);\r\n    } else {\r\n      notify(message, { variant: \"error\" });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    inViewRef.current = inView;\r\n    const fetcher = async () => {\r\n      if ((!endReached.current && inViewRef.current) || filterSortTriggered.current) {\r\n        let triggeredBySortFilter = filterSortTriggered.current;\r\n        filterSortTriggered.current = false;\r\n\r\n        let options = getOptions(triggeredBySortFilter ? [] : docs);\r\n        setLoading(true);\r\n\r\n        const newData = await getCollection(options, abortController.current.signal);\r\n\r\n        if (newData.error) {\r\n          if (newData.error !== \"aborted\") {\r\n            onError(newData.error);\r\n          }\r\n        } else {\r\n          setDocs((prev) => (triggeredBySortFilter ? newData : [...prev, ...newData]));\r\n          if (newData.length < (options.limit || 10)) {\r\n            endReached.current = true;\r\n          }\r\n        }\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetcher();\r\n\r\n    return () => {\r\n      abortController.current.abort();\r\n      abortController.current = new AbortController();\r\n    };\r\n  }, [inView, docs, filterSortCounter]);\r\n\r\n  useEffect(() => {\r\n    filterSortTriggered.current = true;\r\n    endReached.current = false;\r\n    setFilterSortCounter((prev) => prev + 1);\r\n  }, [filters, orderBy]);\r\n\r\n  return { docs, setDocs, loading };\r\n};\r\n\r\nexport default useFetch;\r\n","import { Document } from \"api/collections\";\r\nimport { CollectionType, AnyField } from \"api/collectionTypes\";\r\nimport { deleteDocument } from \"api/collections\";\r\nimport FilesCell from \"./FilesCell\";\r\nimport React, { useEffect } from \"react\";\r\nimport ExpandMoreRounded from \"@mui/icons-material/ExpandMoreRounded\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport AddFilter from \"./AddFilter\";\r\nimport Button from \"components/Button\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport classNames from \"classnames\";\r\nimport useFetch from \"hooks/useFetch\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport Checkbox from \"@mui/material/Checkbox\";\r\nimport moment from \"moment\";\r\n\r\nexport interface TableProps {\r\n  collectionType: CollectionType;\r\n  onPick?: (a: Document[]) => void;\r\n  blackList?: string[];\r\n  singleSelect?: boolean;\r\n  valueFormatters?: { [key: string]: (val: any) => any };\r\n  groundColor: \"white\" | \"black\";\r\n  filters?: FilterType[];\r\n  onEdit?: (doc: Document) => void;\r\n  hideFilters?: boolean;\r\n}\r\n\r\nexport type FilterType = { fieldId: string; operator: string; value: string; hidden?: boolean };\r\n\r\nconst Table: React.FC<TableProps> = ({\r\n  collectionType,\r\n  onPick,\r\n  blackList = [],\r\n  singleSelect = false,\r\n  valueFormatters,\r\n  groundColor,\r\n  filters: _filters = [],\r\n  onEdit: _onEdit,\r\n  hideFilters = false,\r\n}) => {\r\n  const history = useHistory();\r\n\r\n  const [filters, setFilters] = React.useState<FilterType[]>([]);\r\n  const fields = collectionType.fields.filter((field) => field.displayOnTable);\r\n  const [selected, setSelected] = React.useState<string[]>([]);\r\n  const [orderBy, setOrderBy] = React.useState<{ fieldId: string; direction: \"asc\" | \"desc\" }>();\r\n  const [endIsInView, setEndIsInView] = React.useState(false);\r\n\r\n  const { docs, setDocs } = useFetch({\r\n    collectionId: collectionType.id,\r\n    filters,\r\n    orderBy,\r\n    inView: endIsInView,\r\n  });\r\n\r\n  const onDeleteSelected = async () => {\r\n    if (await confirm({ confirmation: `Delete ${selected.length} documents?` })) {\r\n      selected.forEach((x) => {\r\n        deleteDocument(collectionType.id, x);\r\n      });\r\n      setDocs((prev) => prev.filter((x) => !selected.includes(x.docId)));\r\n      setSelected([]);\r\n    }\r\n  };\r\n\r\n  const onEdit =\r\n    _onEdit ||\r\n    ((doc: Document) => {\r\n      history.push(`/collections/${collectionType.id}/edit/${doc.docId}`);\r\n    });\r\n\r\n  const onOrder = (field: AnyField) =>\r\n    orderBy?.fieldId !== field.id\r\n      ? () => {\r\n          setOrderBy({ fieldId: field.id, direction: \"asc\" });\r\n        }\r\n      : orderBy?.direction !== \"asc\"\r\n      ? () => setOrderBy(undefined)\r\n      : () => setOrderBy({ fieldId: field.id, direction: \"desc\" });\r\n\r\n  const selectAll = (select: boolean) => setSelected(select ? docs.map((x) => x.docId) : []);\r\n\r\n  const selectHandler = (docId: string, checked: boolean) => {\r\n    if (checked) {\r\n      if (singleSelect) {\r\n        setSelected([docId]);\r\n      } else {\r\n        setSelected((prev) => [...prev, docId]);\r\n      }\r\n\r\n      return;\r\n    }\r\n    setSelected((prev) => {\r\n      let arr = [...prev];\r\n      let index = arr.findIndex((x) => x === docId);\r\n      if (index != null) {\r\n        arr.splice(index, 1);\r\n      }\r\n      return arr;\r\n    });\r\n  };\r\n\r\n  const formatValue = (field: AnyField, value: any) => {\r\n    return field.type === \"date\"\r\n      ? moment(value).format(\"YYYY-MM-DD HH:mm\")\r\n      : valueFormatters && field.id in valueFormatters\r\n      ? valueFormatters[field.id](value)\r\n      : value.toString().substring(0, 40);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (_filters.length) {\r\n      setFilters((prev) => [...prev, ..._filters]);\r\n    }\r\n  }, [_filters]);\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex-col flex\">\r\n      <div className=\"flex justify-between mb-3\">\r\n        {hideFilters ? null : (\r\n          <div className=\"flex flex-wrap\">\r\n            <AddFilter\r\n              collectionType={collectionType}\r\n              onValue={(val: FilterType) => setFilters((prev) => [val, ...prev])}\r\n            ></AddFilter>\r\n            {filters.map((f, i) =>\r\n              f.hidden ? null : (\r\n                <div\r\n                  key={`f-${i}`}\r\n                  className={classNames(\r\n                    \"rounded min-h-28px border leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative\",\r\n                    { \"text-white border-white\": groundColor === \"black\" },\r\n                    { \"text-black border-black\": groundColor === \"white\" }\r\n                  )}\r\n                >\r\n                  {f.fieldId} {f.operator} {f.value}{\" \"}\r\n                  <span\r\n                    onClick={() =>\r\n                      setFilters((prev) => {\r\n                        let arr = [...prev];\r\n                        arr.splice(i, 1);\r\n                        return arr;\r\n                      })\r\n                    }\r\n                    className=\"text-xs leading-28px ml-3 cursor-pointer\"\r\n                  >\r\n                    \r\n                  </span>\r\n                </div>\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {!onPick ? (\r\n          <Button\r\n            onClick={onDeleteSelected}\r\n            disabled={selected.length === 0}\r\n            className={`px-7 mb-3 min-w-unset h-28px ${\r\n              selected.length === 0\r\n                ? \"bg-gray-E1E1E1 text-gray-6C6C6C cursor-default\"\r\n                : \"bg-red-FF0000 hover:bg-red-FF0000-hover text-white\"\r\n            } `}\r\n          >\r\n            Delete\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            onClick={() => onPick(docs.filter((x) => selected.includes(x.docId)))}\r\n            className={`h-28px min-w-unset mb-3 px-7 ${\r\n              selected.length === 0\r\n                ? \"bg-gray-300 text-gray-500 cursor-default\"\r\n                : \"bg-fireck-4 hover:bg-fireck-4-hover\"\r\n            } `}\r\n          >\r\n            Select\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <div\r\n        className={classNames(\"flex-grow h-0 -mt-3 rounded overflow-hidden bg-white\", {\r\n          \"shadow-border-gray\": groundColor === \"white\",\r\n        })}\r\n      >\r\n        <SimpleBar className={\"relative scrollbar-light h-full\"} autoHide={false}>\r\n          <table className=\"w-full text-center\">\r\n            <thead>\r\n              <tr className=\"whitespace-nowrap\">\r\n                <th className=\"sticky top-0 bg-gray-E1E1E1 z-10 px-1\">\r\n                  {singleSelect ? null : (\r\n                    <Checkbox\r\n                      size=\"small\"\r\n                      classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                      checked={selected.length === docs.length}\r\n                      onChange={(e) => selectAll(e.target.checked)}\r\n                    ></Checkbox>\r\n                  )}\r\n                </th>\r\n                {fields.map((field, i) => (\r\n                  <th className=\"font-semibold sticky top-0 bg-gray-E1E1E1\" key={`th-${i}`}>\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <div className=\"w-5\"></div>\r\n                      <div className=\"cursor-pointer select-none\" onClick={onOrder(field)}>\r\n                        {field.id}\r\n                      </div>\r\n                      <div className=\"w-5\">\r\n                        {orderBy?.fieldId === field.id ? (\r\n                          <ExpandMoreRounded\r\n                            fontSize=\"small\"\r\n                            className={`${\r\n                              orderBy?.direction === \"asc\" ? \"transform rotate-180\" : \"\"\r\n                            }`}\r\n                          ></ExpandMoreRounded>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {docs.map((doc, i) =>\r\n                blackList.includes(doc.docId) ? null : (\r\n                  <tr\r\n                    onClick={() =>\r\n                      onPick ? selectHandler(doc.docId, !selected.includes(doc.docId)) : onEdit(doc)\r\n                    }\r\n                    key={`row-${i}`}\r\n                    className={\"cursor-pointer hover:bg-fireck-4\"}\r\n                  >\r\n                    <td className=\"px-1\" onClick={(e) => e.stopPropagation()}>\r\n                      <Checkbox\r\n                        size=\"small\"\r\n                        classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                        checked={selected.includes(doc.docId)}\r\n                        onChange={(e) => selectHandler(doc.docId, e.target.checked)}\r\n                      ></Checkbox>\r\n                    </td>\r\n                    {fields.map((field, j) => (\r\n                      <td key={`row-${i}-col-${j}`} className=\"px-2\">\r\n                        {doc[field.id] != null ? (\r\n                          field.type === \"media\" ? (\r\n                            field.mediaSingle ? (\r\n                              <FilesCell file={doc[field.id]}></FilesCell>\r\n                            ) : (\r\n                              <FilesCell files={doc[field.id]} />\r\n                            )\r\n                          ) : (\r\n                            <div className=\"whitespace-nowrap\">\r\n                              {formatValue(field, doc[field.id])}\r\n                            </div>\r\n                          )\r\n                        ) : null}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                )\r\n              )}\r\n              <tr>\r\n                <td colSpan={fields.length + 1}>\r\n                  <InView\r\n                    onChange={async (inView) => {\r\n                      setEndIsInView(inView);\r\n                    }}\r\n                  >\r\n                    <div className=\"w-full\"></div>\r\n                  </InView>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          <div></div>\r\n        </SimpleBar>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import React from \"react\";\r\nimport ErrorRounded from \"@mui/icons-material/ErrorRounded\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport classNames from \"classnames\";\r\n\r\nexport interface LabelProps {\r\n  error?: string | undefined | null;\r\n  className?: string;\r\n  children: any;\r\n  groundColor: \"black\" | \"white\";\r\n}\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <ErrorRounded className=\"text-red-500 text-xl\" fontSize=\"inherit\"></ErrorRounded>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst Label: React.FC<LabelProps> = ({ className = \"\", children, error, groundColor }) => {\r\n  return (\r\n    <div\r\n      className={classNames(`flex justify-between relative ${className}`, {\r\n        \"text-white\": groundColor === \"black\",\r\n        \"text-black\": groundColor === \"white\",\r\n      })}\r\n    >\r\n      <div>{children}</div>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Label;\r\n","import Modal from \"@mui/material/Modal\";\r\nimport Input from \"components/Input\";\r\nimport Select from \"components/Select\";\r\nimport Button from \"components/Button\";\r\nimport { CollectionType } from \"api/collectionTypes\";\r\nimport React from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport Label from \"components/Label\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\n\r\nexport interface AddFilterModalProps {\r\n  collectionType: Pick<CollectionType, \"fields\">;\r\n  onValue: Function;\r\n  groundColor?: \"black\" | \"white\";\r\n}\r\n\r\nconst AddFilterModal: React.FC<AddFilterModalProps> = ({\r\n  collectionType,\r\n  onValue,\r\n  groundColor = \"white\",\r\n}) => {\r\n  const operators = [\r\n    \"<\",\r\n    \"<=\",\r\n    \"==\",\r\n    \">\",\r\n    \">=\",\r\n    \"!=\",\r\n    \"array-contains\",\r\n    \"array-contains-any\",\r\n    \"in\",\r\n    \"not-in\",\r\n  ];\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const { values, errors, handleChange, submitCount, handleSubmit, isSubmitting } = useFormik({\r\n    onSubmit: async (vals, { resetForm }) => {\r\n      onValue(vals);\r\n      setOpen(false);\r\n      resetForm();\r\n    },\r\n    initialValues: {\r\n      value: \"\",\r\n      operator: \"\",\r\n      fieldId: \"\",\r\n    },\r\n    validate: (vals: any) => {\r\n      let errors: any = {};\r\n      Object.keys(vals).forEach((x) => {\r\n        if (!vals[x]) {\r\n          errors[x] = \"Required\";\r\n        }\r\n      });\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => setOpen(true)}\r\n        className=\"bg-fireck-4 hover:bg-fireck-4-hover min-w-unset flex items-center justify-center h-28px px-7 rounded text-sm mr-3 mb-3\"\r\n      >\r\n        Filters\r\n      </Button>\r\n      {!open ? null : (\r\n        <Modal open={open}>\r\n          <div\r\n            className=\"fixed left-0 top-0 w-full h-full flex p-7\"\r\n            onMouseDown={() => setOpen(false)}\r\n          >\r\n            <div\r\n              onMouseDown={(e) => e.stopPropagation()}\r\n              className=\"bg-white rounded p-7 m-auto relative animate-littlemoveup\"\r\n              style={{ maxWidth: 600 }}\r\n            >\r\n              <CloseRounded\r\n                className=\"absolute top-0 right-0 cursor-pointer\"\r\n                onClick={() => setOpen(false)}\r\n              ></CloseRounded>\r\n              <div className=\"flex flex-wrap -mx-2 mb-4\">\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    groundColor={groundColor}\r\n                    className=\"mb-2\"\r\n                    error={submitCount > 0 ? errors.fieldId : null}\r\n                  >\r\n                    Field\r\n                  </Label>\r\n                  <Select\r\n                    className=\"h-34px\"\r\n                    groundColor=\"white\"\r\n                    name=\"fieldId\"\r\n                    onChange={handleChange}\r\n                    value={values.fieldId}\r\n                    options={[\r\n                      { value: \"\", label: \"Select\" },\r\n                      ...collectionType.fields.map((x) => ({ value: x.id, label: x.id })),\r\n                    ]}\r\n                  ></Select>\r\n                </div>\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    groundColor={groundColor}\r\n                    className=\"mb-2\"\r\n                    error={submitCount > 0 ? errors.operator : null}\r\n                  >\r\n                    Operator\r\n                  </Label>\r\n                  <Select\r\n                    className=\"h-34px\"\r\n                    groundColor=\"white\"\r\n                    name=\"operator\"\r\n                    onChange={handleChange}\r\n                    value={values.operator}\r\n                    options={[\r\n                      { value: \"\", label: \"Select\" },\r\n                      ...operators.map((x) => ({ value: x, label: x })),\r\n                    ]}\r\n                  ></Select>\r\n                </div>\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    groundColor={groundColor}\r\n                    className=\"mb-2 text-black\"\r\n                    error={submitCount > 0 ? errors.value : null}\r\n                  >\r\n                    Value\r\n                  </Label>\r\n                  <Input\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === \"Enter\") {\r\n                        e.preventDefault();\r\n                        handleSubmit();\r\n                      }\r\n                    }}\r\n                    groundColor=\"white\"\r\n                    placeholder={\r\n                      [\"in\", \"not in\", \"array-contains-any\"].includes(values.operator)\r\n                        ? \"value, value, value\"\r\n                        : \"value\"\r\n                    }\r\n                    className=\"placeholder-black h-34px\"\r\n                    value={values.value}\r\n                    onChange={handleChange}\r\n                    name=\"value\"\r\n                  ></Input>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex justify-end\">\r\n                <Button\r\n                  disabled={isSubmitting}\r\n                  onClick={() => handleSubmit()}\r\n                  className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px\"\r\n                >\r\n                  Add\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddFilterModal;\r\n","import { forwardRef } from \"react\";\r\n\r\nconst TooltipChild = forwardRef(function MyComponent(props: any, ref: any) {\r\n  return <div {...props} ref={ref}></div>;\r\n});\r\n\r\nexport default TooltipChild;\r\n","import TooltipChild from \"components/TooltipChild\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\n\r\ninterface MediaFieldProps {\r\n  src: string;\r\n}\r\n\r\nconst MediaField: React.FC<MediaFieldProps> = ({ src }) => {\r\n  return (\r\n    <Tooltip\r\n      arrow\r\n      title={\r\n        <div className=\"p-1\">\r\n          <img src={src} className=\"max-w-136px max-h-136px w-auto h-auto\" alt=\"\" />\r\n        </div>\r\n      }\r\n      placement=\"top\"\r\n      classes={{\r\n        tooltip: \"font-poppins text-xs p-0 rounded bg-fireck-1\",\r\n        arrow: \"text-fireck-1\",\r\n      }}\r\n    >\r\n      <TooltipChild>\r\n        <div className=\"group w-4 h-4 relative flex items-center justify-center rounded hover:bg-gray-535371 hover:bg-opacity-5 cursor-pointer\">\r\n          <div\r\n            className=\"relative w-4 h-4 rounded-full bg-center bg-cover pointer-events-none\"\r\n            style={{ backgroundImage: `url(${src})` }}\r\n          ></div>\r\n        </div>\r\n      </TooltipChild>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default MediaField;\r\n","import React from \"react\";\r\nimport MediaField from \"./MediaField\";\r\n\r\nexport interface FilesProps {\r\n  files?: string[];\r\n  file?: string;\r\n}\r\n\r\nconst Files: React.FC<FilesProps> = ({ files, file }) => {\r\n  const id = React.useRef<number>(Math.random());\r\n\r\n  return (\r\n    <div className=\"flex justify-center\">\r\n      {(files ? files : file ? [file] : []).slice(0, 4).map((f, i) => (\r\n        <div key={`${id}-file-${i}`} className=\"mr-0.5\">\r\n          <MediaField src={f}></MediaField>\r\n        </div>\r\n      ))}\r\n      {files && files.length > 4 ? (\r\n        <div className=\"relative\">\r\n          <div className=\"w-4 h-4 rounded-full bg-fireck-4 text-10px flex items-center justify-center\">\r\n            {files.length - 4}+\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Files;\r\n","import mime from \"mime-types\";\r\n\r\nexport function formatBytes(a: number, b = 2) {\r\n  if (0 === a) return \"0 Bytes\";\r\n  const c = 0 > b ? 0 : b,\r\n    d = Math.floor(Math.log(a) / Math.log(1024));\r\n  return (\r\n    parseFloat((a / Math.pow(1024, d)).toFixed(c)) +\r\n    \" \" +\r\n    [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"][d]\r\n  );\r\n}\r\n\r\nexport function getFileExtension(file: File): string {\r\n  try {\r\n    return mime.extension(file.type) || file.name.split(\".\").pop() || \"unknown\";\r\n  } catch (er) {\r\n    return \"unknown\";\r\n  }\r\n}\r\n","import classNames from \"classnames\";\r\n\r\nexport interface PageTitleProps\r\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ className, ...rest }) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={classNames(\"text-27px text-white font-medium capitalize leading-none\", className)}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default PageTitle;\r\n","import ButtonBase from \"@mui/material/ButtonBase\";\r\nimport React from \"react\";\r\nimport { uploadFile } from \"api/files\";\r\nimport Button from \"components/Button\";\r\nimport AddRounded from \"@mui/icons-material/AddRounded\";\r\nimport ExpandLessRounded from \"@mui/icons-material/ExpandLessRounded\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport CollectionTable from \"components/TableElements/CollectionTable\";\r\nimport { MediaDocumentFormatters } from \".\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\n\r\nexport interface SelectMediaProps {\r\n  multiple?: boolean;\r\n  proceed: Function;\r\n}\r\n\r\nconst SelectMedia: React.FC<SelectMediaProps> = ({ multiple = false, proceed }) => {\r\n  const uploadRef = React.useRef(null as any);\r\n  const topRef = React.useRef(null as any);\r\n  const [loading, setLoading] = React.useState<boolean | string>(false);\r\n  const [isTopVisible, setIsTopVisible] = React.useState(false);\r\n  const [refreshCounter, setCounter] = React.useState(0);\r\n\r\n  const { collectionType } = useSelector((state: RootState) => {\r\n    return {\r\n      collectionType: state.collectionTypes.find((x) => x.id === \"FilesReservedCollection\"),\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"fixed z-30 left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40\">\r\n      <div className=\"m-auto p-8 rounded bg-white max-w-846px w-full max-h-552px h-full relative flex-col flex animate-littlemoveup\">\r\n        {!isTopVisible ? (\r\n          <ButtonBase\r\n            className=\"z-30 absolute shadow-2xl outline-none right-6 bottom-3 w-34px h-34px rounded flex cursor-pointer text-black bg-orange-300 hover:bg-orange-301 items-center justify-center\"\r\n            onClick={() => topRef.current.scrollIntoView({ behavior: \"smooth\" })}\r\n          >\r\n            <ExpandLessRounded></ExpandLessRounded>\r\n          </ButtonBase>\r\n        ) : null}\r\n        <CloseRounded\r\n          className=\"absolute top-0 right-0 cursor-pointer\"\r\n          onClick={() => proceed(false)}\r\n        ></CloseRounded>\r\n        <InView onChange={(inView) => setIsTopVisible(inView)}>\r\n          <div ref={topRef}></div>\r\n        </InView>\r\n        <div className=\"flex justify-between flex-wrap mb-7\">\r\n          <div className=\"font-medium text-2xl leading-none mb-4 mr-4\">Select file</div>\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            className=\"hidden\"\r\n            ref={uploadRef}\r\n            onChange={async (e) => {\r\n              const files = e.target.files;\r\n              if (files && files.length) {\r\n                setLoading(`Uploading ${files.length} file${files.length > 1 ? \"s\" : \"\"}...`);\r\n                let uploaded = 0;\r\n                for (let file of files) {\r\n                  const res = await uploadFile(file);\r\n                  uploaded++;\r\n\r\n                  setLoading(`${uploaded}/${files.length} uploaded.`);\r\n                }\r\n                setCounter((prev) => prev + 1);\r\n                setLoading(false);\r\n              }\r\n            }}\r\n          />\r\n          <Button\r\n            onClick={() => uploadRef.current.click()}\r\n            className=\"bg-fireck-4 hover:bg-fireck-4-hover h-28px mb-4 min-w-unset\"\r\n          >\r\n            <div className=\"flex items-center\">\r\n              <AddRounded className=\"mr-2 text-lg\" fontSize=\"inherit\"></AddRounded>\r\n              <span>Upload</span>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n        <div className=\"flex-grow h-0\">\r\n          {!collectionType ? null : (\r\n            <CollectionTable\r\n              groundColor=\"white\"\r\n              key={`media-table-${refreshCounter}`}\r\n              onPick={(files) => {\r\n                proceed(multiple ? files.map((f) => f.url) : files[0].url);\r\n              }}\r\n              singleSelect={!multiple}\r\n              collectionType={collectionType}\r\n              valueFormatters={MediaDocumentFormatters}\r\n            ></CollectionTable>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectMedia;\r\n\r\nexport const callMedia = (multiple = false) => {\r\n  return callComponent<SelectMediaProps, string | boolean>({\r\n    Component: SelectMedia,\r\n    props: { multiple },\r\n  });\r\n};\r\n","import {\r\n  deleteObject,\r\n  getDownloadURL,\r\n  getStorage,\r\n  ref,\r\n  uploadBytesResumable,\r\n} from \"firebase/storage\";\r\nimport shortuuid from \"short-uuid\";\r\n\r\nclass FilesManagerClass {\r\n  upload(file: File): Promise<{ downloadUrl: string; fileName: string } | { error: string }> {\r\n    return new Promise((resolve) => {\r\n      try {\r\n        const storage = getStorage();\r\n        const nameParts = file.name.split(\".\");\r\n        const fileName = shortuuid.generate() + \".\" + nameParts[nameParts.length - 1];\r\n        let fileRef = ref(storage, fileName);\r\n\r\n        const uploadTask = uploadBytesResumable(fileRef, file);\r\n        uploadTask.on(\r\n          \"state_changed\",\r\n          (snapshot) => {},\r\n          (error) => {\r\n            resolve({ error: error.name });\r\n          },\r\n          () => {\r\n            getDownloadURL(uploadTask.snapshot.ref).then((downloadUrl) => {\r\n              resolve({ downloadUrl, fileName });\r\n            });\r\n          }\r\n        );\r\n      } catch (error: any) {\r\n        resolve({ error });\r\n      }\r\n    });\r\n  }\r\n\r\n  delete(path: string) {\r\n    const storage = getStorage();\r\n    deleteObject(ref(storage, path));\r\n  }\r\n}\r\n\r\nexport const FilesManager = new FilesManagerClass();\r\n","import { getFileExtension } from \"helper\";\r\nimport store from \"store\";\r\nimport { addDocument, deleteDocument, updateDocument } from \"./collections\";\r\nimport { FilesManager } from \"facades/FilesManager\";\r\n\r\nexport const uploadFile = async (file: File): Promise<{ error: string } | any> => {\r\n  try {\r\n    const res = await FilesManager.upload(file);\r\n\r\n    if (\"error\" in res) {\r\n      return res;\r\n    } else {\r\n      const fileDetails = {\r\n        name: file.name,\r\n        size: file.size,\r\n        url: res.downloadUrl,\r\n        storagePath: res.fileName,\r\n        type: getFileExtension(file),\r\n      };\r\n      return addDocument(\"FilesReservedCollection\", fileDetails);\r\n    }\r\n  } catch (error: any) {\r\n    return { error: error.toString() };\r\n  }\r\n};\r\n\r\nexport type FileDocument = {\r\n  docId: string;\r\n  name: string;\r\n  size: number;\r\n  storagePath: string;\r\n  createdAt: number;\r\n  url: string;\r\n};\r\n\r\nexport const getFiles = async ({\r\n  limit = 10,\r\n  orderBy,\r\n  startAt,\r\n  startAfter,\r\n}: {\r\n  limit?: number;\r\n  orderBy: string;\r\n  startAt?: string | number;\r\n  startAfter?: string | number;\r\n}): Promise<Array<FileDocument> | { error: string }> => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(\r\n      window.location.origin +\r\n        `/private/files?limit=${limit}${\r\n          startAt ? \"&startAt=\" + startAt : \"\"\r\n        }&orderBy=${orderBy},desc${startAfter ? `&startAfter=${startAfter}` : \"\"}`,\r\n      {\r\n        headers: { Authorization: \"Bearer \" + token },\r\n      }\r\n    ).then((x) => x.json());\r\n  } catch (error: any) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const getFilesCount = async () => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(window.location.origin + `/private/files/count`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const deleteFile = (docId: string, storagePath: string) => {\r\n  try {\r\n    FilesManager.delete(storagePath);\r\n    return deleteDocument(\"FilesReservedCollection\", docId);\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const editFile = (docId: string, updates: { [key: string]: any }) => {\r\n  try {\r\n    return updateDocument(\"FilesReservedCollection\", docId, updates);\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSubcollection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 11,\n    viewBox: \"0 0 19 19\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.570312 0.778809H6.57031V4.77881H0.570312V0.778809ZM12.5703 7.77881H18.5703V11.7788H12.5703V7.77881ZM12.5703 14.7788H18.5703V18.7788H12.5703V14.7788ZM10.5703 10.7788H4.57031V15.7788H10.5703V17.7788H4.57031H2.57031V6.77881H4.57031V8.77881H10.5703V10.7788Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSubcollection);\nexport default __webpack_public_path__ + \"static/media/subcollection.fddc67b1.svg\";\nexport { ForwardRef as ReactComponent };","interface WrapperProps {}\r\n\r\nconst Wrapper: React.FC<WrapperProps> = (props) => {\r\n  return (\r\n    <div\r\n      {...props}\r\n      className=\"w-8 rounded h-5 bg-fireck-4 text-center flex justify-center items-center text-10px font-medium\"\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default Wrapper;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst String: React.FC = () => {\r\n  return <Wrapper>Ab</Wrapper>;\r\n};\r\n\r\nexport default String;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Number: React.FC = () => {\r\n  return <Wrapper>123</Wrapper>;\r\n};\r\n\r\nexport default Number;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Map: React.FC = () => {\r\n  return <Wrapper>{\"{ }\"}</Wrapper>;\r\n};\r\n\r\nexport default Map;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Array: React.FC = () => {\r\n  return <Wrapper>[ ]</Wrapper>;\r\n};\r\n\r\nexport default Array;\r\n","import ToggleOnOutlinedIcon from \"@material-ui/icons/ToggleOnOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <ToggleOnOutlinedIcon fontSize=\"inherit\" className=\"text-lg\"></ToggleOnOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import CalendarTodayOutlinedIcon from \"@material-ui/icons/CalendarTodayOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <CalendarTodayOutlinedIcon fontSize=\"inherit\" className=\"text-sm\"></CalendarTodayOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import PanoramaOutlinedIcon from \"@material-ui/icons/PanoramaOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <PanoramaOutlinedIcon fontSize=\"inherit\" className=\"text-base\"></PanoramaOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import NotesIcon from \"@material-ui/icons/Notes\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <NotesIcon fontSize=\"inherit\" className=\"text-base\"></NotesIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <span className=\"text-10px\">JSON</span>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import ListRounded from \"@material-ui/icons/ListRounded\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Enum: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <ListRounded fontSize=\"inherit\" className=\"text-xl\"></ListRounded>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Enum;\r\n","import VpnKeyRounded from \"@material-ui/icons/VpnKeyRounded\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Password: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <VpnKeyRounded fontSize=\"inherit\" className=\"text-base\"></VpnKeyRounded>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import Link from \"@material-ui/icons/Link\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Relation: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <Link fontSize=\"inherit\" className=\"text-lg\"></Link>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Relation;\r\n","import { ReactComponent as SubColIcon } from \"assets/subcollection.svg\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <SubColIcon className=\"m-auto\"></SubColIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import Wrapper from \"./Wrapper\";\r\nimport AllInclusive from \"@mui/icons-material/AllInclusive\";\r\n\r\nconst Array: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <AllInclusive fontSize=\"inherit\" className=\"text-base\"></AllInclusive>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Array;\r\n","import classNames from \"classnames\";\r\nimport { TextareaHTMLAttributes } from \"react\";\r\n\r\nexport interface TextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {\r\n  className?: string;\r\n  groundColor: \"white\" | \"black\";\r\n}\r\n\r\nconst Textarea: React.FC<TextareaProps> = ({ className = \"\", groundColor, ...rest }) => {\r\n  return (\r\n    <textarea\r\n      {...rest}\r\n      className={classNames(\r\n        \"border-2 rounded px-3 py-2 w-full min-h-208px outline-none focus:border-fireck-4\",\r\n        className,\r\n        {\r\n          \"bg-gray-300  border-gray-300\": groundColor === \"white\",\r\n          \"bg-white border-white\": groundColor === \"black\",\r\n        }\r\n      )}\r\n    ></textarea>\r\n  );\r\n};\r\n\r\nexport default Textarea;\r\n","import { AnyField, StringField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport Textarea from \"components/Textarea\";\r\n\r\nexport interface FieldComponentProps<T> {\r\n  value: any;\r\n  onValue: (val: any) => void;\r\n  groundColor: \"white\" | \"black\";\r\n  name: string;\r\n  field: T;\r\n  level: number;\r\n}\r\n\r\nconst String: React.FC<FieldComponentProps<StringField>> = ({\r\n  field,\r\n  groundColor,\r\n  value,\r\n  onValue,\r\n  name,\r\n}) => {\r\n  return field.stringLong ? (\r\n    <Textarea\r\n      groundColor={groundColor}\r\n      value={value}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      name={name}\r\n    ></Textarea>\r\n  ) : (\r\n    <Input\r\n      groundColor={groundColor}\r\n      className=\"h-28px\"\r\n      type=\"text\"\r\n      value={value}\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default String;\r\n","import { UnControlled as CodeMirror } from \"react-codemirror2\";\r\nimport React from \"react\";\r\nimport \"codemirror/lib/codemirror.css\";\r\nimport \"codemirror/theme/material.css\";\r\nimport \"codemirror/addon/edit/closebrackets\";\r\nimport \"codemirror/mode/javascript/javascript\";\r\nimport \"codemirror/addon/lint/lint\";\r\nimport \"codemirror/addon/lint/lint.css\";\r\nrequire(\"codemirror/addon/lint/json-lint\");\r\ndeclare const window: any;\r\nconst jsonlint = require(\"jsonlint-mod\");\r\nwindow.jsonlint = jsonlint;\r\n\r\nexport interface JsonEditorProps {\r\n  value: string;\r\n  onChange: (val: string) => void;\r\n}\r\n\r\nconst JsonEditor: React.FC<JsonEditorProps> = ({ value, onChange }) => {\r\n  const [initialValue, setInitialValue] = React.useState(\"\");\r\n  const [count, setCount] = React.useState(0);\r\n  React.useEffect(() => {\r\n    if (count < 3) {\r\n      setCount((prev) => prev + 1);\r\n      setInitialValue(JSON.stringify(value, undefined, 2));\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [value]);\r\n  return (\r\n    <>\r\n      <style>{`.CodeMirror{\r\n          height: 100% !important;\r\n      }`}</style>\r\n      <CodeMirror\r\n        className=\"rounded overflow-auto h-208px\"\r\n        value={initialValue}\r\n        options={{\r\n          mode: \"application/json\",\r\n          theme: \"material\",\r\n          lineNumbers: true,\r\n          autoCloseBrackets: true,\r\n          lint: true,\r\n          gutters: [\"CodeMirror-lint-markers\"],\r\n        }}\r\n        onChange={(editor, data, value) => {\r\n          try {\r\n            onChange(JSON.parse(value));\r\n          } catch (er) {\r\n            onChange(value);\r\n          }\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default JsonEditor;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMedia(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 64,\n    height: 35,\n    viewBox: \"0 0 64 35\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M37.8352 0.201904L27.1818 14.4065L35.2784 25.202L30.7329 28.6111C25.9318 22.219 17.9488 11.5656 17.9488 11.5656L0.90332 34.2929H63.4035L37.8352 0.201904Z\",\n    fill: \"#23F3F3\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMedia);\nexport default __webpack_public_path__ + \"static/media/media.4ab29f77.svg\";\nexport { ForwardRef as ReactComponent };","import { SimpleField } from \"api/collectionTypes\";\r\nimport JsonEditor from \"components/JsonEditor\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Any: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue }) => {\r\n  return <JsonEditor value={value} onChange={(val) => onValue(val)}></JsonEditor>;\r\n};\r\n\r\nexport default Any;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Number: React.FC<FieldComponentProps<SimpleField>> = ({\r\n  value,\r\n  onValue,\r\n  groundColor,\r\n  name,\r\n}) => {\r\n  return (\r\n    <Input\r\n      groundColor={groundColor}\r\n      className=\"h-28px\"\r\n      type=\"number\"\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      value={value}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default Number;\r\n","import { makeStyles } from \"@mui/styles\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport { ChangeEvent } from \"react\";\r\n\r\nexport interface SwitchProps {\r\n  value: boolean;\r\n  onChange: (value: boolean) => void;\r\n  groundColor: \"black\" | \"white\";\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  switchBase: {\r\n    \"&$checked\": {\r\n      color: `${getComputedStyle(document.documentElement).getPropertyValue(\r\n        \"--fireck-4\"\r\n      )} !important`,\r\n    },\r\n    \"&$checked + $track\": {\r\n      backgroundColor: `${getComputedStyle(document.documentElement).getPropertyValue(\r\n        \"--fireck-4\"\r\n      )} !important`,\r\n    },\r\n  },\r\n  checked: {},\r\n  track: (props: any) => ({\r\n    background: `${props.groundColor === \"white\" ? \"black\" : \"white\"} !important`,\r\n  }),\r\n});\r\n\r\nconst CustomSwitch: React.FC<SwitchProps> = ({ value, onChange, groundColor }) => {\r\n  const classes = useStyles({ groundColor });\r\n  return (\r\n    <Switch\r\n      classes={classes}\r\n      checked={value}\r\n      onChange={(e: ChangeEvent<HTMLInputElement>) => onChange(e.target.checked)}\r\n    ></Switch>\r\n  );\r\n};\r\n\r\nexport default CustomSwitch;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Switch from \"components/Switch\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Boolean: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue, groundColor }) => {\r\n  return <Switch groundColor={groundColor} value={value} onChange={(val) => onValue(val)}></Switch>;\r\n};\r\n\r\nexport default Boolean;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Date: React.FC<FieldComponentProps<SimpleField>> = ({\r\n  value,\r\n  onValue,\r\n  groundColor,\r\n  name,\r\n}) => {\r\n  return (\r\n    <Input\r\n      groundColor={groundColor}\r\n      className=\"h-28px\"\r\n      type=\"date\"\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      value={value}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default Date;\r\n","import Button from \"components/Button\";\r\nimport React from \"react\";\r\nimport DragIndicatorRounded from \"@mui/icons-material/DragIndicatorRounded\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\nimport OpenInNew from \"@mui/icons-material/OpenInNew\";\r\nimport DeleteIcon from \"@mui/icons-material/DeleteOutlineOutlined\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\nimport DraggableList from \"./DraggableList\";\r\n\r\nexport interface ReorderSelectedFilesProps {\r\n  selectedFiles: string[];\r\n  setSelectedFiles: Function;\r\n  onClose: () => void;\r\n}\r\n\r\nconst reorder = (list: any[], startIndex: number, endIndex: number) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst ReorderSelectedFiles: React.FC<ReorderSelectedFilesProps> = ({\r\n  selectedFiles,\r\n  setSelectedFiles,\r\n  onClose,\r\n}) => {\r\n  const onDragEnd = (result: any) => {\r\n    // dropped outside the list\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    const items = reorder(selectedFiles, result.source.index, result.destination.index);\r\n\r\n    setSelectedFiles(items);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed z-30 left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40 p-7\"\r\n      onMouseDown={onClose}\r\n    >\r\n      <div\r\n        onMouseDown={(e) => e.stopPropagation()}\r\n        className=\"m-auto rounded bg-white max-w-552px w-full max-h-552px relative flex-col flex animate-littlemoveup\"\r\n      >\r\n        <CloseRounded\r\n          className=\"absolute right-0 top-0 cursor-pointer\"\r\n          onClick={onClose}\r\n        ></CloseRounded>\r\n        <div className=\"flex justify-between flex-wrap mb-4 px-9 pt-9 flex-shrink-0\">\r\n          <div className=\"font-medium text-2xl mr-4 mb-4\">Reorder files</div>\r\n          <Button className=\"mb-4 bg-fireck-4 hover:bg-fireck-4-hover\" onClick={onClose}>\r\n            Finish\r\n          </Button>\r\n        </div>\r\n        <DraggableList\r\n          onDragEnd={onDragEnd}\r\n          containerClassName=\"px-9 pb-9 flex-grow overflow-auto\"\r\n          items={selectedFiles.map((x) => ({ item: x }))}\r\n          Item={({ item, index }: { item: string; index: number }) => {\r\n            return (\r\n              <div className=\"pb-3\">\r\n                <div className=\"bg-gray-300 flex items-center rounded p-2 justify-between\">\r\n                  <div className=\"flex items-center\">\r\n                    <DragIndicatorRounded className=\"mr-4\" />\r\n                    <div className=\"bg-fireck-5 rounded\">\r\n                      <div\r\n                        className=\"bg-center bg-cover bg-no-repeat w-11 h-11\"\r\n                        style={{ backgroundImage: `url(${item})` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex\">\r\n                    <ButtonBase\r\n                      onClick={() => window.open(item, \"_blank\")}\r\n                      className=\"outline-none mr-2 h-26px w-26px rounded bg-fireck-4 hover:bg-fireck-4-hover\"\r\n                    >\r\n                      <OpenInNew fontSize=\"small\"></OpenInNew>\r\n                    </ButtonBase>\r\n                    <ButtonBase className=\"outline-none h-26px w-26px rounded bg-fireck-4 hover:bg-fireck-4-hover\">\r\n                      <DeleteIcon\r\n                        fontSize=\"small\"\r\n                        onClick={() => {\r\n                          let arr = [...selectedFiles];\r\n                          arr.splice(index, 1);\r\n                          setSelectedFiles(arr);\r\n                        }}\r\n                      ></DeleteIcon>\r\n                    </ButtonBase>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          }}\r\n        ></DraggableList>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReorderSelectedFiles;\r\n","import PhotoLibrary from \"@mui/icons-material/PhotoLibrary\";\r\nimport React from \"react\";\r\nimport ArrowBackIosRounded from \"@mui/icons-material/ArrowBackIosRounded\";\r\nimport ArrowForwardIosRounded from \"@mui/icons-material/ArrowForwardIosRounded\";\r\nimport AddRounded from \"@mui/icons-material/AddRounded\";\r\nimport EditRounded from \"@mui/icons-material/EditRounded\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport SelectMedia, { SelectMediaProps } from \"pages/Media/SelectMedia\";\r\nimport ReorderSelectedFiles from \"components/ReorderSelectedFiles\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport { ReactComponent as MediaIcon } from \"assets/media.svg\";\r\n\r\nexport interface MediaInputProps {\r\n  selectedFiles: string[];\r\n  setSelectedFiles: Function;\r\n}\r\n\r\nconst MediaInput: React.FC<MediaInputProps> = ({ selectedFiles, setSelectedFiles }) => {\r\n  const [activeIndex, setActiveIndex] = React.useState(0);\r\n  const [openReordering, setOpenReordering] = React.useState(false);\r\n\r\n  const selectFiles = async () => {\r\n    const res = await callComponent<SelectMediaProps, string[] | boolean>({\r\n      Component: SelectMedia,\r\n      props: { multiple: true },\r\n    });\r\n\r\n    if (typeof res !== \"boolean\") {\r\n      const prevFiles = [...selectedFiles];\r\n      setSelectedFiles([...res, ...prevFiles]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-208px border-2 rounded-md relative\">\r\n      {!selectedFiles.length ? (\r\n        <div className=\"flex w-full h-full cursor-pointer relative z-10\" onClick={selectFiles}>\r\n          <div className=\"m-auto flex items-center text-white\">\r\n            <MediaIcon className=\"text-39px mr-3\" fontSize=\"inherit\"></MediaIcon>\r\n            <div>Upload multiple files</div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n      {selectedFiles.map((x, i) => (\r\n        <>\r\n          <div\r\n            className={`absolute left-0 top-0 w-full h-full bg-center bg-contain bg-no-repeat ${\r\n              i !== activeIndex ? \"hidden\" : \"\"\r\n            }`}\r\n            style={{ backgroundImage: `url(${x})` }}\r\n          ></div>\r\n          <img src={x} alt=\"\" className=\"hidden\"></img>\r\n        </>\r\n      ))}\r\n      {selectedFiles.length ? (\r\n        <div className=\"absolute left-0 top-0 w-full h-full\">\r\n          <div className=\"relative flex items-center justify-between h-full\">\r\n            <div className=\"absolute left-0 top-0 p-3\">\r\n              <div className=\"h-26px rounded bg-fireck-4 px-3 text-sm leading-26px\">\r\n                {activeIndex + 1}/{selectedFiles.length}\r\n              </div>\r\n            </div>\r\n            <div className=\"absolute top-0 right-0 flex p-3\">\r\n              <ButtonBase\r\n                onClick={selectFiles}\r\n                className=\"outline-none h-26px w-26px mr-2 rounded bg-fireck-4 hover:bg-fireck-4-hover\"\r\n              >\r\n                <AddRounded fontSize=\"small\"></AddRounded>\r\n              </ButtonBase>\r\n              <ButtonBase\r\n                onClick={() => {\r\n                  setOpenReordering(true);\r\n                }}\r\n                className=\"outline-none h-26px w-26px rounded bg-fireck-4 hover:bg-fireck-4-hover\"\r\n              >\r\n                <EditRounded fontSize=\"small\"></EditRounded>\r\n              </ButtonBase>\r\n              <Modal open={openReordering}>\r\n                <ReorderSelectedFiles\r\n                  onClose={() => setOpenReordering(false)}\r\n                  selectedFiles={selectedFiles}\r\n                  setSelectedFiles={(files: string[]) => {\r\n                    setActiveIndex(0);\r\n                    setSelectedFiles(files);\r\n                  }}\r\n                ></ReorderSelectedFiles>\r\n              </Modal>\r\n            </div>\r\n            <ButtonBase\r\n              className=\"bg-fireck-4 hover:bg-fireck-4-hover p-4 outline-none\"\r\n              onClick={() => setActiveIndex((prev) => (prev > 0 ? prev - 1 : prev))}\r\n            >\r\n              <ArrowBackIosRounded></ArrowBackIosRounded>\r\n            </ButtonBase>\r\n            <ButtonBase\r\n              className=\"bg-fireck-4 hover:bg-fireck-4-hover p-4 outline-none\"\r\n              onClick={() =>\r\n                setActiveIndex((prev) => (prev < selectedFiles.length - 1 ? prev + 1 : prev))\r\n              }\r\n            >\r\n              <ArrowForwardIosRounded></ArrowForwardIosRounded>\r\n            </ButtonBase>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaInput;\r\n","import React from \"react\";\r\nimport DeleteRounded from \"@mui/icons-material/DeleteOutlineOutlined\";\r\nimport ButtonBase from \"@mui/material/ButtonBase\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport SelectMedia, { SelectMediaProps } from \"pages/Media/SelectMedia\";\r\nimport { ReactComponent as MediaIcon } from \"assets/media.svg\";\r\n\r\nexport interface SingleMediaInputProps {\r\n  selectedFile: string;\r\n  setSelectedFile: Function;\r\n}\r\n\r\nconst SingleMediaInput: React.FC<SingleMediaInputProps> = ({ selectedFile, setSelectedFile }) => {\r\n  return (\r\n    <div className=\"h-208px border-2 border-white rounded-md relative\">\r\n      {!selectedFile ? (\r\n        <div\r\n          className=\"flex w-full h-full cursor-pointer relative z-10\"\r\n          onClick={async () => {\r\n            const res = await callComponent<SelectMediaProps, string | boolean>({\r\n              Component: SelectMedia,\r\n              props: { multiple: false },\r\n            });\r\n\r\n            if (typeof res !== \"boolean\") {\r\n              setSelectedFile(res);\r\n            }\r\n          }}\r\n        >\r\n          <div className=\"m-auto flex items-center text-white\">\r\n            <MediaIcon className=\"text-39px mr-3\" fontSize=\"inherit\"></MediaIcon>\r\n            <div>Upload a file</div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n\r\n      <div\r\n        className=\"absolute left-0 top-0 w-full h-full bg-center bg-contain bg-no-repeat\"\r\n        style={{ backgroundImage: `url(${selectedFile})` }}\r\n      ></div>\r\n      {selectedFile ? (\r\n        <div className=\"absolute top-0 right-0 flex p-3\">\r\n          <ButtonBase\r\n            onClick={() => setSelectedFile(null)}\r\n            className=\"outline-none h-26px w-26px rounded bg-fireck-4 hover:bg-fireck-4-hover\"\r\n          >\r\n            <DeleteRounded fontSize=\"small\"></DeleteRounded>\r\n          </ButtonBase>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleMediaInput;\r\n","import { MediaField } from \"api/collectionTypes\";\r\nimport MultipleMediaInput from \"components/MultipleMediaInput\";\r\nimport SingleMediaInput from \"components/SingleMediaInput\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Media: React.FC<FieldComponentProps<MediaField>> = ({ value, onValue, field }) => {\r\n  return field.mediaSingle ? (\r\n    <SingleMediaInput\r\n      selectedFile={value}\r\n      setSelectedFile={(file: string) => onValue(file)}\r\n    ></SingleMediaInput>\r\n  ) : (\r\n    <MultipleMediaInput\r\n      selectedFiles={value}\r\n      setSelectedFiles={(files: string[]) => onValue(files)}\r\n    ></MultipleMediaInput>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import MdEditor from \"react-markdown-editor-lite\";\r\nimport \"react-markdown-editor-lite/lib/index.css\";\r\nimport MarkdownIt from \"markdown-it\";\r\nimport SelectMedia, { SelectMediaProps } from \"pages/Media/SelectMedia\";\r\nimport { callComponent } from \"api/callComponent\";\r\n\r\nexport interface RichTextProps {\r\n  style?: React.CSSProperties;\r\n  onChange: (a: string) => void;\r\n  value: string;\r\n}\r\n\r\nconst RichText: React.FC<RichTextProps> = ({ style = {}, onChange, value }) => {\r\n  const mdParser = new MarkdownIt();\r\n\r\n  return (\r\n    <div>\r\n      <style>{`.rc-md-navigation .button-wrap .button {\r\n        background-color: white !important;\r\n        border-radius: 4px !important;\r\n        margin-bottom: 2px !important;\r\n        margin-top: 2px !important;\r\n      }\r\n\r\n      .rc-md-navigation{\r\n        border-bottom: none !important;\r\n        background-color: transparent !important;\r\n        margin-bottom: 4px;\r\n      }\r\n\r\n      .rc-md-editor{\r\n        background-color: #EFF3F8 !important;\r\n        border: none !important;\r\n        padding: 7px !important;\r\n        border-radius: 4px !important;\r\n      } \r\n\r\n      .rc-md-editor textarea{\r\n        background-color: transparent !important;\r\n        // border-radius: 4px !important;\r\n        overflow: auto !important;\r\n        border-right: 1px solid #DDDDDD !important;\r\n      }\r\n\r\n      \r\n      \r\n      `}</style>\r\n      <MdEditor\r\n        placeholder=\"Type here...\"\r\n        onCustomImageUpload={(e) => {\r\n          return new Promise(async (resolve, reject) => {\r\n            const res = await callComponent<SelectMediaProps, string | boolean>({\r\n              Component: SelectMedia,\r\n              props: { multiple: false },\r\n            });\r\n\r\n            if (typeof res === \"string\") {\r\n              resolve({ url: res, text: \"image\" });\r\n            } else {\r\n              reject();\r\n            }\r\n          });\r\n        }}\r\n        value={value}\r\n        onChange={({ text }) => onChange(text)}\r\n        style={style}\r\n        renderHTML={(text) => mdParser.render(text)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RichText;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport RichTextEditor from \"components/RichTextEditor\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst RichText: React.FC<FieldComponentProps<SimpleField>> = ({ value, onValue }) => {\r\n  return (\r\n    <RichTextEditor\r\n      style={{ height: \"30vw\", minHeight: 400 }}\r\n      value={value}\r\n      onChange={(val) => onValue(val)}\r\n    ></RichTextEditor>\r\n  );\r\n};\r\n\r\nexport default RichText;\r\n","import { EnumField } from \"api/collectionTypes\";\r\nimport Select from \"components/Select\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Enum: React.FC<FieldComponentProps<EnumField>> = ({\r\n  value,\r\n  onValue,\r\n  groundColor,\r\n  name,\r\n  field,\r\n}) => {\r\n  return (\r\n    <Select\r\n      groundColor={groundColor}\r\n      options={[\r\n        { label: \"Select\", value: \"\" },\r\n        ...field.enumOptions.map((opt) => ({ label: opt, value: opt })),\r\n      ]}\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n      value={value}\r\n    ></Select>\r\n  );\r\n};\r\n\r\nexport default Enum;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Password: React.FC<FieldComponentProps<SimpleField>> = ({\r\n  value,\r\n  onValue,\r\n  groundColor,\r\n  name,\r\n}) => {\r\n  return (\r\n    <Input\r\n      groundColor={groundColor}\r\n      className=\"h-28px\"\r\n      type=\"password\"\r\n      value={value}\r\n      name={name}\r\n      onChange={(e) => onValue(e.target.value)}\r\n    ></Input>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import { CollectionType } from \"api/collectionTypes\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getDocument } from \"api/collections\";\r\n\r\ninterface RelationFieldValueProps {\r\n  value: string;\r\n  collectionType: CollectionType | undefined;\r\n  labelField: string;\r\n}\r\n\r\nconst RelationFieldValue: React.FC<RelationFieldValueProps> = (props) => {\r\n  const [valueLabel, setValueLabel] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const { value, labelField, collectionType } = props;\r\n    if (collectionType) {\r\n      (async () => {\r\n        try {\r\n          let res = await getDocument(collectionType.id, value);\r\n          if (!res.error) {\r\n            setValueLabel(res[labelField]);\r\n          }\r\n        } catch (er) {\r\n          console.log(er);\r\n        }\r\n      })();\r\n    }\r\n  }, [props, valueLabel]);\r\n\r\n  return <>{valueLabel}</>;\r\n};\r\n\r\nexport default RelationFieldValue;\r\n","import { RelationField as RelationFieldType } from \"api/collectionTypes\";\r\nimport React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport CollectionTable from \"./TableElements/CollectionTable\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport IconButton from \"./IconButton\";\r\nimport Link from \"@mui/icons-material/Link\";\r\nimport AddRounded from \"@mui/icons-material/AddRounded\";\r\nimport { ReactComponent as OneToOneIcon } from \"assets/one-to-one.svg\";\r\nimport { ReactComponent as OneToManyIcon } from \"assets/one-to-many.svg\";\r\nimport CloseRounded from \"@mui/icons-material/CloseRounded\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport DeleteOutlineOutlined from \"@mui/icons-material/DeleteOutlineOutlined\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport RelationFieldValue from \"components/RelationFieldValue\";\r\n\r\nexport interface RelationFieldProps {\r\n  fieldType: RelationFieldType;\r\n  value: string[] | string;\r\n  onValue: (a: string[] | string) => void;\r\n}\r\n\r\nconst RelationField: React.FC<RelationFieldProps> = ({ fieldType, value, onValue }) => {\r\n  const collectionType = useSelector((state: RootState) =>\r\n    state.collectionTypes.find((x) => x.docId === fieldType.relatedCollectionTypeDocId)\r\n  );\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  return (\r\n    <div className=\"bg-fireck-3 rounded p-5\">\r\n      <div className=\"flex flex-wrap justify-between\">\r\n        <div className=\"flex items-center font-medium text-fireck-4 mb-3 mr-3\">\r\n          <Link className=\"mr-3\" fontSize=\"small\"></Link>\r\n          <div className=\"capitalize mr-3\">{collectionType?.name}</div>\r\n          {fieldType.relationOneToOne ? (\r\n            <div className=\"flex w-8 text-white\">\r\n              <OneToOneIcon></OneToOneIcon>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex w-8 text-white\">\r\n              <OneToManyIcon></OneToManyIcon>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <IconButton onClick={() => setOpen(true)} className=\"mb-3\">\r\n          <AddRounded fontSize=\"small\"></AddRounded>\r\n        </IconButton>\r\n      </div>\r\n\r\n      <Modal open={open}>\r\n        <div\r\n          className=\"fixed left-0 top-0 w-full h-full flex overflow-auto p-12\"\r\n          onMouseDown={() => setOpen(false)}\r\n        >\r\n          <div\r\n            className=\"bg-white p-9 rounded w-full h-full flex flex-col relative\"\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"absolute right-0 top-0 cursor-pointer\" onClick={() => setOpen(false)}>\r\n              <CloseRounded></CloseRounded>\r\n            </div>\r\n            <div className=\"text-27px font-medium mb-5 capitalize leading-none\">\r\n              {collectionType?.name}\r\n            </div>\r\n            <div className=\"flex-grow h-0\">\r\n              {collectionType ? (\r\n                <CollectionTable\r\n                  groundColor=\"white\"\r\n                  collectionType={collectionType}\r\n                  blackList={typeof value === \"string\" ? [value] : value}\r\n                  singleSelect={typeof value === \"string\"}\r\n                  onPick={(docs) => {\r\n                    if (docs.length) {\r\n                      if (typeof value === \"string\") {\r\n                        onValue(docs[0].docId);\r\n                      } else {\r\n                        onValue([...value, ...docs.map((x) => x.docId)]);\r\n                      }\r\n\r\n                      setOpen(false);\r\n                    }\r\n                  }}\r\n                ></CollectionTable>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n      <div className=\"w-full max-h-64 overflow-auto bg-white rounded\">\r\n        {typeof value === \"string\" ? (\r\n          <div className=\"px-1 h-28px bg-white flex items-center justify-between\">\r\n            <span>\r\n              <RelationFieldValue\r\n                value={value}\r\n                collectionType={collectionType}\r\n                labelField={fieldType.labelField}\r\n              ></RelationFieldValue>\r\n            </span>\r\n            {!value ? null : (\r\n              <div\r\n                className=\"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-red-FF0000 hover:text-white\"\r\n                data-testid={`delete-for-field-${fieldType.id}-${value}`}\r\n                onClick={async () => {\r\n                  let res = await confirm({\r\n                    confirmation: \"Remove document?\",\r\n                  });\r\n                  if (res) {\r\n                    onValue(\"\");\r\n                  }\r\n                }}\r\n              >\r\n                <DeleteOutlineOutlined\r\n                  classes={{ root: \"pointer-events-none\" }}\r\n                  fontSize=\"inherit\"\r\n                ></DeleteOutlineOutlined>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <SimpleBar className=\"h-36 bg-white scrollbar-light scrollbar-thin\" autoHide={false}>\r\n            {value.map((x, i) => (\r\n              <div\r\n                className=\"px-1 hover:bg-fireck-4 flex justify-between \"\r\n                key={`relation-${fieldType.id}-docId-${x}`}\r\n              >\r\n                <div>\r\n                  <RelationFieldValue\r\n                    value={x}\r\n                    collectionType={collectionType}\r\n                    labelField={fieldType.labelField}\r\n                  ></RelationFieldValue>\r\n                </div>\r\n                <div className=\"flex items-center flex-grow justify-end\">\r\n                  <div\r\n                    className=\"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-red-FF0000 hover:text-white\"\r\n                    data-testid={`delete-for-field-${fieldType.id}-${x}`}\r\n                    onClick={async () => {\r\n                      let res = await confirm({\r\n                        confirmation: \"Remove document?\",\r\n                      });\r\n                      if (res) {\r\n                        let arr = [...value];\r\n                        arr.splice(i, 1);\r\n                        onValue(arr);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <DeleteOutlineOutlined\r\n                      classes={{ root: \"pointer-events-none\" }}\r\n                      fontSize=\"inherit\"\r\n                    ></DeleteOutlineOutlined>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </SimpleBar>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RelationField;\r\n","import { RelationField as RelationFieldType } from \"api/collectionTypes\";\r\nimport RelationField from \"components/RelationField\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Relation: React.FC<FieldComponentProps<RelationFieldType>> = ({ value, onValue, field }) => {\r\n  return (\r\n    <RelationField\r\n      onValue={(docIds) => onValue(docIds)}\r\n      fieldType={field}\r\n      value={value}\r\n    ></RelationField>\r\n  );\r\n};\r\n\r\nexport default Relation;\r\n","import { AnyField } from \"api/collectionTypes\";\r\nimport DocumentForm from \"./DocumentForm\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\nimport { Document } from \"api/collections\";\r\n\r\nexport interface SubcollectionDocumentProps {\r\n  fields: AnyField[];\r\n  proceed: (a: { [key: string]: any } | null) => void;\r\n  editableDocument?: { [key: string]: any };\r\n  level: number;\r\n}\r\n\r\nconst SubcollectionDocument: React.FC<SubcollectionDocumentProps> = ({\r\n  fields,\r\n  proceed,\r\n  editableDocument,\r\n  level,\r\n}) => {\r\n  return (\r\n    <div\r\n      style={{ padding: Math.min(level * 30, 90) }}\r\n      className=\"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40\"\r\n      onMouseDown={() => proceed(null)}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded h-full w-full p-9 relative animate-littlemoveup\"\r\n        onMouseDown={(e) => e.stopPropagation()}\r\n      >\r\n        <CloseRounded\r\n          className=\"absolute top-0 right-0 cursor-pointer\"\r\n          onClick={() => proceed(null)}\r\n        ></CloseRounded>\r\n        <DocumentForm\r\n          level={level + 1}\r\n          groundColor=\"white\"\r\n          editableDocument={editableDocument}\r\n          fields={fields}\r\n          onSubmit={proceed}\r\n        ></DocumentForm>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubcollectionDocument;\r\n\r\nexport const getSubcollectionDocument = (props: Omit<SubcollectionDocumentProps, \"proceed\">) => {\r\n  return callComponent<typeof props, Document | null>({\r\n    Component: SubcollectionDocument,\r\n    props,\r\n  });\r\n};\r\n","import { Document } from \"api/collections\";\r\nimport { AnyField } from \"api/collectionTypes\";\r\nimport FilesCell from \"components/TableElements/FilesCell\";\r\nimport React from \"react\";\r\nimport ExpandMoreRounded from \"@mui/icons-material/ExpandMoreRounded\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport AddFilter from \"components/TableElements/AddFilter\";\r\nimport Button from \"components/Button\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport classNames from \"classnames\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport Checkbox from \"@mui/material/Checkbox\";\r\nimport moment from \"moment\";\r\nimport { getSubcollectionDocument } from \"./SubcollectionDocument\";\r\n\r\nexport interface SubcollectionFieldProps {\r\n  fields: AnyField[];\r\n  value: Document[];\r\n  onValue: (newVal: any) => void;\r\n  valueFormatters?: { [key: string]: (val: any) => any };\r\n  groundColor?: \"white\" | \"black\";\r\n  level: number;\r\n}\r\n\r\nexport type FilterType = { fieldId: string; operator: string; value: string };\r\n\r\nconst Table: React.FC<SubcollectionFieldProps> = ({\r\n  value,\r\n  onValue,\r\n  valueFormatters,\r\n  groundColor = \"black\",\r\n  fields,\r\n  level,\r\n}) => {\r\n  const [filters, setFilters] = React.useState<FilterType[]>([]);\r\n  const [selected, setSelected] = React.useState<string[]>([]);\r\n  const [orderBy, setOrderBy] = React.useState<{ fieldId: string; direction: \"asc\" | \"desc\" }>();\r\n  const [endIsInView, setEndIsInView] = React.useState(false);\r\n\r\n  const onEdit = async (doc: Document, docIndex: number) => {\r\n    let document = await getSubcollectionDocument({\r\n      fields,\r\n      level: level + 1,\r\n      editableDocument: doc,\r\n    });\r\n    if (!document) return;\r\n    let arr = [...value];\r\n    arr[docIndex] = document;\r\n    onValue(arr);\r\n  };\r\n\r\n  const onDeleteSelected = async () => {\r\n    if (await confirm({ confirmation: `Delete ${selected.length} documents?` })) {\r\n      onValue(value.filter((x) => !selected.includes(x.docId)));\r\n      setSelected([]);\r\n    }\r\n  };\r\n\r\n  const onOrder = (field: AnyField) =>\r\n    orderBy?.fieldId !== field.id\r\n      ? () => {\r\n          setOrderBy({ fieldId: field.id, direction: \"asc\" });\r\n        }\r\n      : orderBy?.direction !== \"asc\"\r\n      ? () => setOrderBy(undefined)\r\n      : () => setOrderBy({ fieldId: field.id, direction: \"desc\" });\r\n\r\n  const selectAll = (select: boolean) => setSelected(select ? value.map((x) => x.docId) : []);\r\n\r\n  const selectHandler = (docId: string, checked: boolean) => {\r\n    if (checked) {\r\n      setSelected((prev) => [...prev, docId]);\r\n\r\n      return;\r\n    }\r\n    setSelected((prev) => {\r\n      let arr = [...prev];\r\n      let index = arr.findIndex((x) => x === docId);\r\n      if (index != null) {\r\n        arr.splice(index, 1);\r\n      }\r\n      return arr;\r\n    });\r\n  };\r\n\r\n  const formatValue = (field: AnyField, value: any) => {\r\n    return field.type === \"date\"\r\n      ? moment(value).format(\"YYYY-MM-DD hh:mm\")\r\n      : valueFormatters && field.id in valueFormatters\r\n      ? valueFormatters[field.id](value)\r\n      : value.toString().substring(0, 40);\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-96 w-full flex-col flex\">\r\n      <div className=\"flex justify-between mb-3\">\r\n        <div className=\"flex flex-wrap\">\r\n          <AddFilter\r\n            collectionType={{ fields }}\r\n            onValue={(val: FilterType) => setFilters((prev) => [val, ...prev])}\r\n          ></AddFilter>\r\n          {filters.map((f, i) => (\r\n            <div\r\n              key={`f-${i}`}\r\n              className={classNames(\r\n                \"rounded min-h-28px border leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative\",\r\n                { \"text-white border-white\": groundColor === \"black\" },\r\n                { \"text-black border-black\": groundColor === \"white\" }\r\n              )}\r\n            >\r\n              {f.fieldId} {f.operator} {f.value}{\" \"}\r\n              <span\r\n                onClick={() =>\r\n                  setFilters((prev) => {\r\n                    let arr = [...prev];\r\n                    arr.splice(i, 1);\r\n                    return arr;\r\n                  })\r\n                }\r\n                className=\"text-xs leading-28px ml-3 cursor-pointer\"\r\n              >\r\n                \r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"flex flex-wrap\">\r\n          <Button\r\n            onClick={onDeleteSelected}\r\n            disabled={selected.length === 0}\r\n            className={`px-7 mr-4 min-w-unset h-28px ${\r\n              selected.length === 0\r\n                ? \"bg-gray-E1E1E1 text-gray-6C6C6C cursor-default\"\r\n                : \"bg-red-FF0000 hover:bg-red-FF0000-hover text-white\"\r\n            } `}\r\n          >\r\n            Delete\r\n          </Button>\r\n          <Button\r\n            onClick={async () => {\r\n              let document = await getSubcollectionDocument({\r\n                fields,\r\n                level: level + 1,\r\n              });\r\n              if (!document) return;\r\n              onValue([...value, document]);\r\n            }}\r\n            className={`px-7 h-28px bg-fireck-4 min-w-unset hover:bg-fireck-4-hover`}\r\n          >\r\n            Add\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className={\"flex-grow h-0 -mt-3 rounded overflow-hidden bg-white shadow-border-gray\"}>\r\n        <SimpleBar className={\"relative scrollbar-light h-full\"} autoHide={false}>\r\n          <table className=\"w-full text-center\">\r\n            <thead>\r\n              <tr className=\"whitespace-nowrap\">\r\n                <th className=\"sticky top-0 bg-gray-E1E1E1 z-10 px-1\">\r\n                  <Checkbox\r\n                    size=\"small\"\r\n                    classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                    checked={selected.length === value.length}\r\n                    onChange={(e) => selectAll(e.target.checked)}\r\n                  ></Checkbox>\r\n                </th>\r\n                {fields.map((field, i) => (\r\n                  <th className=\"font-semibold sticky top-0 bg-gray-E1E1E1\" key={`th-${i}`}>\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <div className=\"w-5\"></div>\r\n                      <div className=\"cursor-pointer select-none\" onClick={onOrder(field)}>\r\n                        {field.id}\r\n                      </div>\r\n                      <div className=\"w-5\">\r\n                        {orderBy?.fieldId === field.id ? (\r\n                          <ExpandMoreRounded\r\n                            fontSize=\"small\"\r\n                            className={`${\r\n                              orderBy?.direction === \"asc\" ? \"transform rotate-180\" : \"\"\r\n                            }`}\r\n                          ></ExpandMoreRounded>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {value.map((doc, i) => (\r\n                <tr\r\n                  onClick={() => onEdit(doc, i)}\r\n                  key={`row-${i}`}\r\n                  className={\"cursor-pointer hover:bg-fireck-4\"}\r\n                >\r\n                  <td className=\"px-1\" onClick={(e) => e.stopPropagation()}>\r\n                    <Checkbox\r\n                      size=\"small\"\r\n                      classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                      checked={selected.includes(doc.docId)}\r\n                      onChange={(e) => selectHandler(doc.docId, e.target.checked)}\r\n                    ></Checkbox>\r\n                  </td>\r\n                  {fields.map((field, j) => (\r\n                    <td key={`row-${i}-col-${j}`} className=\"px-2\">\r\n                      {doc[field.id] != null ? (\r\n                        field.type === \"media\" ? (\r\n                          field.mediaSingle ? (\r\n                            <FilesCell file={doc[field.id]}></FilesCell>\r\n                          ) : (\r\n                            <FilesCell files={doc[field.id]} />\r\n                          )\r\n                        ) : (\r\n                          <div className=\"whitespace-nowrap\">\r\n                            {formatValue(field, doc[field.id])}\r\n                          </div>\r\n                        )\r\n                      ) : null}\r\n                    </td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <InView\r\n            onChange={async (inView) => {\r\n              setEndIsInView(inView);\r\n            }}\r\n          >\r\n            <div className=\"w-full\"></div>\r\n          </InView>\r\n          <div></div>\r\n        </SimpleBar>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","export type Validation = (val: any) => string | null;\r\n\r\nconst Validate: Validation = () => {\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","import { SimpleField } from \"api/collectionTypes\";\r\nimport Input from \"components/Input\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Password: React.FC<FieldComponentProps<SimpleField>> = ({\r\n  value,\r\n  onValue,\r\n  groundColor,\r\n  name,\r\n}) => {\r\n  const [plain, setPlain] = useState(\"\");\r\n  const createPassword = async () => {\r\n    const res = await fetch(window.location.origin + \"/auth/createPassword\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(plain),\r\n    }).then((x) => x.json());\r\n    return res.error ? null : res;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPlain(value);\r\n  }, [value]);\r\n\r\n  return (\r\n    <div className=\"w-full relative flex\">\r\n      <div className=\"flex-grow\">\r\n        <Input\r\n          disabled={value}\r\n          onBlur={() => {}}\r\n          groundColor={groundColor}\r\n          className=\"h-28px\"\r\n          type=\"password\"\r\n          value={plain}\r\n          name={name}\r\n          onChange={(e) => setPlain(e.target.value)}\r\n        ></Input>\r\n      </div>\r\n\r\n      <div className=\"ml-1 select-none font-medium\">\r\n        {value ? (\r\n          <div\r\n            onClick={() => onValue(\"\")}\r\n            className=\"h-28px leading-28px text-xs rounded bg-red-FF0000 hover:bg-red-FF0000-hover text-white cursor-pointer px-3\"\r\n          >\r\n            Clear\r\n          </div>\r\n        ) : (\r\n          <div\r\n            onClick={async () => {\r\n              let password = await createPassword();\r\n              onValue(password);\r\n            }}\r\n            className=\"h-28px leading-28px text-xs rounded bg-fireck-4 hover:bg-fireck-4-hover cursor-pointer px-3\"\r\n          >\r\n            Save\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import StringBadge from \"./Badges/String\";\r\nimport NumberBadge from \"./Badges/Number\";\r\nimport MapBadge from \"./Badges/Map\";\r\nimport ArrayBadge from \"./Badges/Array\";\r\nimport BooleanBadge from \"./Badges/Boolean\";\r\nimport DateBadge from \"./Badges/Date\";\r\nimport MediaBadge from \"./Badges/Media\";\r\nimport RichTextBadge from \"./Badges/RichText\";\r\nimport JsonBadge from \"./Badges/Json\";\r\nimport EnumBadge from \"./Badges/Enum\";\r\nimport PasswordBadge from \"./Badges/Password\";\r\nimport RelationBadge from \"./Badges/Relation\";\r\nimport SubcollectionBadge from \"./Badges/Subcollection\";\r\nimport AnyBadge from \"./Badges/Any\";\r\nimport StringComponent from \"./Components/String\";\r\nimport AnyComponent from \"./Components/Any\";\r\nimport NumberComponent from \"./Components/Number\";\r\nimport BooleanComponent from \"./Components/Boolean\";\r\nimport DateComponent from \"./Components/Date\";\r\nimport MediaComponent from \"./Components/Media\";\r\nimport RichTextComponent from \"./Components/RichText\";\r\nimport EnumComponent from \"./Components/Enum\";\r\nimport PasswordComponent from \"./Components/Password\";\r\nimport RelationComponent from \"./Components/Relation\";\r\nimport SubcollectionComponent from \"./Components/Subcollection\";\r\nimport ArrayValidation from \"./Validations/Array\";\r\nimport MapValidation from \"./Validations/Map\";\r\nimport JsonValidation from \"./Validations/Json\";\r\nimport DefaultValidation from \"./Validations/Default\";\r\nimport HashedPasswordComponent from \"./Components/HashedPassword\";\r\nimport HashedPasswordValidation from \"./Validations/HashedPassword\";\r\n\r\nexport const HashedPasswordField = {\r\n  type: \"hashed-password\",\r\n  Component: HashedPasswordComponent,\r\n  validate: HashedPasswordValidation,\r\n};\r\n\r\nconst fields = [\r\n  { type: \"string\", Badge: StringBadge, Component: StringComponent, validate: DefaultValidation },\r\n  { type: \"number\", Badge: NumberBadge, Component: NumberComponent, validate: DefaultValidation },\r\n  { type: \"map\", Badge: MapBadge, Component: AnyComponent, validate: MapValidation },\r\n  { type: \"array\", Badge: ArrayBadge, Component: AnyComponent, validate: ArrayValidation },\r\n  {\r\n    type: \"boolean\",\r\n    Badge: BooleanBadge,\r\n    Component: BooleanComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  { type: \"date\", Badge: DateBadge, Component: DateComponent, validate: DefaultValidation },\r\n  { type: \"media\", Badge: MediaBadge, Component: MediaComponent, validate: DefaultValidation },\r\n  {\r\n    type: \"rich-text\",\r\n    Badge: RichTextBadge,\r\n    Component: RichTextComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  { type: \"json\", Badge: JsonBadge, Component: AnyComponent, validate: JsonValidation },\r\n  { type: \"enum\", Badge: EnumBadge, Component: EnumComponent, validate: DefaultValidation },\r\n  {\r\n    type: \"password\",\r\n    Badge: PasswordBadge,\r\n    Component: PasswordComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  {\r\n    type: \"relation\",\r\n    Badge: RelationBadge,\r\n    Component: RelationComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  {\r\n    type: \"collection\",\r\n    Badge: SubcollectionBadge,\r\n    Component: SubcollectionComponent,\r\n    validate: DefaultValidation,\r\n  },\r\n  { type: \"any\", Badge: AnyBadge, Component: AnyComponent, validate: DefaultValidation },\r\n];\r\n\r\nexport default fields;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  return !val ? \"Required\" : null;\r\n};\r\n\r\nexport default Validate;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  try {\r\n    let obj = JSON.parse(JSON.stringify(val));\r\n\r\n    if (typeof obj === \"string\" || typeof obj.map === \"function\") {\r\n      throw new Error(\"object is not a map\");\r\n    }\r\n  } catch (error) {\r\n    return \"Wrong format\";\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  try {\r\n    let obj = JSON.parse(JSON.stringify(val));\r\n    if (typeof obj.map !== \"function\") {\r\n      throw new Error(\"object is not an array\");\r\n    }\r\n  } catch (error) {\r\n    return \"Wrong format\";\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","import { Validation } from \"./Default\";\r\n\r\nconst Validate: Validation = (val) => {\r\n  try {\r\n    let obj = JSON.parse(JSON.stringify(val));\r\n    if (typeof obj === \"string\") {\r\n      throw new Error(\"object is not a map\");\r\n    }\r\n  } catch (error) {\r\n    return \"Wrong format\";\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default Validate;\r\n","import { CollectionField } from \"api/collectionTypes\";\r\nimport SubcollectionField from \"components/SubcollectionField\";\r\nimport { FieldComponentProps } from \"./String\";\r\n\r\nconst Collection: React.FC<FieldComponentProps<CollectionField>> = ({\r\n  value,\r\n  onValue,\r\n  level,\r\n  field,\r\n}) => {\r\n  return (\r\n    <SubcollectionField\r\n      level={level}\r\n      value={value}\r\n      onValue={(arr) => onValue(arr)}\r\n      fields={field.collectionFields}\r\n    ></SubcollectionField>\r\n  );\r\n};\r\n\r\nexport default Collection;\r\n","import Button from \"components/Button\";\r\nimport React, { useState } from \"react\";\r\nimport { uploadFile } from \"api/files\";\r\nimport store, { RootState } from \"store\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport PageTitle from \"components/PageTitle\";\r\nimport CollectionTable from \"components/TableElements/CollectionTable\";\r\nimport { useSelector } from \"react-redux\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\nimport { formatBytes } from \"helper\";\r\n\r\nexport interface MediaProps {}\r\n\r\nexport const MediaDocumentFormatters = {\r\n  url: (value: string) => (\r\n    <div\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        window.open(value, \"_blank\");\r\n      }}\r\n      className=\"bg-center bg-cover h-10 w-10 mx-auto bg-gray-E1E1E1\"\r\n      style={{ backgroundImage: `url(${value})` }}\r\n    ></div>\r\n  ),\r\n  size: (value: number) => formatBytes(value),\r\n};\r\n\r\nconst Media: React.FC<MediaProps> = () => {\r\n  const uploadRef = React.useRef(null as any);\r\n  const notify = useNotify();\r\n  const [refreshCounter, setCounter] = useState(0);\r\n\r\n  const { collectionType } = useSelector((state: RootState) => {\r\n    return {\r\n      collectionType: state.collectionTypes.find((x) => x.id === \"FilesReservedCollection\"),\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex flex-col\">\r\n      <div className=\"flex justify-between flex-wrap mb-3\">\r\n        <PageTitle className=\"mb-4 mr-4\">Media</PageTitle>\r\n        <input\r\n          key={`file-input-${refreshCounter}`}\r\n          type=\"file\"\r\n          multiple\r\n          className=\"hidden\"\r\n          ref={uploadRef}\r\n          onChange={async (e) => {\r\n            const files = e.target.files;\r\n\r\n            if (files && files.length) {\r\n              store.dispatch({\r\n                type: \"SET_LOADING\",\r\n                payload: `Uploading ${files.length} file${files.length > 1 ? \"s\" : \"\"}...`,\r\n              });\r\n              let uploaded = 0;\r\n              for (let file of files) {\r\n                const res = await uploadFile(file);\r\n                if (!(\"error\" in res)) {\r\n                  uploaded++;\r\n                  store.dispatch({\r\n                    type: \"SET_LOADING\",\r\n                    payload: `${uploaded}/${files.length} uploaded.`,\r\n                  });\r\n                } else {\r\n                  notify(res.error + \". Try reload the app\", { variant: \"error\" });\r\n                }\r\n              }\r\n\r\n              store.dispatch({ type: \"SET_LOADING\", payload: false });\r\n              setCounter((prev) => prev + 1);\r\n            }\r\n          }}\r\n        />\r\n        <Button\r\n          onClick={() => uploadRef.current.click()}\r\n          className=\"bg-fireck-4 hover:bg-fireck-4-hover mb-4 h-34px pr-6 pl-5 min-w-unset\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <AddRounded className=\"mr-2 text-lg\" fontSize=\"inherit\"></AddRounded>\r\n            <span>Upload</span>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n\r\n      {!collectionType ? null : (\r\n        <CollectionTable\r\n          groundColor=\"black\"\r\n          key={`files-table-${refreshCounter}`}\r\n          valueFormatters={MediaDocumentFormatters}\r\n          collectionType={collectionType}\r\n        ></CollectionTable>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","export type IconButtonVariant = \"transparent\" | \"standard\";\r\n\r\nexport interface IconButtonProps {\r\n  className?: string;\r\n  variant?: IconButtonVariant;\r\n  [x: string]: any;\r\n}\r\n\r\nconst IconButton: React.FC<IconButtonProps> = ({\r\n  className = \"\",\r\n  variant = \"standard\",\r\n  ...rest\r\n}) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={\r\n        `bg-fireck-4 hover:bg-fireck-4-hover h-5 w-5 rounded flex items-center justify-center transition cursor-pointer ` +\r\n        className\r\n      }\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default IconButton;\r\n","import React from \"react\";\r\nimport Button from \"components/Button\";\r\nimport { useFormik } from \"formik\";\r\nimport Label from \"components/Label\";\r\nimport FieldTypes from \"components/Fields\";\r\nimport { HashedPasswordField } from \"components/Fields\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport { AnyField } from \"api/collectionTypes\";\r\n\r\nexport interface DocumentFormProps {\r\n  onSubmit: (a: { [key: string]: any } | null) => void;\r\n  fields: AnyField[];\r\n  editableDocument?: { [key: string]: any };\r\n  docId?: string;\r\n  groundColor: \"black\" | \"white\";\r\n  level: number;\r\n}\r\n\r\nconst DocumentForm: React.FC<DocumentFormProps> = ({\r\n  onSubmit,\r\n  fields,\r\n  editableDocument,\r\n  level,\r\n  docId,\r\n  groundColor,\r\n}) => {\r\n  const allFieldTypes = [...FieldTypes, HashedPasswordField];\r\n\r\n  const initialValues = {\r\n    password: () => \"\",\r\n    string: () => \"\",\r\n    \"rich-text\": () => \"\",\r\n    json: () => ({}),\r\n    map: () => ({}),\r\n    array: () => [],\r\n    media: (x: AnyField) => (x.type === \"media\" && x.mediaSingle ? null : []),\r\n    date: () => null,\r\n    enum: () => null,\r\n    number: () => null,\r\n    boolean: () => false,\r\n    relation: (x: AnyField) => (x.type === \"relation\" && x.relationOneToOne ? \"\" : []),\r\n    collection: () => [],\r\n    document: (x: AnyField) =>\r\n      x.type === \"document\" &&\r\n      x.documentFields.reduce((a, b) => ({ ...a, [b.id]: initialValues[b.type] }), {}),\r\n    any: () => \"\",\r\n    \"hashed-password\": () => \"\",\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const initial = fields.reduce(\r\n    (a, b) => ({\r\n      ...a,\r\n      [b.id]:\r\n        editableDocument && editableDocument[b.id]\r\n          ? editableDocument[b.id]\r\n          : initialValues[b.type](b),\r\n    }),\r\n    {}\r\n  );\r\n\r\n  const { values, errors, setFieldValue, handleSubmit, submitCount, isSubmitting } = useFormik({\r\n    validateOnChange: false,\r\n    initialValues: initial as { [index: string]: any },\r\n    enableReinitialize: true,\r\n    onSubmit: async (vals) => {\r\n      await dispatch({ type: \"SET_DOCUMENT_CHANGED\", payload: false });\r\n      await onSubmit(vals);\r\n    },\r\n    validate: (vals) => {\r\n      const errors: any = {};\r\n      fields.forEach((x) => {\r\n        let fieldType = allFieldTypes.find((f) => f.type === x.type);\r\n        if (!fieldType) return errors;\r\n        let error = fieldType.validate(vals[x.id]);\r\n        if (error) {\r\n          errors[x.id] = error;\r\n        }\r\n      });\r\n\r\n      console.log(\"ERRORs\", errors);\r\n\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  const hasChanged = !editableDocument || JSON.stringify(initial) !== JSON.stringify(values);\r\n\r\n  React.useEffect(() => {\r\n    dispatch({ type: \"SET_DOCUMENT_CHANGED\", payload: hasChanged });\r\n  }, [hasChanged, dispatch]);\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col w-full\">\r\n      <div className=\"flex justify-between flex-wrap mb-2\">\r\n        <div>\r\n          <div\r\n            className={classNames(\"font-medium text-27px leading-none capitalize mb-3 mr-4\", {\r\n              \"text-white\": groundColor === \"black\",\r\n            })}\r\n          >\r\n            {docId ? `Edit Document` : `Add Document`}\r\n          </div>\r\n          {!docId ? null : <div className=\"mb-3 text-xs text-white\">Doc id: {docId}</div>}\r\n        </div>\r\n        <Button\r\n          type=\"submit\"\r\n          onClick={() => handleSubmit()}\r\n          disabled={isSubmitting || !hasChanged}\r\n          className={`h-34px ${\r\n            hasChanged\r\n              ? \"bg-fireck-4 hover:bg-fireck-4-hover\"\r\n              : \"bg-gray-300 text-gray-600 cursor-default\"\r\n          }  mb-2`}\r\n        >\r\n          {isSubmitting ? \"Loading...\" : editableDocument != null ? \"Save\" : \"Publish\"}\r\n        </Button>\r\n      </div>\r\n      <div className=\"flex-grow h-0 overflow-y-auto overflow-x-hidden pt-4 -mx-7 -mb-7 px-7\">\r\n        <div className=\"flex flex-wrap -mx-3\">\r\n          {Object.keys(values).length\r\n            ? fields\r\n                .filter((x) => !x.isDefault)\r\n                .map((x, i) => {\r\n                  const Component = allFieldTypes.find((f) => f.type === x.type)?.Component;\r\n\r\n                  return (\r\n                    <div\r\n                      key={`field-${i}`}\r\n                      className={`${\r\n                        [\"rich-text\", \"collection\"].includes(x.type) ? \"w-full\" : \"sm:w-1/2 w-full\"\r\n                      } px-3 mb-12`}\r\n                    >\r\n                      <Label\r\n                        groundColor={groundColor}\r\n                        className=\"mb-2 font-medium\"\r\n                        error={submitCount > 0 ? errors[x.id]?.toString() : null}\r\n                      >\r\n                        {x.id}{\" \"}\r\n                      </Label>\r\n                      {!Component ? null : (\r\n                        <Component\r\n                          onValue={(val) => setFieldValue(x.id, val)}\r\n                          groundColor={groundColor}\r\n                          value={values[x.id]}\r\n                          name={x.id}\r\n                          level={level}\r\n                          field={x as never}\r\n                        ></Component>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })\r\n            : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentForm;\r\n","var _path, _circle, _circle2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOneToOne(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 9,\n    viewBox: \"0 0 40 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.36621 4.67223H30.7241M30.7241 4.67223L28.3085 2.25659M30.7241 4.67223L28.3085 7.08786\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 4.69562,\n    cy: 4.49835,\n    r: 3.31773,\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.3948,\n    cy: 4.49835,\n    r: 3.31773,\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOneToOne);\nexport default __webpack_public_path__ + \"static/media/one-to-one.a9ab4eb3.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _circle, _circle2, _circle3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOneToMany(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 37,\n    viewBox: \"0 0 40 37\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5875 18.8431L30.4119 7.39751M30.4119 7.39751L26.8752 6.44984M30.4119 7.39751L29.4643 10.9342\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5873 18.8433L30.4117 30.2889M30.4117 30.2889L29.4641 26.7522M30.4117 30.2889L26.875 31.2366\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 5.00165,\n    cy: 18.7858,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.2653,\n    cy: 32.5311,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })), _circle3 || (_circle3 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.2653,\n    cy: 5.15558,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOneToMany);\nexport default __webpack_public_path__ + \"static/media/one-to-many.c2288723.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst useDraggableInPortal = () => {\r\n  const self = useRef<any>({}).current;\r\n\r\n  useEffect(() => {\r\n    const div = document.createElement(\"div\");\r\n    div.style.position = \"absolute\";\r\n    div.style.pointerEvents = \"none\";\r\n    div.style.top = \"0\";\r\n    div.style.width = \"100%\";\r\n    div.style.height = \"100%\";\r\n    self.elt = div;\r\n    document.body.appendChild(div);\r\n    return () => {\r\n      document.body.removeChild(div);\r\n    };\r\n  }, [self]);\r\n\r\n  return (render: any) =>\r\n    (provided: any, ...args: any) => {\r\n      const element = render(provided, ...args);\r\n      if (provided.draggableProps.style.position === \"fixed\") {\r\n        return createPortal(element, self.elt);\r\n      }\r\n      return element;\r\n    };\r\n};\r\n\r\nexport default useDraggableInPortal;\r\n","import useDraggableInPortal from \"hooks/useDraggableInPortal\";\r\nimport { DragDropContext, Droppable, Draggable, DropResult } from \"react-beautiful-dnd\";\r\nimport { useRef } from \"react\";\r\n\r\ninterface DraggableListProps {\r\n  onDragEnd: (val: DropResult) => void;\r\n  Item: React.FC<any>;\r\n  items: any[];\r\n  containerClassName: string;\r\n}\r\n\r\nconst DraggableList: React.FC<DraggableListProps> = ({\r\n  onDragEnd,\r\n  Item,\r\n  items,\r\n  containerClassName,\r\n}) => {\r\n  const renderDraggable = useDraggableInPortal();\r\n  const uniqid = useRef<number>(Math.random());\r\n\r\n  const formatId = (keyword: string, index: number) => {\r\n    return `${keyword}-${index}-${uniqid.current}`;\r\n  };\r\n\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId=\"droppable-sub\">\r\n        {(provided) => (\r\n          <div className={containerClassName} {...provided.droppableProps} ref={provided.innerRef}>\r\n            {items.map((x, i) => {\r\n              return (\r\n                <Draggable\r\n                  key={formatId(\"draggable\", i)}\r\n                  draggableId={formatId(\"draggable\", i)}\r\n                  index={i}\r\n                >\r\n                  {renderDraggable((provided: any) => (\r\n                    <div\r\n                      ref={provided.innerRef}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                    >\r\n                      <Item {...x} index={i}></Item>\r\n                    </div>\r\n                  ))}\r\n                </Draggable>\r\n              );\r\n            })}\r\n            {provided.placeholder}\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </DragDropContext>\r\n  );\r\n};\r\n\r\nexport default DraggableList;\r\n","import React from \"react\";\r\nimport { addDocument, Document, getDocument, updateDocument } from \"api/collections\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport DocumentForm from \"components/DocumentForm\";\r\n\r\nexport interface AddDocumentProps {\r\n  collectionId: string;\r\n  docId: string;\r\n}\r\n\r\nconst AddDocument: React.FC<AddDocumentProps> = ({ collectionId, docId }) => {\r\n  const collectionType = useSelector((state: RootState) =>\r\n    state.collectionTypes.find((x) => x.id === collectionId)\r\n  );\r\n\r\n  const [doc, setDoc] = React.useState<Document | null>(null);\r\n\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        if (!collectionType) return;\r\n        if (!docId && !collectionType.single) return;\r\n        const res = await getDocument(collectionId, docId);\r\n\r\n        if (!res.error) {\r\n          setDoc(res);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [docId, collectionId, collectionType]);\r\n\r\n  const history = useHistory();\r\n  const notify = useNotify();\r\n\r\n  return !collectionType ? null : (\r\n    <DocumentForm\r\n      level={0}\r\n      groundColor=\"black\"\r\n      docId={docId}\r\n      editableDocument={doc ? doc : undefined}\r\n      fields={collectionType.fields}\r\n      onSubmit={async (vals) => {\r\n        if (vals) {\r\n          if (docId != null) {\r\n            const res = await updateDocument(collectionType.id, docId, vals);\r\n\r\n            if (res.error) {\r\n              notify(res.error, { variant: \"error\" });\r\n            } else {\r\n              notify(\"Document updated!\", { variant: \"success\" });\r\n            }\r\n          } else {\r\n            const res = await addDocument(collectionType.id, vals);\r\n            if (res.error) {\r\n              notify(res.error, { variant: \"error\" });\r\n            } else {\r\n              if (collectionType.single) {\r\n                notify(\"Document updated!\", { variant: \"success\" });\r\n              } else {\r\n                notify(\"Document added!\", { variant: \"success\" });\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!collectionType.single) {\r\n          history.goBack();\r\n        }\r\n      }}\r\n    ></DocumentForm>\r\n  );\r\n};\r\n\r\nexport default AddDocument;\r\n"],"sourceRoot":""}