(this["webpackJsonpfireck-cms"]=this["webpackJsonpfireck-cms"]||[]).push([[12],{831:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n(17),r=n(33),a=n.n(r),i=(n(0),n(35)),o=n(29),l=n(98),s=n(2);function u(e){var t=e.Component,n=e.props;return new Promise((function(e,r){var u,d=null===(u=document.getElementById("root"))||void 0===u?void 0:u.appendChild(document.createElement("div"));d&&a.a.render(Object(s.jsx)(i.a,{store:o.a,children:Object(s.jsx)(l.a,{children:Object(s.jsx)(t,Object(c.a)(Object(c.a)({},n),{},{proceed:function(t){var n;a.a.unmountComponentAtNode(d),null===(n=d.parentNode)||void 0===n||n.removeChild(d),e(t)}}))})}),d)}))}},834:function(e,t,n){"use strict";var c=n(184),r=n(17),a=n(851),i=n(776),o=n(0),l=n.n(o),s=n(110),u=n.n(s),d=n(2),f=["className","options","error","groundColor"],b=l.a.forwardRef((function(e,t){return Object(d.jsx)("div",Object(r.a)(Object(r.a)({},e),{},{ref:t,children:Object(d.jsx)(a.a,{className:"text-red-FF0000",size:20})}))}));t.a=function(e){var t=e.className,n=void 0===t?"":t,a=e.options,o=e.error,l=e.groundColor,s=Object(c.a)(e,f);return Object(d.jsxs)("div",{className:"".concat(n," relative flex items-center"),children:[Object(d.jsx)("select",Object(r.a)(Object(r.a)({className:u()("px-3 h-full border-2 border-solid w-full rounded outline-none",{"border-red-FF0000":o,"focus:border-fireck-4":!o,"border-gray-300 bg-gray-300":"white"===l,"border-white bg-white":"black"===l})},s),{},{spellCheck:!1,children:a.map((function(e,t){return Object(d.jsx)("option",{"data-testid":"select-option-".concat(e.value),value:e.value,children:e.label},"opt-"+t)}))})),o?Object(d.jsx)(i.a,{title:o,placement:"top",children:Object(d.jsx)(b,{className:"absolute right-2 my-auto w-auto"})}):null]})}},835:function(e,t,n){"use strict";var c=n(19),r=n(1),a=n.n(r),i=n(4),o=n(13),l=n(838),s=n(0),u=n.n(s),d=n(846),f=n.n(d),b=n(34),j=n(185),h=n(837),p=n(58),x=n(186),m=n(110),v=n.n(m),O=n(17),g=n(98),w=(n(831),n(2)),y=n(244),N=n(245),k=function(e){var t=e.collectionId,n=e.filters,r=void 0===n?[]:n,a=e.orderBy,i=e.inView,o=(Object(g.b)(),Object(s.useCallback)((function(){var e={collectionId:t,where:"",orderBy:""};return r.forEach((function(t,n){e.where+=(n>0?";":"")+t.fieldId+","+t.operator+","+t.value,a&&a.fieldId!==t.fieldId&&(e.orderBy+=(e.orderBy?";":"")+t.fieldId)})),a&&(e.orderBy+=(e.orderBy?";":"")+"".concat(a.fieldId,",").concat(a.direction)),a||r.length||(e.orderBy="createdAt,asc"),e.populateRef=!1,e}),[a,r,t])),l=Object(N.useInfiniteQuery)([t,a,r],(function(e){var t=e.pageParam;return y.a.getCollection(Object(O.a)(Object(O.a)({},o()),{},{startAfter:t}))}),{keepPreviousData:!0,getNextPageParam:function(e,t){var n=(null===e||void 0===e?void 0:e.length)&&10===e.length?e[9]:null;return n?n[a?a.fieldId:"createdAt"]:void 0}}),u=l.data,d=(l.error,l.fetchNextPage),f=l.hasNextPage;return Object(s.useEffect)((function(){i&&f&&d()}),[i,d,f]),{docs:(null===u||void 0===u?void 0:u.pages.reduce((function(e,t){return[].concat(Object(c.a)(e),Object(c.a)(t))}),[]))||[]}},C=n(318),I=n(1046),E=n(845),S=n.n(E);t.a=function(e){var t=e.collectionType,n=e.onPick,r=e.blackList,d=void 0===r?[]:r,m=e.singleSelect,O=void 0!==m&&m,g=e.valueFormatters,N=e.groundColor,E=e.filters,F=void 0===E?[]:E,B=e.onEdit,D=e.hideFilters,P=void 0!==D&&D,M=Object(b.k)(),T=u.a.useState([]),z=Object(o.a)(T,2),R=z[0],A=z[1],V=t.fields.filter((function(e){return e.displayOnTable})),Y=u.a.useState([]),_=Object(o.a)(Y,2),G=_[0],L=_[1],U=u.a.useState(),H=Object(o.a)(U,2),J=H[0],K=H[1],q=u.a.useState(!1),Q=Object(o.a)(q,2),W=Q[0],Z=Q[1],X=k({collectionId:t.id,filters:R,orderBy:J,inView:W}).docs,$=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)({confirmation:"Delete ".concat(G.length," documents?")});case 2:if(!e.sent){e.next=5;break}y.a.deleteMultipleDocuments(t.id,X.filter((function(e){return G.includes(e.docId)}))),L([]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=B||function(e){M.push("/collections/".concat(t.id,"/edit/").concat(e.docId))},te=function(e){return(null===J||void 0===J?void 0:J.fieldId)!==e.id?function(){K({fieldId:e.id,direction:"asc"})}:"asc"!==(null===J||void 0===J?void 0:J.direction)?function(){return K(void 0)}:function(){return K({fieldId:e.id,direction:"desc"})}},ne=function(e,t){L(t?O?[e]:function(t){return[].concat(Object(c.a)(t),[e])}:function(t){var n=Object(c.a)(t),r=n.findIndex((function(t){return t===e}));return null!=r&&n.splice(r,1),n})},ce=function(e,t){return"date"===e.type?S()(t).format("YYYY-MM-DD HH:mm"):g&&e.id in g?g[e.id](t):t.toString().substring(0,40)};return Object(s.useEffect)((function(){F.length&&A((function(e){return[].concat(Object(c.a)(e),Object(c.a)(F))}))}),[F]),Object(w.jsxs)("div",{className:"h-full w-full flex-col flex",children:[Object(w.jsxs)("div",{className:"flex justify-between mb-3",children:[P?null:Object(w.jsxs)("div",{className:"flex flex-wrap",children:[Object(w.jsx)(h.a,{collectionType:t,onValue:function(e){return A((function(t){return[e].concat(Object(c.a)(t))}))}}),R.map((function(e,t){return e.hidden?null:Object(w.jsxs)("div",{className:v()("rounded min-h-28px border leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative",{"text-white border-white":"black"===N},{"text-black border-black":"white"===N}),children:[e.fieldId," ",e.operator," ",e.value," ",Object(w.jsx)("span",{onClick:function(){return A((function(e){var n=Object(c.a)(e);return n.splice(t,1),n}))},className:"text-xs leading-28px ml-3 cursor-pointer",children:"\u2715"})]},"f-".concat(t))}))]}),n?Object(w.jsx)(p.a,{onClick:function(){return n(X.filter((function(e){return G.includes(e.docId)})))},className:"h-28px min-w-unset rounded mb-3 px-7 ".concat(0===G.length?"bg-gray-300 text-gray-500 cursor-default":"bg-fireck-4 hover:bg-fireck-4-hover"," "),children:"Select"}):Object(w.jsx)(p.a,{onClick:$,disabled:0===G.length,className:"px-7 mb-3 min-w-unset rounded h-28px ".concat(0===G.length?"bg-gray-E1E1E1 text-gray-6C6C6C cursor-default":"bg-red-FF0000 hover:bg-red-FF0000-hover text-white"," "),children:"Delete"})]}),Object(w.jsx)("div",{className:v()("flex-grow h-0 -mt-3 rounded overflow-hidden bg-white",{"shadow-border-gray":"white"===N}),children:Object(w.jsxs)(x.a,{className:"relative scrollbar-light h-full",autoHide:!1,children:[Object(w.jsxs)("table",{className:"w-full text-center",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{className:"whitespace-nowrap",children:[Object(w.jsx)("th",{className:"sticky top-0 bg-gray-E1E1E1 z-10 px-1",children:O?null:Object(w.jsx)(I.a,{size:"small",classes:{checked:"text-fireck-1",root:"p-0"},checked:G.length===X.length,onChange:function(e){return t=e.target.checked,L(t?X.map((function(e){return e.docId})):[]);var t}})}),V.map((function(e,t){return Object(w.jsx)("th",{className:"font-semibold sticky top-0 bg-gray-E1E1E1",children:Object(w.jsxs)("div",{className:"flex items-center justify-center",children:[Object(w.jsx)("div",{className:"w-5"}),Object(w.jsx)("div",{className:"cursor-pointer select-none",onClick:te(e),children:e.id}),Object(w.jsx)("div",{className:"w-5",children:(null===J||void 0===J?void 0:J.fieldId)===e.id?Object(w.jsx)(f.a,{fontSize:"small",className:"".concat("asc"===(null===J||void 0===J?void 0:J.direction)?"transform rotate-180":"")}):null})]})},"th-".concat(t))}))]})}),Object(w.jsxs)("tbody",{children:[X.map((function(e,t){return d.includes(e.docId)?null:Object(w.jsxs)("tr",{onClick:function(){return n?ne(e.docId,!G.includes(e.docId)):ee(e)},className:"cursor-pointer hover:bg-fireck-4",children:[Object(w.jsx)("td",{className:"px-1",onClick:function(e){return e.stopPropagation()},children:Object(w.jsx)(I.a,{size:"small",classes:{checked:"text-fireck-1",root:"p-0"},checked:G.includes(e.docId),onChange:function(t){return ne(e.docId,t.target.checked)}})}),V.map((function(n,c){return Object(w.jsx)("td",{className:"px-2",children:null!=e[n.id]?"media"===n.type?n.mediaSingle?Object(w.jsx)(l.a,{file:e[n.id]}):Object(w.jsx)(l.a,{files:e[n.id]}):Object(w.jsx)("div",{className:"whitespace-nowrap",children:ce(n,e[n.id])}):null},"row-".concat(t,"-col-").concat(c))}))]},"row-".concat(t))})),Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:V.length+1,children:Object(w.jsx)(C.a,{onChange:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(w.jsx)("div",{className:"w-full"})})})})]})]}),Object(w.jsx)("div",{})]})})]})}},836:function(e,t,n){"use strict";var c=n(17),r=n(0),a=n.n(r),i=n(319),o=n.n(i),l=n(776),s=n(110),u=n.n(s),d=n(2),f=a.a.forwardRef((function(e,t){return Object(d.jsx)("div",Object(c.a)(Object(c.a)({},e),{},{ref:t,children:Object(d.jsx)(o.a,{className:"text-red-500 text-xl",fontSize:"inherit"})}))}));t.a=function(e){var t=e.className,n=void 0===t?"":t,c=e.children,r=e.error,a=e.groundColor;return Object(d.jsxs)("div",{className:u()("flex justify-between relative ".concat(n),{"text-white":"black"===a,"text-black":"white"===a}),children:[Object(d.jsx)("div",{children:c}),r?Object(d.jsx)(l.a,{title:r,placement:"top",children:Object(d.jsx)(f,{className:"absolute right-2 my-auto w-auto"})}):null]})}},837:function(e,t,n){"use strict";var c=n(19),r=n(1),a=n.n(r),i=n(4),o=n(13),l=n(824),s=n(111),u=n(834),d=n(58),f=n(0),b=n.n(f),j=n(187),h=n(836),p=n(316),x=n.n(p),m=n(2);t.a=function(e){var t=e.collectionType,n=e.onValue,r=e.groundColor,f=void 0===r?"white":r,p=b.a.useState(!1),v=Object(o.a)(p,2),O=v[0],g=v[1],w=Object(j.a)({onSubmit:function(){var e=Object(i.a)(a.a.mark((function e(t,c){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.resetForm,n(t),g(!1),r();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),initialValues:{value:"",operator:"",fieldId:""},validate:function(e){var t={};return Object.keys(e).forEach((function(n){e[n]||(t[n]="Required")})),t}}),y=w.values,N=w.errors,k=w.handleChange,C=w.submitCount,I=w.handleSubmit,E=w.isSubmitting;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.a,{onClick:function(){return g(!0)},className:"bg-fireck-4 hover:bg-fireck-4-hover min-w-unset flex items-center justify-center h-28px px-7 rounded text-sm mr-3 mb-3",children:"Filters"}),O?Object(m.jsx)(l.a,{open:O,children:Object(m.jsx)("div",{className:"fixed left-0 top-0 w-full h-full flex p-7",onMouseDown:function(){return g(!1)},children:Object(m.jsxs)("div",{onMouseDown:function(e){return e.stopPropagation()},className:"bg-white rounded p-7 m-auto relative animate-littlemoveup",style:{maxWidth:600},children:[Object(m.jsx)(x.a,{className:"absolute top-0 right-0 cursor-pointer",onClick:function(){return g(!1)}}),Object(m.jsxs)("div",{className:"flex flex-wrap -mx-2 mb-4",children:[Object(m.jsxs)("div",{className:"sm:w-1/3 w-full mb-3 px-2",children:[Object(m.jsx)(h.a,{groundColor:f,className:"mb-2",error:C>0?N.fieldId:null,children:"Field"}),Object(m.jsx)(u.a,{className:"h-34px",groundColor:"white",name:"fieldId",onChange:k,value:y.fieldId,options:[{value:"",label:"Select"}].concat(Object(c.a)(t.fields.map((function(e){return{value:e.id,label:e.id}}))))})]}),Object(m.jsxs)("div",{className:"sm:w-1/3 w-full mb-3 px-2",children:[Object(m.jsx)(h.a,{groundColor:f,className:"mb-2",error:C>0?N.operator:null,children:"Operator"}),Object(m.jsx)(u.a,{className:"h-34px",groundColor:"white",name:"operator",onChange:k,value:y.operator,options:[{value:"",label:"Select"}].concat(Object(c.a)(["<","<=","==",">",">=","!=","array-contains","array-contains-any","in","not-in"].map((function(e){return{value:e,label:e}}))))})]}),Object(m.jsxs)("div",{className:"sm:w-1/3 w-full mb-3 px-2",children:[Object(m.jsx)(h.a,{groundColor:f,className:"mb-2 text-black",error:C>0?N.value:null,children:"Value"}),Object(m.jsx)(s.a,{onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),I())},groundColor:"white",placeholder:["in","not in","array-contains-any"].includes(y.operator)?"value, value, value":"value",className:"placeholder-black h-34px",value:y.value,onChange:k,name:"value"})]})]}),Object(m.jsx)("div",{className:"flex justify-end",children:Object(m.jsx)(d.a,{disabled:E,onClick:function(){return I()},className:"bg-fireck-4 hover:bg-fireck-4-hover h-34px",children:"Add"})})]})})}):null]})}},838:function(e,t,n){"use strict";var c=n(0),r=n.n(c),a=n(17),i=n(2),o=Object(c.forwardRef)((function(e,t){return Object(i.jsx)("div",Object(a.a)(Object(a.a)({},e),{},{ref:t}))})),l=n(776),s=function(e){var t=e.src;return Object(i.jsx)(l.a,{arrow:!0,title:Object(i.jsx)("div",{className:"p-1",children:Object(i.jsx)("img",{src:t,className:"max-w-136px max-h-136px w-auto h-auto",alt:""})}),placement:"top",classes:{tooltip:"font-poppins text-xs p-0 rounded bg-fireck-1",arrow:"text-fireck-1"},children:Object(i.jsx)(o,{children:Object(i.jsx)("div",{className:"group w-4 h-4 relative flex items-center justify-center rounded hover:bg-gray-535371 hover:bg-opacity-5 cursor-pointer",children:Object(i.jsx)("div",{className:"relative w-4 h-4 rounded-full bg-center bg-cover pointer-events-none",style:{backgroundImage:"url(".concat(t,")")}})})})})};t.a=function(e){var t=e.files,n=e.file,c=r.a.useRef(Math.random());return Object(i.jsxs)("div",{className:"flex justify-center",children:[(t||(n?[n]:[])).slice(0,4).map((function(e,t){return Object(i.jsx)("div",{className:"mr-0.5",children:Object(i.jsx)(s,{src:e})},"".concat(c,"-file-").concat(t))})),t&&t.length>4?Object(i.jsx)("div",{className:"relative",children:Object(i.jsxs)("div",{className:"w-4 h-4 rounded-full bg-fireck-4 text-10px flex items-center justify-center",children:[t.length-4,"+"]})}):null]})}},839:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var c=n(860),r=n.n(c);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=0>t?0:t,c=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,c)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][c]}function i(e){try{return r.a.extension(e.type)||e.name.split(".").pop()||"unknown"}catch(t){return"unknown"}}},840:function(e,t,n){"use strict";var c=n(17),r=n(184),a=n(110),i=n.n(a),o=n(2),l=["className"];t.a=function(e){var t=e.className,n=Object(r.a)(e,l);return Object(o.jsx)("div",Object(c.a)(Object(c.a)({},n),{},{className:i()("text-27px text-white font-medium capitalize leading-none",t)}))}},844:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var c=n(1),r=n.n(c),a=n(4),i=n(839),o=(n(29),n(43)),l=n(6),s=n(7),u=n(866),d=n(861),f=n.n(d),b=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"upload",value:function(e){return new Promise((function(t){try{var n=Object(u.c)(),c=e.name.split("."),r=f.a.generate()+"."+c[c.length-1],a=Object(u.d)(n,r),i=Object(u.e)(a,e);i.on("state_changed",(function(e){}),(function(e){t({error:e.name})}),(function(){Object(u.b)(i.snapshot.ref).then((function(e){t({downloadUrl:e,fileName:r})}))}))}catch(o){t({error:o})}}))}},{key:"delete",value:function(e){var t=Object(u.c)();Object(u.a)(Object(u.d)(t,e))}}]),e}()),j=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.upload(t);case 3:if(!("error"in(n=e.sent))){e.next=8;break}return e.abrupt("return",n);case 8:return c={name:t.name,size:t.size,url:n.downloadUrl,storagePath:n.fileName,type:Object(i.b)(t)},e.abrupt("return",Object(o.a)("FilesReservedCollection",c));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{error:e.t0.toString()});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},852:function(e,t,n){"use strict";n.r(t),n.d(t,"MediaDocumentFormatters",(function(){return g}));var c=n(1),r=n.n(c),a=n(32),i=n(4),o=n(13),l=n(58),s=n(0),u=n.n(s),d=n(844),f=n(29),b=n(98),j=n(840),h=n(835),p=n(35),x=n(843),m=n.n(x),v=n(839),O=n(2),g={url:function(e){return Object(O.jsx)("div",{onClick:function(t){t.stopPropagation(),window.open(e,"_blank")},className:"bg-center bg-cover h-10 w-10 mx-auto bg-gray-E1E1E1",style:{backgroundImage:"url(".concat(e,")")}})},size:function(e){return Object(v.a)(e)}};t.default=function(){var e=u.a.useRef(null),t=Object(b.b)(),n=Object(s.useState)(0),c=Object(o.a)(n,2),x=c[0],v=c[1],w=Object(p.e)((function(e){return{collectionType:e.collectionTypes.find((function(e){return"FilesReservedCollection"===e.id}))}})).collectionType;return Object(O.jsxs)("div",{className:"h-full w-full flex flex-col",children:[Object(O.jsxs)("div",{className:"flex justify-between flex-wrap mb-3",children:[Object(O.jsx)(j.a,{className:"mb-4 mr-4",children:"Media"}),Object(O.jsx)("input",{type:"file",multiple:!0,className:"hidden",ref:e,onChange:function(){var e=Object(i.a)(r.a.mark((function e(n){var c,i,o,l,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c=n.target.files)||!c.length){e.next=25;break}f.a.dispatch({type:"SET_LOADING",payload:"Uploading ".concat(c.length," file").concat(c.length>1?"s":"","...")}),i=0,o=Object(a.a)(c),e.prev=5,o.s();case 7:if((l=o.n()).done){e.next=15;break}return s=l.value,e.next=11,Object(d.a)(s);case 11:"error"in(u=e.sent)?t(u.error+". Try reload the app",{variant:"error"}):(i++,f.a.dispatch({type:"SET_LOADING",payload:"".concat(i,"/").concat(c.length," uploaded.")}));case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:f.a.dispatch({type:"SET_LOADING",payload:!1}),v((function(e){return e+1}));case 25:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},"file-input-".concat(x)),Object(O.jsx)(l.a,{onClick:function(){return e.current.click()},className:"bg-fireck-4 hover:bg-fireck-4-hover mb-4 h-34px pr-6 pl-5 min-w-unset",children:Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)(m.a,{className:"mr-2 text-lg",fontSize:"inherit"}),Object(O.jsx)("span",{children:"Upload"})]})})]}),w?Object(O.jsx)(h.a,{groundColor:"black",valueFormatters:g,collectionType:w},"files-table-".concat(x)):null]})}}}]);
//# sourceMappingURL=12.4fbd04bd.chunk.js.map