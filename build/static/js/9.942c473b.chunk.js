(this["webpackJsonpfireck-cms"]=this["webpackJsonpfireck-cms"]||[]).push([[9],{844:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var c=n(14),a=n(34),r=n.n(a),o=(n(0),n(37)),l=n(33),i=n(99),s=n(250),u=n(65),d=n(2);function j(e){var t=e.Component,n=e.props;return new Promise((function(e,a){var j,b,f=null===(j=document.getElementById("root"))||void 0===j||null===(b=j.parentNode)||void 0===b?void 0:b.appendChild(document.createElement("div"));f&&r.a.render(Object(d.jsx)(o.a,{store:l.a,children:Object(d.jsx)(i.a,{children:Object(d.jsx)(s.QueryClientProvider,{client:u.queryClient,children:Object(d.jsx)(t,Object(c.a)(Object(c.a)({},n),{},{proceed:function(t){var n;r.a.unmountComponentAtNode(f),null===(n=f.parentNode)||void 0===n||n.removeChild(f),e(t)}}))})})}),f)}))}},845:function(e,t,n){"use strict";var c=n(5),a=n(189),r=n(14),o=n(857),l=n(788),i=n(0),s=n.n(i),u=n(114),d=n.n(u),j=n(2),b=["className","options","error","ground"],f=s.a.forwardRef((function(e,t){return Object(j.jsx)("div",Object(r.a)(Object(r.a)({},e),{},{ref:t,children:Object(j.jsx)(o.a,{className:"text-red-FF0000",size:20})}))})),p=function(e){var t=e.className,n=void 0===t?"":t,o=e.options,i=e.error,s=e.ground,u=Object(a.a)(e,b),p="input".concat(s,"TextColor input").concat(s,"HoverBackground input").concat(s,"FocusedTextColor input").concat(s,"FocusedBackground input").concat(s,"FocusedBorderColor input").concat(s,"Background");return Object(j.jsxs)("div",{className:"".concat(n," relative flex items-center"),children:[Object(j.jsx)("select",Object(r.a)(Object(r.a)({className:d()("px-3 h-full border-2 border-solid w-full rounded outline-none",Object(c.a)({"border-red-FF0000":i},p,!i))},u),{},{spellCheck:!1,children:o.map((function(e,t){return Object(j.jsx)("option",{"data-testid":"select-option-".concat(e.value),value:e.value,children:e.label},"opt-"+t)}))})),i?Object(j.jsx)(l.a,{title:i,placement:"top",children:Object(j.jsx)(f,{className:"absolute right-2 my-auto w-auto"})}):null]})};t.a=Object(i.memo)(p)},846:function(e,t,n){"use strict";var c=n(14),a=n(0),r=n.n(a),o=n(326),l=n.n(o),i=n(788),s=n(114),u=n.n(s),d=n(2),j=r.a.forwardRef((function(e,t){return Object(d.jsx)("div",Object(c.a)(Object(c.a)({},e),{},{ref:t,children:Object(d.jsx)(l.a,{className:"text-red-500 text-xl",fontSize:"inherit"})}))}));t.a=function(e){var t=e.className,n=void 0===t?"":t,c=e.children,a=e.error,r=e.ground;return Object(d.jsxs)("div",{className:u()("flex justify-between relative ".concat(n),"".concat(r.toLowerCase(),"TextColor")),children:[Object(d.jsx)("div",{children:c}),a?Object(d.jsx)(i.a,{title:a,placement:"top",classes:{tooltip:"bg-red-500",tooltipArrow:"bg-red-500"},children:Object(d.jsx)(j,{className:"absolute right-2 my-auto w-auto"})}):null]})}},847:function(e,t,n){"use strict";var c=n(19),a=n(1),r=n.n(a),o=n(4),l=n(12),i=n(849),s=n(0),u=n.n(s),d=n(854),j=n.n(d),b=n(35),f=n(191),p=n(848),x=n(57),m=n(190),h=n(114),O=n.n(h),v=n(14),g=n(99),w=(n(844),n(2)),N=n(250),y=n(52),k=function(e){var t=e.collectionId,n=e.filters,a=void 0===n?[]:n,r=e.orderBy,o=e.inView,l=(Object(g.b)(),Object(s.useCallback)((function(){var e={collectionId:t,where:"",orderBy:""};return a.forEach((function(t,n){e.where+=(n>0?";":"")+t.fieldId+","+t.operator+","+t.value,r&&r.fieldId!==t.fieldId&&(e.orderBy+=(e.orderBy?";":"")+t.fieldId)})),r&&(e.orderBy+=(e.orderBy?";":"")+"".concat(r.fieldId,",").concat(r.direction)),r||a.length||(e.orderBy="createdAt,asc"),e.populateRef=!1,e}),[r,a,t])),i=Object(N.useInfiniteQuery)([t,r,a],(function(e){var t=e.pageParam;return y.a.getCollection(Object(v.a)(Object(v.a)({},l()),{},{startAfter:t}))}),{keepPreviousData:!0,getNextPageParam:function(e,t){var n=(null===e||void 0===e?void 0:e.length)&&10===e.length?e[9]:null;return n?n[r?r.fieldId:"createdAt"]:void 0}}),u=i.data,d=(i.error,i.fetchNextPage),j=i.hasNextPage;return Object(s.useEffect)((function(){o&&j&&d()}),[o,d,j]),{docs:(null===u||void 0===u?void 0:u.pages.reduce((function(e,t){return[].concat(Object(c.a)(e),Object(c.a)(t))}),[]))||[]}},C=n(324),I=n(1028),D=n(853),T=n.n(D),B=n(251),S=n(69);t.a=function(e){var t=e.collectionType,n=e.onPick,a=e.blackList,d=void 0===a?[]:a,h=e.singleSelect,v=void 0!==h&&h,g=e.valueFormatters,N=e.ground,y=e.filters,D=void 0===y?[]:y,F=e.onEdit,P=e.hideFilters,E=void 0!==P&&P,A=Object(b.k)(),z=u.a.useState([]),M=Object(l.a)(z,2),R=M[0],H=M[1],V=t.fields.filter((function(e){return e.displayOnTable})),L=u.a.useState([]),_=Object(l.a)(L,2),G=_[0],Y=_[1],q=u.a.useState(),J=Object(l.a)(q,2),Q=J[0],U=J[1],K=u.a.useState(!1),W=Object(l.a)(K,2),X=W[0],Z=W[1],$=k({collectionId:t.id,filters:R,orderBy:Q,inView:X}).docs,ee=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)({confirmation:"Delete ".concat(G.length," documents?")});case 2:if(!e.sent){e.next=5;break}B.a.deleteMultipleDocuments(t.id,$.filter((function(e){return G.includes(e.docId)}))),Y([]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=F||function(e){A.push("/collections/".concat(t.id,"/edit/").concat(e.docId))},ne=function(e){return(null===Q||void 0===Q?void 0:Q.fieldId)!==e.id?function(){U({fieldId:e.id,direction:"asc"})}:"asc"!==(null===Q||void 0===Q?void 0:Q.direction)?function(){return U(void 0)}:function(){return U({fieldId:e.id,direction:"desc"})}},ce=function(e,t){Y(t?v?[e]:function(t){return[].concat(Object(c.a)(t),[e])}:function(t){var n=Object(c.a)(t),a=n.findIndex((function(t){return t===e}));return null!=a&&n.splice(a,1),n})},ae=function(e,t){return"date"===e.type?T()(t).format("YYYY-MM-DD HH:mm"):g&&e.id in g?g[e.id](t):t.toString().substring(0,40)};return Object(s.useEffect)((function(){D.length&&H((function(e){return[].concat(Object(c.a)(e),Object(c.a)(D))}))}),[D]),Object(w.jsxs)("div",{className:"h-full w-full flex-col flex",children:[Object(w.jsxs)("div",{className:"flex justify-between mb-3",children:[E?null:Object(w.jsxs)("div",{className:"flex flex-wrap",children:[Object(w.jsx)(p.a,{ground:N,collectionType:t,onValue:function(e){return H((function(t){return[e].concat(Object(c.a)(t))}))}}),R.map((function(e,t){return e.hidden?null:Object(w.jsxs)("div",{className:O()("rounded min-h-28px border leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative","".concat(Object(S.e)(N),"TextColor ").concat(Object(S.e)(N),"BorderColor")),children:[e.fieldId," ",e.operator," ",e.value," ",Object(w.jsx)("span",{onClick:function(){return H((function(e){var n=Object(c.a)(e);return n.splice(t,1),n}))},className:"text-xs leading-28px ml-3 cursor-pointer",children:"\u2715"})]},"f-".concat(t))}))]}),n?Object(w.jsx)(x.a,{onClick:function(){return n($.filter((function(e){return G.includes(e.docId)})))},className:"h-28px min-w-unset rounded mb-3 px-7 ".concat(0===G.length?"buttonDisabledBackground buttonDisabledTextColor cursor-default":"primaryBackground buttonPrimaryTextColor"," "),children:"Select"}):Object(w.jsx)(x.a,{onClick:ee,disabled:0===G.length,className:"px-7 mb-3 min-w-unset rounded h-28px ".concat(0===G.length?"buttonDisabledBackground buttonDisabledTextColor cursor-default":"dangerBackground buttonDangerTextColor"," "),children:"Delete"})]}),Object(w.jsx)("div",{className:O()("flex-grow h-0 -mt-3 rounded overflow-hidden bg-white"),children:Object(w.jsxs)(m.a,{className:"relative table".concat(N,"Scrollbar h-full"),children:[Object(w.jsxs)("table",{className:"w-full text-center",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{className:"whitespace-nowrap",children:[Object(w.jsx)("th",{className:"sticky top-0 table".concat(N,"HeaderBackground z-10 px-1"),children:v?null:Object(w.jsx)(I.a,{size:"small",classes:{checked:"tableCheckboxTextColor",root:"p-0"},checked:G.length===$.length,onChange:function(e){return t=e.target.checked,Y(t?$.map((function(e){return e.docId})):[]);var t}})}),V.map((function(e,t){return Object(w.jsx)("th",{className:"font-medium sticky top-0 table".concat(N,"HeaderBackground"),children:Object(w.jsxs)("div",{className:"flex items-center justify-center",children:[Object(w.jsx)("div",{className:"w-5"}),Object(w.jsx)("div",{className:"cursor-pointer select-none",onClick:ne(e),children:e.id}),Object(w.jsx)("div",{className:"w-5",children:(null===Q||void 0===Q?void 0:Q.fieldId)===e.id?Object(w.jsx)(j.a,{fontSize:"small",className:"".concat("asc"===(null===Q||void 0===Q?void 0:Q.direction)?"transform rotate-180":"")}):null})]})},"th-".concat(t))}))]})}),Object(w.jsxs)("tbody",{children:[$.map((function(e,t){return d.includes(e.docId)?null:Object(w.jsxs)("tr",{onClick:function(){return n?ce(e.docId,!G.includes(e.docId)):te(e)},className:"cursor-pointer table".concat(N,"RowHoverTextColor table").concat(N,"RowHoverBackground"),children:[Object(w.jsx)("td",{className:"px-1",onClick:function(e){return e.stopPropagation()},children:Object(w.jsx)(I.a,{size:"small",classes:{checked:"tableCheckboxTextColor",root:"p-0"},checked:G.includes(e.docId),onChange:function(t){return ce(e.docId,t.target.checked)}})}),V.map((function(n,c){return Object(w.jsx)("td",{className:"px-2",children:null!=e[n.id]?"media"===n.type?n.mediaSingle?Object(w.jsx)(i.a,{file:e[n.id]}):Object(w.jsx)(i.a,{files:e[n.id]}):Object(w.jsx)("div",{className:"whitespace-nowrap",children:ae(n,e[n.id])}):null},"row-".concat(t,"-col-").concat(c))}))]},"row-".concat(t))})),Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:V.length+1,children:Object(w.jsx)(C.a,{onChange:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(w.jsx)("div",{className:"w-full"})})})})]})]}),Object(w.jsx)("div",{})]})})]})}},848:function(e,t,n){"use strict";var c=n(19),a=n(1),r=n.n(a),o=n(4),l=n(12),i=n(837),s=n(115),u=n(845),d=n(57),j=n(0),b=n.n(j),f=n(192),p=n(846),x=n(322),m=n.n(x),h=n(2);t.a=function(e){var t=e.collectionType,n=e.onValue,a=(e.ground,b.a.useState(!1)),j=Object(l.a)(a,2),x=j[0],O=j[1],v=Object(f.a)({onSubmit:function(){var e=Object(o.a)(r.a.mark((function e(t,c){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=c.resetForm,n(t),O(!1),a();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),initialValues:{value:"",operator:"",fieldId:""},validate:function(e){var t={};return Object.keys(e).forEach((function(n){e[n]||(t[n]="Required")})),t}}),g=v.values,w=v.errors,N=v.handleChange,y=v.submitCount,k=v.handleSubmit,C=v.isSubmitting;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.a,{onClick:function(){return O(!0)},className:"secondaryBackground buttonSecondaryTextColor min-w-unset flex items-center justify-center h-28px px-7 rounded text-sm mr-3 mb-3",children:"Filters"}),x?Object(h.jsx)(i.a,{open:x,children:Object(h.jsx)("div",{className:"fixed left-0 top-0 w-full h-full flex p-7",onMouseDown:function(){return O(!1)},children:Object(h.jsxs)("div",{onMouseDown:function(e){return e.stopPropagation()},className:"bg-white rounded p-7 m-auto relative animate-littlemoveup",style:{maxWidth:600},children:[Object(h.jsx)(m.a,{className:"absolute top-0 right-0 cursor-pointer",onClick:function(){return O(!1)}}),Object(h.jsxs)("div",{className:"flex flex-wrap -mx-2 mb-4",children:[Object(h.jsxs)("div",{className:"sm:w-1/3 w-full mb-3 px-2",children:[Object(h.jsx)(p.a,{ground:"Dialog",className:"mb-2",error:y>0?w.fieldId:null,children:"Field"}),Object(h.jsx)(u.a,{className:"h-34px",ground:"Dialog",name:"fieldId",onChange:N,value:g.fieldId,options:[{value:"",label:"Select"}].concat(Object(c.a)(t.fields.map((function(e){return{value:e.id,label:e.id}}))))})]}),Object(h.jsxs)("div",{className:"sm:w-1/3 w-full mb-3 px-2",children:[Object(h.jsx)(p.a,{ground:"Dialog",className:"mb-2",error:y>0?w.operator:null,children:"Operator"}),Object(h.jsx)(u.a,{className:"h-34px",ground:"Dialog",name:"operator",onChange:N,value:g.operator,options:[{value:"",label:"Select"}].concat(Object(c.a)(["<","<=","==",">",">=","!=","array-contains","array-contains-any","in","not-in"].map((function(e){return{value:e,label:e}}))))})]}),Object(h.jsxs)("div",{className:"sm:w-1/3 w-full mb-3 px-2",children:[Object(h.jsx)(p.a,{ground:"Dialog",className:"mb-2 text-black",error:y>0?w.value:null,children:"Value"}),Object(h.jsx)(s.a,{onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),k())},ground:"Dialog",placeholder:["in","not in","array-contains-any"].includes(g.operator)?"value, value, value":"value",className:"placeholder-black h-34px",value:g.value,onChange:N,name:"value"})]})]}),Object(h.jsx)("div",{className:"flex justify-end",children:Object(h.jsx)(d.a,{disabled:C,onClick:function(){return k()},className:"primaryBackground buttonPrimaryTextColor h-28px min-w-unset px-8",children:"Add"})})]})})}):null]})}},849:function(e,t,n){"use strict";var c=n(0),a=n.n(c),r=n(14),o=n(2),l=Object(c.forwardRef)((function(e,t){return Object(o.jsx)("div",Object(r.a)(Object(r.a)({},e),{},{ref:t}))})),i=n(788),s=function(e){var t=e.src;return Object(o.jsx)(i.a,{arrow:!0,title:Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)("img",{src:t,className:"max-w-136px max-h-136px w-auto h-auto",alt:""})}),placement:"top",classes:{tooltip:"font-poppins text-xs p-0 rounded bg-white shadow-md",arrow:"text-white"},children:Object(o.jsx)(l,{children:Object(o.jsx)("div",{onClick:function(e){e.stopPropagation(),window.open(t,"_blank")},className:"group w-4 h-4 relative flex items-center justify-center rounded hover:bg-gray-535371 hover:bg-opacity-5 cursor-pointer",children:Object(o.jsx)("div",{className:"relative w-4 h-4 rounded-full bg-center bg-cover pointer-events-none",style:{backgroundImage:"url(".concat(t,")")}})})})})};t.a=function(e){var t=e.files,n=e.file,c=a.a.useRef(Math.random());return Object(o.jsxs)("div",{className:"flex justify-center",children:[(t||(n?[n]:[])).slice(0,4).map((function(e,t){return Object(o.jsx)("div",{className:"mr-0.5",children:Object(o.jsx)(s,{src:e})},"".concat(c,"-file-").concat(t))})),t&&t.length>4?Object(o.jsx)("div",{className:"relative",children:Object(o.jsxs)("div",{className:"w-4 h-4 rounded-full bg-fireck-4 text-10px flex items-center justify-center",children:[t.length-4,"+"]})}):null]})}},856:function(e,t,n){"use strict";var c=n(14),a=n(189),r=n(114),o=n.n(r),l=n(2),i=["className"];t.a=function(e){var t=e.className,n=Object(a.a)(e,i);return Object(l.jsx)("div",Object(c.a)(Object(c.a)({},n),{},{className:o()("text-27px font-medium capitalize leading-none",t)}))}},862:function(e,t,n){"use strict";n.r(t),n.d(t,"MediaDocumentFormatters",(function(){return w}));var c=n(1),a=n.n(c),r=n(27),o=n(4),l=n(12),i=n(57),s=n(0),u=n.n(s),d=n(52),j=n(33),b=n(99),f=n(856),p=n(847),x=n(37),m=n(852),h=n.n(m),O=n(69),v=n(36),g=n(2),w={url:function(e){return Object(g.jsx)("div",{onClick:function(t){t.stopPropagation(),window.open(e,"_blank")},className:"bg-center bg-cover h-10 w-10 mx-auto bg-gray-E1E1E1",style:{backgroundImage:"url(".concat(e,")")}})},size:function(e){return Object(O.a)(e)}};t.default=function(){var e=u.a.useRef(null),t=Object(b.b)(),n=Object(s.useState)(0),c=Object(l.a)(n,2),m=c[0],O=c[1],N=Object(x.e)((function(e){return{collectionType:e.collectionTypes.find((function(e){return e.id===v.a.MEDIA}))}})).collectionType;return Object(g.jsxs)("div",{className:"h-full w-full flex flex-col",children:[Object(g.jsxs)("div",{className:"flex justify-between flex-wrap mb-3",children:[Object(g.jsx)(f.a,{className:"mb-4 mr-4",children:"Media"}),Object(g.jsx)("input",{type:"file",multiple:!0,className:"hidden",ref:e,onChange:function(){var e=Object(o.a)(a.a.mark((function e(n){var c,o,l,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c=n.target.files)||!c.length){e.next=25;break}j.a.dispatch({type:"SET_LOADING",payload:"Uploading ".concat(c.length," file").concat(c.length>1?"s":"","...")}),o=0,l=Object(r.a)(c),e.prev=5,l.s();case 7:if((i=l.n()).done){e.next=15;break}return s=i.value,e.next=11,d.a.uploadFile(s);case 11:"error"in(u=e.sent)?t(u.error+". Try reload the app",{variant:"error"}):(o++,j.a.dispatch({type:"SET_LOADING",payload:"".concat(o,"/").concat(c.length," uploaded.")}));case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),l.e(e.t0);case 20:return e.prev=20,l.f(),e.finish(20);case 23:j.a.dispatch({type:"SET_LOADING",payload:!1}),O((function(e){return e+1}));case 25:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},"file-input-".concat(m)),Object(g.jsx)(i.a,{onClick:function(){return e.current.click()},className:"primaryBackground buttonPrimaryTextColor mb-4 h-34px pr-6 pl-5 min-w-unset",children:Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)(h.a,{className:"mr-2 text-lg",fontSize:"inherit"}),Object(g.jsx)("span",{children:"Upload"})]})})]}),N?Object(g.jsx)(p.a,{ground:"Ground",valueFormatters:w,collectionType:N},"files-table-".concat(m)):null]})}}}]);
//# sourceMappingURL=9.942c473b.chunk.js.map